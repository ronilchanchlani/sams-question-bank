(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(a){if(a.ep)return;a.ep=!0;const u=e(a);fetch(a.href,u)}})();function HD(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yg={exports:{}},wc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function GD(){if(i0)return wc;i0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,a,u){var c=null;if(u!==void 0&&(c=""+u),a.key!==void 0&&(c=""+a.key),"key"in a){u={};for(var m in a)m!=="key"&&(u[m]=a[m])}else u=a;return a=u.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:u}}return wc.Fragment=t,wc.jsx=e,wc.jsxs=e,wc}var s0;function QD(){return s0||(s0=1,yg.exports=GD()),yg.exports}var st=QD(),_g={exports:{}},$t={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0;function KD(){if(a0)return $t;a0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.iterator;function V(C){return C===null||typeof C!="object"?null:(C=I&&C[I]||C["@@iterator"],typeof C=="function"?C:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,G={};function U(C,$,et){this.props=C,this.context=$,this.refs=G,this.updater=et||M}U.prototype.isReactComponent={},U.prototype.setState=function(C,$){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,$,"setState")},U.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function rt(){}rt.prototype=U.prototype;function F(C,$,et){this.props=C,this.context=$,this.refs=G,this.updater=et||M}var it=F.prototype=new rt;it.constructor=F,B(it,U.prototype),it.isPureReactComponent=!0;var tt=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},ct=Object.prototype.hasOwnProperty;function R(C,$,et,J,ut,At){return et=At.ref,{$$typeof:n,type:C,key:$,ref:et!==void 0?et:null,props:At}}function T(C,$){return R(C.type,$,void 0,void 0,void 0,C.props)}function A(C){return typeof C=="object"&&C!==null&&C.$$typeof===n}function D(C){var $={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(et){return $[et]})}var b=/\/+/g;function N(C,$){return typeof C=="object"&&C!==null&&C.key!=null?D(""+C.key):$.toString(36)}function w(){}function Ot(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(w,w):(C.status="pending",C.then(function($){C.status==="pending"&&(C.status="fulfilled",C.value=$)},function($){C.status==="pending"&&(C.status="rejected",C.reason=$)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function zt(C,$,et,J,ut){var At=typeof C;(At==="undefined"||At==="boolean")&&(C=null);var dt=!1;if(C===null)dt=!0;else switch(At){case"bigint":case"string":case"number":dt=!0;break;case"object":switch(C.$$typeof){case n:case t:dt=!0;break;case E:return dt=C._init,zt(dt(C._payload),$,et,J,ut)}}if(dt)return ut=ut(C),dt=J===""?"."+N(C,0):J,tt(ut)?(et="",dt!=null&&(et=dt.replace(b,"$&/")+"/"),zt(ut,$,et,"",function(Vn){return Vn})):ut!=null&&(A(ut)&&(ut=T(ut,et+(ut.key==null||C&&C.key===ut.key?"":(""+ut.key).replace(b,"$&/")+"/")+dt)),$.push(ut)),1;dt=0;var fe=J===""?".":J+":";if(tt(C))for(var Rt=0;Rt<C.length;Rt++)J=C[Rt],At=fe+N(J,Rt),dt+=zt(J,$,et,At,ut);else if(Rt=V(C),typeof Rt=="function")for(C=Rt.call(C),Rt=0;!(J=C.next()).done;)J=J.value,At=fe+N(J,Rt++),dt+=zt(J,$,et,At,ut);else if(At==="object"){if(typeof C.then=="function")return zt(Ot(C),$,et,J,ut);throw $=String(C),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return dt}function X(C,$,et){if(C==null)return C;var J=[],ut=0;return zt(C,J,"","",function(At){return $.call(et,At,ut++)}),J}function pt(C){if(C._status===-1){var $=C._result;$=$(),$.then(function(et){(C._status===0||C._status===-1)&&(C._status=1,C._result=et)},function(et){(C._status===0||C._status===-1)&&(C._status=2,C._result=et)}),C._status===-1&&(C._status=0,C._result=$)}if(C._status===1)return C._result.default;throw C._result}var Tt=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function qt(){}return $t.Children={map:X,forEach:function(C,$,et){X(C,function(){$.apply(this,arguments)},et)},count:function(C){var $=0;return X(C,function(){$++}),$},toArray:function(C){return X(C,function($){return $})||[]},only:function(C){if(!A(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},$t.Component=U,$t.Fragment=e,$t.Profiler=a,$t.PureComponent=F,$t.StrictMode=r,$t.Suspense=g,$t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,$t.__COMPILER_RUNTIME={__proto__:null,c:function(C){return W.H.useMemoCache(C)}},$t.cache=function(C){return function(){return C.apply(null,arguments)}},$t.cloneElement=function(C,$,et){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var J=B({},C.props),ut=C.key,At=void 0;if($!=null)for(dt in $.ref!==void 0&&(At=void 0),$.key!==void 0&&(ut=""+$.key),$)!ct.call($,dt)||dt==="key"||dt==="__self"||dt==="__source"||dt==="ref"&&$.ref===void 0||(J[dt]=$[dt]);var dt=arguments.length-2;if(dt===1)J.children=et;else if(1<dt){for(var fe=Array(dt),Rt=0;Rt<dt;Rt++)fe[Rt]=arguments[Rt+2];J.children=fe}return R(C.type,ut,void 0,void 0,At,J)},$t.createContext=function(C){return C={$$typeof:c,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:u,_context:C},C},$t.createElement=function(C,$,et){var J,ut={},At=null;if($!=null)for(J in $.key!==void 0&&(At=""+$.key),$)ct.call($,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ut[J]=$[J]);var dt=arguments.length-2;if(dt===1)ut.children=et;else if(1<dt){for(var fe=Array(dt),Rt=0;Rt<dt;Rt++)fe[Rt]=arguments[Rt+2];ut.children=fe}if(C&&C.defaultProps)for(J in dt=C.defaultProps,dt)ut[J]===void 0&&(ut[J]=dt[J]);return R(C,At,void 0,void 0,null,ut)},$t.createRef=function(){return{current:null}},$t.forwardRef=function(C){return{$$typeof:m,render:C}},$t.isValidElement=A,$t.lazy=function(C){return{$$typeof:E,_payload:{_status:-1,_result:C},_init:pt}},$t.memo=function(C,$){return{$$typeof:y,type:C,compare:$===void 0?null:$}},$t.startTransition=function(C){var $=W.T,et={};W.T=et;try{var J=C(),ut=W.S;ut!==null&&ut(et,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(qt,Tt)}catch(At){Tt(At)}finally{W.T=$}},$t.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},$t.use=function(C){return W.H.use(C)},$t.useActionState=function(C,$,et){return W.H.useActionState(C,$,et)},$t.useCallback=function(C,$){return W.H.useCallback(C,$)},$t.useContext=function(C){return W.H.useContext(C)},$t.useDebugValue=function(){},$t.useDeferredValue=function(C,$){return W.H.useDeferredValue(C,$)},$t.useEffect=function(C,$,et){var J=W.H;if(typeof et=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(C,$)},$t.useId=function(){return W.H.useId()},$t.useImperativeHandle=function(C,$,et){return W.H.useImperativeHandle(C,$,et)},$t.useInsertionEffect=function(C,$){return W.H.useInsertionEffect(C,$)},$t.useLayoutEffect=function(C,$){return W.H.useLayoutEffect(C,$)},$t.useMemo=function(C,$){return W.H.useMemo(C,$)},$t.useOptimistic=function(C,$){return W.H.useOptimistic(C,$)},$t.useReducer=function(C,$,et){return W.H.useReducer(C,$,et)},$t.useRef=function(C){return W.H.useRef(C)},$t.useState=function(C){return W.H.useState(C)},$t.useSyncExternalStore=function(C,$,et){return W.H.useSyncExternalStore(C,$,et)},$t.useTransition=function(){return W.H.useTransition()},$t.version="19.1.1",$t}var o0;function E_(){return o0||(o0=1,_g.exports=KD()),_g.exports}var Y=E_();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var l0="popstate";function YD(n={}){function t(r,a){let{pathname:u,search:c,hash:m}=r.location;return oy("",{pathname:u,search:c,hash:m},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(r,a){return typeof a=="string"?a:eh(a)}return WD(t,e,null,n)}function Oe(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function qi(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function XD(){return Math.random().toString(36).substring(2,10)}function u0(n,t){return{usr:n.state,key:n.key,idx:t}}function oy(n,t,e=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?fu(t):t,state:e,key:t&&t.key||r||XD()}}function eh({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function fu(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let r=n.indexOf("?");r>=0&&(t.search=n.substring(r),n=n.substring(0,r)),n&&(t.pathname=n)}return t}function WD(n,t,e,r={}){let{window:a=document.defaultView,v5Compat:u=!1}=r,c=a.history,m="POP",g=null,y=E();y==null&&(y=0,c.replaceState({...c.state,idx:y},""));function E(){return(c.state||{idx:null}).idx}function I(){m="POP";let U=E(),rt=U==null?null:U-y;y=U,g&&g({action:m,location:G.location,delta:rt})}function V(U,rt){m="PUSH";let F=oy(G.location,U,rt);y=E()+1;let it=u0(F,y),tt=G.createHref(F);try{c.pushState(it,"",tt)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;a.location.assign(tt)}u&&g&&g({action:m,location:G.location,delta:1})}function M(U,rt){m="REPLACE";let F=oy(G.location,U,rt);y=E();let it=u0(F,y),tt=G.createHref(F);c.replaceState(it,"",tt),u&&g&&g({action:m,location:G.location,delta:0})}function B(U){return JD(U)}let G={get action(){return m},get location(){return n(a,c)},listen(U){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(l0,I),g=U,()=>{a.removeEventListener(l0,I),g=null}},createHref(U){return t(a,U)},createURL:B,encodeLocation(U){let rt=B(U);return{pathname:rt.pathname,search:rt.search,hash:rt.hash}},push:V,replace:M,go(U){return c.go(U)}};return G}function JD(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Oe(e,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:eh(n);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=e+r),new URL(r,e)}function AS(n,t,e="/"){return ZD(n,t,e,!1)}function ZD(n,t,e,r){let a=typeof t=="string"?fu(t):t,u=Rs(a.pathname||"/",e);if(u==null)return null;let c=wS(n);tV(c);let m=null;for(let g=0;m==null&&g<c.length;++g){let y=hV(u);m=uV(c[g],y,r)}return m}function wS(n,t=[],e=[],r="",a=!1){let u=(c,m,g=a,y)=>{let E={relativePath:y===void 0?c.path||"":y,caseSensitive:c.caseSensitive===!0,childrenIndex:m,route:c};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(r)&&g)return;Oe(E.relativePath.startsWith(r),`Absolute route path "${E.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(r.length)}let I=Is([r,E.relativePath]),V=e.concat(E);c.children&&c.children.length>0&&(Oe(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${I}".`),wS(c.children,t,V,I,g)),!(c.path==null&&!c.index)&&t.push({path:I,score:oV(I,c.index),routesMeta:V})};return n.forEach((c,m)=>{if(c.path===""||!c.path?.includes("?"))u(c,m);else for(let g of SS(c.path))u(c,m,!0,g)}),t}function SS(n){let t=n.split("/");if(t.length===0)return[];let[e,...r]=t,a=e.endsWith("?"),u=e.replace(/\?$/,"");if(r.length===0)return a?[u,""]:[u];let c=SS(r.join("/")),m=[];return m.push(...c.map(g=>g===""?u:[u,g].join("/"))),a&&m.push(...c),m.map(g=>n.startsWith("/")&&g===""?"/":g)}function tV(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:lV(t.routesMeta.map(r=>r.childrenIndex),e.routesMeta.map(r=>r.childrenIndex)))}var eV=/^:[\w-]+$/,nV=3,rV=2,iV=1,sV=10,aV=-2,c0=n=>n==="*";function oV(n,t){let e=n.split("/"),r=e.length;return e.some(c0)&&(r+=aV),t&&(r+=rV),e.filter(a=>!c0(a)).reduce((a,u)=>a+(eV.test(u)?nV:u===""?iV:sV),r)}function lV(n,t){return n.length===t.length&&n.slice(0,-1).every((r,a)=>r===t[a])?n[n.length-1]-t[t.length-1]:0}function uV(n,t,e=!1){let{routesMeta:r}=n,a={},u="/",c=[];for(let m=0;m<r.length;++m){let g=r[m],y=m===r.length-1,E=u==="/"?t:t.slice(u.length)||"/",I=yd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},E),V=g.route;if(!I&&y&&e&&!r[r.length-1].route.index&&(I=yd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},E)),!I)return null;Object.assign(a,I.params),c.push({params:a,pathname:Is([u,I.pathname]),pathnameBase:pV(Is([u,I.pathnameBase])),route:V}),I.pathnameBase!=="/"&&(u=Is([u,I.pathnameBase]))}return c}function yd(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,r]=cV(n.path,n.caseSensitive,n.end),a=t.match(e);if(!a)return null;let u=a[0],c=u.replace(/(.)\/+$/,"$1"),m=a.slice(1);return{params:r.reduce((y,{paramName:E,isOptional:I},V)=>{if(E==="*"){let B=m[V]||"";c=u.slice(0,u.length-B.length).replace(/(.)\/+$/,"$1")}const M=m[V];return I&&!M?y[E]=void 0:y[E]=(M||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:c,pattern:n}}function cV(n,t=!1,e=!0){qi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,m,g)=>(r.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function hV(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function Rs(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,r=n.charAt(e);return r&&r!=="/"?null:n.slice(e)||"/"}function fV(n,t="/"){let{pathname:e,search:r="",hash:a=""}=typeof n=="string"?fu(n):n;return{pathname:e?e.startsWith("/")?e:dV(e,t):t,search:gV(r),hash:yV(a)}}function dV(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function vg(n,t,e,r){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mV(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function IS(n){let t=mV(n);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function RS(n,t,e,r=!1){let a;typeof n=="string"?a=fu(n):(a={...n},Oe(!a.pathname||!a.pathname.includes("?"),vg("?","pathname","search",a)),Oe(!a.pathname||!a.pathname.includes("#"),vg("#","pathname","hash",a)),Oe(!a.search||!a.search.includes("#"),vg("#","search","hash",a)));let u=n===""||a.pathname==="",c=u?"/":a.pathname,m;if(c==null)m=e;else{let I=t.length-1;if(!r&&c.startsWith("..")){let V=c.split("/");for(;V[0]==="..";)V.shift(),I-=1;a.pathname=V.join("/")}m=I>=0?t[I]:"/"}let g=fV(a,m),y=c&&c!=="/"&&c.endsWith("/"),E=(u||c===".")&&e.endsWith("/");return!g.pathname.endsWith("/")&&(y||E)&&(g.pathname+="/"),g}var Is=n=>n.join("/").replace(/\/\/+/g,"/"),pV=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),gV=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,yV=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function _V(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var bS=["POST","PUT","PATCH","DELETE"];new Set(bS);var vV=["GET",...bS];new Set(vV);var du=Y.createContext(null);du.displayName="DataRouter";var Kd=Y.createContext(null);Kd.displayName="DataRouterState";Y.createContext(!1);var CS=Y.createContext({isTransitioning:!1});CS.displayName="ViewTransition";var EV=Y.createContext(new Map);EV.displayName="Fetchers";var TV=Y.createContext(null);TV.displayName="Await";var Qi=Y.createContext(null);Qi.displayName="Navigation";var dh=Y.createContext(null);dh.displayName="Location";var ks=Y.createContext({outlet:null,matches:[],isDataRoute:!1});ks.displayName="Route";var T_=Y.createContext(null);T_.displayName="RouteError";function AV(n,{relative:t}={}){Oe(mh(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:r}=Y.useContext(Qi),{hash:a,pathname:u,search:c}=ph(n,{relative:t}),m=u;return e!=="/"&&(m=u==="/"?e:Is([e,u])),r.createHref({pathname:m,search:c,hash:a})}function mh(){return Y.useContext(dh)!=null}function qo(){return Oe(mh(),"useLocation() may be used only in the context of a <Router> component."),Y.useContext(dh).location}var DS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function VS(n){Y.useContext(Qi).static||Y.useLayoutEffect(n)}function wV(){let{isDataRoute:n}=Y.useContext(ks);return n?kV():SV()}function SV(){Oe(mh(),"useNavigate() may be used only in the context of a <Router> component.");let n=Y.useContext(du),{basename:t,navigator:e}=Y.useContext(Qi),{matches:r}=Y.useContext(ks),{pathname:a}=qo(),u=JSON.stringify(IS(r)),c=Y.useRef(!1);return VS(()=>{c.current=!0}),Y.useCallback((g,y={})=>{if(qi(c.current,DS),!c.current)return;if(typeof g=="number"){e.go(g);return}let E=RS(g,JSON.parse(u),a,y.relative==="path");n==null&&t!=="/"&&(E.pathname=E.pathname==="/"?t:Is([t,E.pathname])),(y.replace?e.replace:e.push)(E,y.state,y)},[t,e,u,a,n])}Y.createContext(null);function ph(n,{relative:t}={}){let{matches:e}=Y.useContext(ks),{pathname:r}=qo(),a=JSON.stringify(IS(e));return Y.useMemo(()=>RS(n,JSON.parse(a),r,t==="path"),[n,a,r,t])}function IV(n,t){return PS(n,t)}function PS(n,t,e,r,a){Oe(mh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=Y.useContext(Qi),{matches:c}=Y.useContext(ks),m=c[c.length-1],g=m?m.params:{},y=m?m.pathname:"/",E=m?m.pathnameBase:"/",I=m&&m.route;{let F=I&&I.path||"";NS(y,!I||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let V=qo(),M;if(t){let F=typeof t=="string"?fu(t):t;Oe(E==="/"||F.pathname?.startsWith(E),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${F.pathname}" was given in the \`location\` prop.`),M=F}else M=V;let B=M.pathname||"/",G=B;if(E!=="/"){let F=E.replace(/^\//,"").split("/");G="/"+B.replace(/^\//,"").split("/").slice(F.length).join("/")}let U=AS(n,{pathname:G});qi(I||U!=null,`No routes matched location "${M.pathname}${M.search}${M.hash}" `),qi(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${M.pathname}${M.search}${M.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let rt=VV(U&&U.map(F=>Object.assign({},F,{params:Object.assign({},g,F.params),pathname:Is([E,u.encodeLocation?u.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?E:Is([E,u.encodeLocation?u.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),c,e,r,a);return t&&rt?Y.createElement(dh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...M},navigationType:"POP"}},rt):rt}function RV(){let n=MV(),t=_V(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},u={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=Y.createElement(Y.Fragment,null,Y.createElement("p",null,"💿 Hey developer 👋"),Y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Y.createElement("code",{style:u},"ErrorBoundary")," or"," ",Y.createElement("code",{style:u},"errorElement")," prop on your route.")),Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},t),e?Y.createElement("pre",{style:a},e):null,c)}var bV=Y.createElement(RV,null),CV=class extends Y.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){this.props.unstable_onError?this.props.unstable_onError(n,t):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?Y.createElement(ks.Provider,{value:this.props.routeContext},Y.createElement(T_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function DV({routeContext:n,match:t,children:e}){let r=Y.useContext(du);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),Y.createElement(ks.Provider,{value:n},e)}function VV(n,t=[],e=null,r=null,a=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let u=n,c=e?.errors;if(c!=null){let y=u.findIndex(E=>E.route.id&&c?.[E.route.id]!==void 0);Oe(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let m=!1,g=-1;if(e)for(let y=0;y<u.length;y++){let E=u[y];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=y),E.route.id){let{loaderData:I,errors:V}=e,M=E.route.loader&&!I.hasOwnProperty(E.route.id)&&(!V||V[E.route.id]===void 0);if(E.route.lazy||M){m=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((y,E,I)=>{let V,M=!1,B=null,G=null;e&&(V=c&&E.route.id?c[E.route.id]:void 0,B=E.route.errorElement||bV,m&&(g<0&&I===0?(NS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,G=null):g===I&&(M=!0,G=E.route.hydrateFallbackElement||null)));let U=t.concat(u.slice(0,I+1)),rt=()=>{let F;return V?F=B:M?F=G:E.route.Component?F=Y.createElement(E.route.Component,null):E.route.element?F=E.route.element:F=y,Y.createElement(DV,{match:E,routeContext:{outlet:y,matches:U,isDataRoute:e!=null},children:F})};return e&&(E.route.ErrorBoundary||E.route.errorElement||I===0)?Y.createElement(CV,{location:e.location,revalidation:e.revalidation,component:B,error:V,children:rt(),routeContext:{outlet:null,matches:U,isDataRoute:!0},unstable_onError:r}):rt()},null)}function A_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PV(n){let t=Y.useContext(du);return Oe(t,A_(n)),t}function NV(n){let t=Y.useContext(Kd);return Oe(t,A_(n)),t}function OV(n){let t=Y.useContext(ks);return Oe(t,A_(n)),t}function w_(n){let t=OV(n),e=t.matches[t.matches.length-1];return Oe(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function xV(){return w_("useRouteId")}function MV(){let n=Y.useContext(T_),t=NV("useRouteError"),e=w_("useRouteError");return n!==void 0?n:t.errors?.[e]}function kV(){let{router:n}=PV("useNavigate"),t=w_("useNavigate"),e=Y.useRef(!1);return VS(()=>{e.current=!0}),Y.useCallback(async(a,u={})=>{qi(e.current,DS),e.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:t,...u}))},[n,t])}var h0={};function NS(n,t,e){!t&&!h0[n]&&(h0[n]=!0,qi(!1,e))}Y.memo(LV);function LV({routes:n,future:t,state:e,unstable_onError:r}){return PS(n,void 0,e,r,t)}function hi(n){Oe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function UV({basename:n="/",children:t=null,location:e,navigationType:r="POP",navigator:a,static:u=!1}){Oe(!mh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),m=Y.useMemo(()=>({basename:c,navigator:a,static:u,future:{}}),[c,a,u]);typeof e=="string"&&(e=fu(e));let{pathname:g="/",search:y="",hash:E="",state:I=null,key:V="default"}=e,M=Y.useMemo(()=>{let B=Rs(g,c);return B==null?null:{location:{pathname:B,search:y,hash:E,state:I,key:V},navigationType:r}},[c,g,y,E,I,V,r]);return qi(M!=null,`<Router basename="${c}"> is not able to match the URL "${g}${y}${E}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:Y.createElement(Qi.Provider,{value:m},Y.createElement(dh.Provider,{children:t,value:M}))}function OS({children:n,location:t}){return IV(ly(n),t)}function ly(n,t=[]){let e=[];return Y.Children.forEach(n,(r,a)=>{if(!Y.isValidElement(r))return;let u=[...t,a];if(r.type===Y.Fragment){e.push.apply(e,ly(r.props.children,u));return}Oe(r.type===hi,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Oe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||u.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=ly(r.props.children,u)),e.push(c)}),e}var zf="get",qf="application/x-www-form-urlencoded";function Yd(n){return n!=null&&typeof n.tagName=="string"}function $V(n){return Yd(n)&&n.tagName.toLowerCase()==="button"}function BV(n){return Yd(n)&&n.tagName.toLowerCase()==="form"}function FV(n){return Yd(n)&&n.tagName.toLowerCase()==="input"}function jV(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function zV(n,t){return n.button===0&&(!t||t==="_self")&&!jV(n)}var Pf=null;function qV(){if(Pf===null)try{new FormData(document.createElement("form"),0),Pf=!1}catch{Pf=!0}return Pf}var HV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Eg(n){return n!=null&&!HV.has(n)?(qi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qf}"`),null):n}function GV(n,t){let e,r,a,u,c;if(BV(n)){let m=n.getAttribute("action");r=m?Rs(m,t):null,e=n.getAttribute("method")||zf,a=Eg(n.getAttribute("enctype"))||qf,u=new FormData(n)}else if($V(n)||FV(n)&&(n.type==="submit"||n.type==="image")){let m=n.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=n.getAttribute("formaction")||m.getAttribute("action");if(r=g?Rs(g,t):null,e=n.getAttribute("formmethod")||m.getAttribute("method")||zf,a=Eg(n.getAttribute("formenctype"))||Eg(m.getAttribute("enctype"))||qf,u=new FormData(m,n),!qV()){let{name:y,type:E,value:I}=n;if(E==="image"){let V=y?`${y}.`:"";u.append(`${V}x`,"0"),u.append(`${V}y`,"0")}else y&&u.append(y,I)}}else{if(Yd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=zf,r=null,a=qf,c=n}return u&&a==="text/plain"&&(c=u,u=void 0),{action:r,method:e.toLowerCase(),encType:a,formData:u,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function S_(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function QV(n,t,e){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${e}`:t&&Rs(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${e}`,r}async function KV(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function YV(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function XV(n,t,e){let r=await Promise.all(n.map(async a=>{let u=t.routes[a.route.id];if(u){let c=await KV(u,e);return c.links?c.links():[]}return[]}));return tP(r.flat(1).filter(YV).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function f0(n,t,e,r,a,u){let c=(g,y)=>e[y]?g.route.id!==e[y].route.id:!0,m=(g,y)=>e[y].pathname!==g.pathname||e[y].route.path?.endsWith("*")&&e[y].params["*"]!==g.params["*"];return u==="assets"?t.filter((g,y)=>c(g,y)||m(g,y)):u==="data"?t.filter((g,y)=>{let E=r.routes[g.route.id];if(!E||!E.hasLoader)return!1;if(c(g,y)||m(g,y))return!0;if(g.route.shouldRevalidate){let I=g.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function WV(n,t,{includeHydrateFallback:e}={}){return JV(n.map(r=>{let a=t.routes[r.route.id];if(!a)return[];let u=[a.module];return a.clientActionModule&&(u=u.concat(a.clientActionModule)),a.clientLoaderModule&&(u=u.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(u=u.concat(a.hydrateFallbackModule)),a.imports&&(u=u.concat(a.imports)),u}).flat(1))}function JV(n){return[...new Set(n)]}function ZV(n){let t={},e=Object.keys(n).sort();for(let r of e)t[r]=n[r];return t}function tP(n,t){let e=new Set;return new Set(t),n.reduce((r,a)=>{let u=JSON.stringify(ZV(a));return e.has(u)||(e.add(u),r.push({key:u,link:a})),r},[])}function xS(){let n=Y.useContext(du);return S_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function eP(){let n=Y.useContext(Kd);return S_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var I_=Y.createContext(void 0);I_.displayName="FrameworkContext";function MS(){let n=Y.useContext(I_);return S_(n,"You must render this element inside a <HydratedRouter> element"),n}function nP(n,t){let e=Y.useContext(I_),[r,a]=Y.useState(!1),[u,c]=Y.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:y,onMouseLeave:E,onTouchStart:I}=t,V=Y.useRef(null);Y.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let G=rt=>{rt.forEach(F=>{c(F.isIntersecting)})},U=new IntersectionObserver(G,{threshold:.5});return V.current&&U.observe(V.current),()=>{U.disconnect()}}},[n]),Y.useEffect(()=>{if(r){let G=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(G)}}},[r]);let M=()=>{a(!0)},B=()=>{a(!1),c(!1)};return e?n!=="intent"?[u,V,{}]:[u,V,{onFocus:Sc(m,M),onBlur:Sc(g,B),onMouseEnter:Sc(y,M),onMouseLeave:Sc(E,B),onTouchStart:Sc(I,M)}]:[!1,V,{}]}function Sc(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function rP({page:n,...t}){let{router:e}=xS(),r=Y.useMemo(()=>AS(e.routes,n,e.basename),[e.routes,n,e.basename]);return r?Y.createElement(sP,{page:n,matches:r,...t}):null}function iP(n){let{manifest:t,routeModules:e}=MS(),[r,a]=Y.useState([]);return Y.useEffect(()=>{let u=!1;return XV(n,t,e).then(c=>{u||a(c)}),()=>{u=!0}},[n,t,e]),r}function sP({page:n,matches:t,...e}){let r=qo(),{manifest:a,routeModules:u}=MS(),{basename:c}=xS(),{loaderData:m,matches:g}=eP(),y=Y.useMemo(()=>f0(n,t,g,a,r,"data"),[n,t,g,a,r]),E=Y.useMemo(()=>f0(n,t,g,a,r,"assets"),[n,t,g,a,r]),I=Y.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let B=new Set,G=!1;if(t.forEach(rt=>{let F=a.routes[rt.route.id];!F||!F.hasLoader||(!y.some(it=>it.route.id===rt.route.id)&&rt.route.id in m&&u[rt.route.id]?.shouldRevalidate||F.hasClientLoader?G=!0:B.add(rt.route.id))}),B.size===0)return[];let U=QV(n,c,"data");return G&&B.size>0&&U.searchParams.set("_routes",t.filter(rt=>B.has(rt.route.id)).map(rt=>rt.route.id).join(",")),[U.pathname+U.search]},[c,m,r,a,y,t,n,u]),V=Y.useMemo(()=>WV(E,a),[E,a]),M=iP(E);return Y.createElement(Y.Fragment,null,I.map(B=>Y.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...e})),V.map(B=>Y.createElement("link",{key:B,rel:"modulepreload",href:B,...e})),M.map(({key:B,link:G})=>Y.createElement("link",{key:B,nonce:e.nonce,...G})))}function aP(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var kS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kS&&(window.__reactRouterVersion="7.9.1")}catch{}function LS({basename:n,children:t,window:e}){let r=Y.useRef();r.current==null&&(r.current=YD({window:e,v5Compat:!0}));let a=r.current,[u,c]=Y.useState({action:a.action,location:a.location}),m=Y.useCallback(g=>{Y.startTransition(()=>c(g))},[c]);return Y.useLayoutEffect(()=>a.listen(m),[a,m]),Y.createElement(UV,{basename:n,children:t,location:u.location,navigationType:u.action,navigator:a})}var US=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kl=Y.forwardRef(function({onClick:t,discover:e="render",prefetch:r="none",relative:a,reloadDocument:u,replace:c,state:m,target:g,to:y,preventScrollReset:E,viewTransition:I,...V},M){let{basename:B}=Y.useContext(Qi),G=typeof y=="string"&&US.test(y),U,rt=!1;if(typeof y=="string"&&G&&(U=y,kS))try{let A=new URL(window.location.href),D=y.startsWith("//")?new URL(A.protocol+y):new URL(y),b=Rs(D.pathname,B);D.origin===A.origin&&b!=null?y=b+D.search+D.hash:rt=!0}catch{qi(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=AV(y,{relative:a}),[it,tt,W]=nP(r,V),ct=cP(y,{replace:c,state:m,target:g,preventScrollReset:E,relative:a,viewTransition:I});function R(A){t&&t(A),A.defaultPrevented||ct(A)}let T=Y.createElement("a",{...V,...W,href:U||F,onClick:rt||u?t:R,ref:aP(M,tt),target:g,"data-discover":!G&&e==="render"?"true":void 0});return it&&!G?Y.createElement(Y.Fragment,null,T,Y.createElement(rP,{page:F})):T});kl.displayName="Link";var oP=Y.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:r="",end:a=!1,style:u,to:c,viewTransition:m,children:g,...y},E){let I=ph(c,{relative:y.relative}),V=qo(),M=Y.useContext(Kd),{navigator:B,basename:G}=Y.useContext(Qi),U=M!=null&&pP(I)&&m===!0,rt=B.encodeLocation?B.encodeLocation(I).pathname:I.pathname,F=V.pathname,it=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;e||(F=F.toLowerCase(),it=it?it.toLowerCase():null,rt=rt.toLowerCase()),it&&G&&(it=Rs(it,G)||it);const tt=rt!=="/"&&rt.endsWith("/")?rt.length-1:rt.length;let W=F===rt||!a&&F.startsWith(rt)&&F.charAt(tt)==="/",ct=it!=null&&(it===rt||!a&&it.startsWith(rt)&&it.charAt(rt.length)==="/"),R={isActive:W,isPending:ct,isTransitioning:U},T=W?t:void 0,A;typeof r=="function"?A=r(R):A=[r,W?"active":null,ct?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(R):u;return Y.createElement(kl,{...y,"aria-current":T,className:A,ref:E,style:D,to:c,viewTransition:m},typeof g=="function"?g(R):g)});oP.displayName="NavLink";var lP=Y.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:r,replace:a,state:u,method:c=zf,action:m,onSubmit:g,relative:y,preventScrollReset:E,viewTransition:I,...V},M)=>{let B=dP(),G=mP(m,{relative:y}),U=c.toLowerCase()==="get"?"get":"post",rt=typeof m=="string"&&US.test(m),F=it=>{if(g&&g(it),it.defaultPrevented)return;it.preventDefault();let tt=it.nativeEvent.submitter,W=tt?.getAttribute("formmethod")||c;B(tt||it.currentTarget,{fetcherKey:t,method:W,navigate:e,replace:a,state:u,relative:y,preventScrollReset:E,viewTransition:I})};return Y.createElement("form",{ref:M,method:U,action:G,onSubmit:r?g:F,...V,"data-discover":!rt&&n==="render"?"true":void 0})});lP.displayName="Form";function uP(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $S(n){let t=Y.useContext(du);return Oe(t,uP(n)),t}function cP(n,{target:t,replace:e,state:r,preventScrollReset:a,relative:u,viewTransition:c}={}){let m=wV(),g=qo(),y=ph(n,{relative:u});return Y.useCallback(E=>{if(zV(E,t)){E.preventDefault();let I=e!==void 0?e:eh(g)===eh(y);m(n,{replace:I,state:r,preventScrollReset:a,relative:u,viewTransition:c})}},[g,m,y,e,r,t,n,a,u,c])}var hP=0,fP=()=>`__${String(++hP)}__`;function dP(){let{router:n}=$S("useSubmit"),{basename:t}=Y.useContext(Qi),e=xV();return Y.useCallback(async(r,a={})=>{let{action:u,method:c,encType:m,formData:g,body:y}=GV(r,t);if(a.navigate===!1){let E=a.fetcherKey||fP();await n.fetch(E,e,a.action||u,{preventScrollReset:a.preventScrollReset,formData:g,body:y,formMethod:a.method||c,formEncType:a.encType||m,flushSync:a.flushSync})}else await n.navigate(a.action||u,{preventScrollReset:a.preventScrollReset,formData:g,body:y,formMethod:a.method||c,formEncType:a.encType||m,replace:a.replace,state:a.state,fromRouteId:e,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,t,e])}function mP(n,{relative:t}={}){let{basename:e}=Y.useContext(Qi),r=Y.useContext(ks);Oe(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),u={...ph(n||".",{relative:t})},c=qo();if(n==null){u.search=c.search;let m=new URLSearchParams(u.search),g=m.getAll("index");if(g.some(E=>E==="")){m.delete("index"),g.filter(I=>I).forEach(I=>m.append("index",I));let E=m.toString();u.search=E?`?${E}`:""}}return(!n||n===".")&&a.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(u.pathname=u.pathname==="/"?e:Is([e,u.pathname])),eh(u)}function pP(n,{relative:t}={}){let e=Y.useContext(CS);Oe(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=$S("useViewTransitionState"),a=ph(n,{relative:t});if(!e.isTransitioning)return!1;let u=Rs(e.currentLocation.pathname,r)||e.currentLocation.pathname,c=Rs(e.nextLocation.pathname,r)||e.nextLocation.pathname;return yd(a.pathname,c)!=null||yd(a.pathname,u)!=null}var Tg={exports:{}},Ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d0;function gP(){if(d0)return Ln;d0=1;var n=E_();function t(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function u(g,y,E){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:I==null?null:""+I,children:g,containerInfo:y,implementation:E}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ln.createPortal=function(g,y){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return u(g,y,null,E)},Ln.flushSync=function(g){var y=c.T,E=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=y,r.p=E,r.d.f()}},Ln.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},Ln.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Ln.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var E=y.as,I=m(E,y.crossOrigin),V=typeof y.integrity=="string"?y.integrity:void 0,M=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;E==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:I,integrity:V,fetchPriority:M}):E==="script"&&r.d.X(g,{crossOrigin:I,integrity:V,fetchPriority:M,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ln.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var E=m(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},Ln.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var E=y.as,I=m(E,y.crossOrigin);r.d.L(g,E,{crossOrigin:I,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ln.preloadModule=function(g,y){if(typeof g=="string")if(y){var E=m(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},Ln.requestFormReset=function(g){r.d.r(g)},Ln.unstable_batchedUpdates=function(g,y){return g(y)},Ln.useFormState=function(g,y,E){return c.H.useFormState(g,y,E)},Ln.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ln.version="19.1.1",Ln}var m0;function yP(){if(m0)return Tg.exports;m0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Tg.exports=gP(),Tg.exports}var Ag={exports:{}},Ic={},wg={exports:{}},Sg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0;function _P(){return p0||(p0=1,(function(n){function t(X,pt){var Tt=X.length;X.push(pt);t:for(;0<Tt;){var qt=Tt-1>>>1,C=X[qt];if(0<a(C,pt))X[qt]=pt,X[Tt]=C,Tt=qt;else break t}}function e(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var pt=X[0],Tt=X.pop();if(Tt!==pt){X[0]=Tt;t:for(var qt=0,C=X.length,$=C>>>1;qt<$;){var et=2*(qt+1)-1,J=X[et],ut=et+1,At=X[ut];if(0>a(J,Tt))ut<C&&0>a(At,J)?(X[qt]=At,X[ut]=Tt,qt=ut):(X[qt]=J,X[et]=Tt,qt=et);else if(ut<C&&0>a(At,Tt))X[qt]=At,X[ut]=Tt,qt=ut;else break t}}return pt}function a(X,pt){var Tt=X.sortIndex-pt.sortIndex;return Tt!==0?Tt:X.id-pt.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();n.unstable_now=function(){return c.now()-m}}var g=[],y=[],E=1,I=null,V=3,M=!1,B=!1,G=!1,U=!1,rt=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,it=typeof setImmediate<"u"?setImmediate:null;function tt(X){for(var pt=e(y);pt!==null;){if(pt.callback===null)r(y);else if(pt.startTime<=X)r(y),pt.sortIndex=pt.expirationTime,t(g,pt);else break;pt=e(y)}}function W(X){if(G=!1,tt(X),!B)if(e(g)!==null)B=!0,ct||(ct=!0,N());else{var pt=e(y);pt!==null&&zt(W,pt.startTime-X)}}var ct=!1,R=-1,T=5,A=-1;function D(){return U?!0:!(n.unstable_now()-A<T)}function b(){if(U=!1,ct){var X=n.unstable_now();A=X;var pt=!0;try{t:{B=!1,G&&(G=!1,F(R),R=-1),M=!0;var Tt=V;try{e:{for(tt(X),I=e(g);I!==null&&!(I.expirationTime>X&&D());){var qt=I.callback;if(typeof qt=="function"){I.callback=null,V=I.priorityLevel;var C=qt(I.expirationTime<=X);if(X=n.unstable_now(),typeof C=="function"){I.callback=C,tt(X),pt=!0;break e}I===e(g)&&r(g),tt(X)}else r(g);I=e(g)}if(I!==null)pt=!0;else{var $=e(y);$!==null&&zt(W,$.startTime-X),pt=!1}}break t}finally{I=null,V=Tt,M=!1}pt=void 0}}finally{pt?N():ct=!1}}}var N;if(typeof it=="function")N=function(){it(b)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,Ot=w.port2;w.port1.onmessage=b,N=function(){Ot.postMessage(null)}}else N=function(){rt(b,0)};function zt(X,pt){R=rt(function(){X(n.unstable_now())},pt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return V},n.unstable_next=function(X){switch(V){case 1:case 2:case 3:var pt=3;break;default:pt=V}var Tt=V;V=pt;try{return X()}finally{V=Tt}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(X,pt){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Tt=V;V=X;try{return pt()}finally{V=Tt}},n.unstable_scheduleCallback=function(X,pt,Tt){var qt=n.unstable_now();switch(typeof Tt=="object"&&Tt!==null?(Tt=Tt.delay,Tt=typeof Tt=="number"&&0<Tt?qt+Tt:qt):Tt=qt,X){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=Tt+C,X={id:E++,callback:pt,priorityLevel:X,startTime:Tt,expirationTime:C,sortIndex:-1},Tt>qt?(X.sortIndex=Tt,t(y,X),e(g)===null&&X===e(y)&&(G?(F(R),R=-1):G=!0,zt(W,Tt-qt))):(X.sortIndex=C,t(g,X),B||M||(B=!0,ct||(ct=!0,N()))),X},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(X){var pt=V;return function(){var Tt=V;V=pt;try{return X.apply(this,arguments)}finally{V=Tt}}}})(Sg)),Sg}var g0;function vP(){return g0||(g0=1,wg.exports=_P()),wg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0;function EP(){if(y0)return Ic;y0=1;var n=vP(),t=E_(),e=yP();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function u(i){var s=i,l=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(l=s.return),i=s.return;while(i)}return s.tag===3?l:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function m(i){if(u(i)!==i)throw Error(r(188))}function g(i){var s=i.alternate;if(!s){if(s=u(i),s===null)throw Error(r(188));return s!==i?null:i}for(var l=i,h=s;;){var d=l.return;if(d===null)break;var _=d.alternate;if(_===null){if(h=d.return,h!==null){l=h;continue}break}if(d.child===_.child){for(_=d.child;_;){if(_===l)return m(d),i;if(_===h)return m(d),s;_=_.sibling}throw Error(r(188))}if(l.return!==h.return)l=d,h=_;else{for(var S=!1,P=d.child;P;){if(P===l){S=!0,l=d,h=_;break}if(P===h){S=!0,h=d,l=_;break}P=P.sibling}if(!S){for(P=_.child;P;){if(P===l){S=!0,l=_,h=d;break}if(P===h){S=!0,h=_,l=d;break}P=P.sibling}if(!S)throw Error(r(189))}}if(l.alternate!==h)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:s}function y(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=y(i),s!==null)return s;i=i.sibling}return null}var E=Object.assign,I=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),rt=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),it=Symbol.for("react.context"),tt=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),ct=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),b=Symbol.iterator;function N(i){return i===null||typeof i!="object"?null:(i=b&&i[b]||i["@@iterator"],typeof i=="function"?i:null)}var w=Symbol.for("react.client.reference");function Ot(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===w?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case B:return"Fragment";case U:return"Profiler";case G:return"StrictMode";case W:return"Suspense";case ct:return"SuspenseList";case A:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case M:return"Portal";case it:return(i.displayName||"Context")+".Provider";case F:return(i._context.displayName||"Context")+".Consumer";case tt:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return s=i.displayName||null,s!==null?s:Ot(i.type)||"Memo";case T:s=i._payload,i=i._init;try{return Ot(i(s))}catch{}}return null}var zt=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Tt={pending:!1,data:null,method:null,action:null},qt=[],C=-1;function $(i){return{current:i}}function et(i){0>C||(i.current=qt[C],qt[C]=null,C--)}function J(i,s){C++,qt[C]=i.current,i.current=s}var ut=$(null),At=$(null),dt=$(null),fe=$(null);function Rt(i,s){switch(J(dt,s),J(At,i),J(ut,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?N1(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=N1(s),i=O1(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}et(ut),J(ut,i)}function Vn(){et(ut),et(At),et(dt)}function za(i){i.memoizedState!==null&&J(fe,i);var s=ut.current,l=O1(s,i.type);s!==l&&(J(At,i),J(ut,l))}function Us(i){At.current===i&&(et(ut),et(At)),fe.current===i&&(et(fe),_c._currentValue=Tt)}var Ki=Object.prototype.hasOwnProperty,Kr=n.unstable_scheduleCallback,Yi=n.unstable_cancelCallback,bu=n.unstable_shouldYield,Xi=n.unstable_requestPaint,un=n.unstable_now,qa=n.unstable_getCurrentPriorityLevel,Xt=n.unstable_ImmediatePriority,te=n.unstable_UserBlockingPriority,Zn=n.unstable_NormalPriority,Cu=n.unstable_LowPriority,$s=n.unstable_IdlePriority,Du=n.log,pr=n.unstable_setDisableYieldValue,Yr=null,sn=null;function Pn(i){if(typeof Du=="function"&&pr(i),sn&&typeof sn.setStrictMode=="function")try{sn.setStrictMode(Yr,i)}catch{}}var Tn=Math.clz32?Math.clz32:Ga,Vu=Math.log,Ha=Math.LN2;function Ga(i){return i>>>=0,i===0?32:31-(Vu(i)/Ha|0)|0}var Nn=256,Vr=4194304;function Qn(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function qe(i,s,l){var h=i.pendingLanes;if(h===0)return 0;var d=0,_=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var P=h&134217727;return P!==0?(h=P&~_,h!==0?d=Qn(h):(S&=P,S!==0?d=Qn(S):l||(l=P&~i,l!==0&&(d=Qn(l))))):(P=h&~_,P!==0?d=Qn(P):S!==0?d=Qn(S):l||(l=h&~i,l!==0&&(d=Qn(l)))),d===0?0:s!==0&&s!==d&&(s&_)===0&&(_=d&-d,l=s&-s,_>=l||_===32&&(l&4194048)!==0)?s:d}function Xr(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Wr(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bs(){var i=Nn;return Nn<<=1,(Nn&4194048)===0&&(Nn=256),i}function tr(){var i=Vr;return Vr<<=1,(Vr&62914560)===0&&(Vr=4194304),i}function Wi(i){for(var s=[],l=0;31>l;l++)s.push(i);return s}function Qt(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Qa(i,s,l,h,d,_){var S=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var P=i.entanglements,k=i.expirationTimes,H=i.hiddenUpdates;for(l=S&~l;0<l;){var Z=31-Tn(l),at=1<<Z;P[Z]=0,k[Z]=-1;var Q=H[Z];if(Q!==null)for(H[Z]=null,Z=0;Z<Q.length;Z++){var K=Q[Z];K!==null&&(K.lane&=-536870913)}l&=~at}h!==0&&er(i,h,0),_!==0&&d===0&&i.tag!==0&&(i.suspendedLanes|=_&~(S&~s))}function er(i,s,l){i.pendingLanes|=s,i.suspendedLanes&=~s;var h=31-Tn(s);i.entangledLanes|=s,i.entanglements[h]=i.entanglements[h]|1073741824|l&4194090}function nr(i,s){var l=i.entangledLanes|=s;for(i=i.entanglements;l;){var h=31-Tn(l),d=1<<h;d&s|i[h]&s&&(i[h]|=s),l&=~d}}function Ka(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ya(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function On(){var i=pt.p;return i!==0?i:(i=window.event,i===void 0?32:J1(i.type))}function Pu(i,s){var l=pt.p;try{return pt.p=i,s()}finally{pt.p=l}}var Pr=Math.random().toString(36).slice(2),Te="__reactFiber$"+Pr,He="__reactProps$"+Pr,Nr="__reactContainer$"+Pr,Jr="__reactEvents$"+Pr,gr="__reactListeners$"+Pr,Nu="__reactHandles$"+Pr,Ge="__reactResources$"+Pr,Zr="__reactMarker$"+Pr;function Ji(i){delete i[Te],delete i[He],delete i[Jr],delete i[gr],delete i[Nu]}function rr(i){var s=i[Te];if(s)return s;for(var l=i.parentNode;l;){if(s=l[Nr]||l[Te]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(i=L1(i);i!==null;){if(l=i[Te])return l;i=L1(i)}return s}i=l,l=i.parentNode}return null}function ir(i){if(i=i[Te]||i[Nr]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function ti(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function gi(i){var s=i[Ge];return s||(s=i[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Se(i){i[Zr]=!0}var Qo=new Set,Or={};function yr(i,s){sr(i,s),sr(i+"Capture",s)}function sr(i,s){for(Or[i]=s,i=0;i<s.length;i++)Qo.add(s[i])}var _r=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cn={},yi={};function Ou(i){return Ki.call(yi,i)?!0:Ki.call(cn,i)?!1:_r.test(i)?yi[i]=!0:(cn[i]=!0,!1)}function _i(i,s,l){if(Ou(s))if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+l)}}function vi(i,s,l){if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+l)}}function Kn(i,s,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(s,l,""+h)}}var ei,Ei;function xr(i){if(ei===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);ei=s&&s[1]||"",Ei=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ei+i+Ei}var Zi=!1;function ts(i,s){if(!i||Zi)return"";Zi=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var at=function(){throw Error()};if(Object.defineProperty(at.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(at,[])}catch(K){var Q=K}Reflect.construct(i,[],at)}else{try{at.call()}catch(K){Q=K}i.call(at.prototype)}}else{try{throw Error()}catch(K){Q=K}(at=i())&&typeof at.catch=="function"&&at.catch(function(){})}}catch(K){if(K&&Q&&typeof K.stack=="string")return[K.stack,Q.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=h.DetermineComponentFrameRoot(),S=_[0],P=_[1];if(S&&P){var k=S.split(`
`),H=P.split(`
`);for(d=h=0;h<k.length&&!k[h].includes("DetermineComponentFrameRoot");)h++;for(;d<H.length&&!H[d].includes("DetermineComponentFrameRoot");)d++;if(h===k.length||d===H.length)for(h=k.length-1,d=H.length-1;1<=h&&0<=d&&k[h]!==H[d];)d--;for(;1<=h&&0<=d;h--,d--)if(k[h]!==H[d]){if(h!==1||d!==1)do if(h--,d--,0>d||k[h]!==H[d]){var Z=`
`+k[h].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=h&&0<=d);break}}}finally{Zi=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?xr(l):""}function xu(i){switch(i.tag){case 26:case 27:case 5:return xr(i.type);case 16:return xr("Lazy");case 13:return xr("Suspense");case 19:return xr("SuspenseList");case 0:case 15:return ts(i.type,!1);case 11:return ts(i.type.render,!1);case 1:return ts(i.type,!0);case 31:return xr("Activity");default:return""}}function Qe(i){try{var s="";do s+=xu(i),i=i.return;while(i);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function ee(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ar(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function vr(i){var s=ar(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),h=""+i[s];if(!i.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,_=l.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return d.call(this)},set:function(S){h=""+S,_.call(this,S)}}),Object.defineProperty(i,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Mr(i){i._valueTracker||(i._valueTracker=vr(i))}function It(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return i&&(h=ar(i)?i.checked?"true":"false":i.value),i=h,i!==l?(s.setValue(i),!0):!1}function or(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Er=/[\n"\\]/g;function Ie(i){return i.replace(Er,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Xa(i,s,l,h,d,_,S,P){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),s!=null?S==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+ee(s)):i.value!==""+ee(s)&&(i.value=""+ee(s)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),s!=null?Wa(i,S,ee(s)):l!=null?Wa(i,S,ee(l)):h!=null&&i.removeAttribute("value"),d==null&&_!=null&&(i.defaultChecked=!!_),d!=null&&(i.checked=d&&typeof d!="function"&&typeof d!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?i.name=""+ee(P):i.removeAttribute("name")}function Fs(i,s,l,h,d,_,S,P){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),s!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||s!=null))return;l=l!=null?""+ee(l):"",s=s!=null?""+ee(s):l,P||s===i.value||(i.value=s),i.defaultValue=s}h=h??d,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=P?i.checked:!!h,i.defaultChecked=!!h,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S)}function Wa(i,s,l){s==="number"&&or(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Ti(i,s,l,h){if(i=i.options,s){s={};for(var d=0;d<l.length;d++)s["$"+l[d]]=!0;for(l=0;l<i.length;l++)d=s.hasOwnProperty("$"+i[l].value),i[l].selected!==d&&(i[l].selected=d),d&&h&&(i[l].defaultSelected=!0)}else{for(l=""+ee(l),s=null,d=0;d<i.length;d++){if(i[d].value===l){i[d].selected=!0,h&&(i[d].defaultSelected=!0);return}s!==null||i[d].disabled||(s=i[d])}s!==null&&(s.selected=!0)}}function Ko(i,s,l){if(s!=null&&(s=""+ee(s),s!==i.value&&(i.value=s),l==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=l!=null?""+ee(l):""}function Yo(i,s,l,h){if(s==null){if(h!=null){if(l!=null)throw Error(r(92));if(zt(h)){if(1<h.length)throw Error(r(93));h=h[0]}l=h}l==null&&(l=""),s=l}l=ee(s),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h)}function hn(i,s){if(s){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=s;return}}i.textContent=s}var An=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function js(i,s,l){var h=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":h?i.setProperty(s,l):typeof l!="number"||l===0||An.has(s)?s==="float"?i.cssFloat=l:i[s]=(""+l).trim():i[s]=l+"px"}function zs(i,s,l){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var d in s)h=s[d],s.hasOwnProperty(d)&&l[d]!==h&&js(i,d,h)}else for(var _ in s)s.hasOwnProperty(_)&&js(i,_,s[_])}function es(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ja=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Za=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fn(i){return Za.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var to=null;function eo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ai=null,Re=null;function Xo(i){var s=ir(i);if(s&&(i=s.stateNode)){var l=i[He]||null;t:switch(i=s.stateNode,s.type){case"input":if(Xa(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ie(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==i&&h.form===i.form){var d=h[He]||null;if(!d)throw Error(r(90));Xa(h,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<l.length;s++)h=l[s],h.form===i.form&&It(h)}break t;case"textarea":Ko(i,l.value,l.defaultValue);break t;case"select":s=l.value,s!=null&&Ti(i,!!l.multiple,s,!1)}}}var ni=!1;function kr(i,s,l){if(ni)return i(s,l);ni=!0;try{var h=i(s);return h}finally{if(ni=!1,(Ai!==null||Re!==null)&&(cf(),Ai&&(s=Ai,i=Re,Re=Ai=null,Xo(s),i)))for(s=0;s<i.length;s++)Xo(i[s])}}function ri(i,s){var l=i.stateNode;if(l===null)return null;var h=l[He]||null;if(h===null)return null;l=h[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break t;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,s,typeof l));return l}var Ue=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yn=!1;if(Ue)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{Yn=!1}var xn=null,Vt=null,qs=null;function Wo(){if(qs)return qs;var i,s=Vt,l=s.length,h,d="value"in xn?xn.value:xn.textContent,_=d.length;for(i=0;i<l&&s[i]===d[i];i++);var S=l-i;for(h=1;h<=S&&s[l-h]===d[_-h];h++);return qs=d.slice(i,1<h?1-h:void 0)}function wi(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Si(){return!0}function Hs(){return!1}function be(i){function s(l,h,d,_,S){this._reactName=l,this._targetInst=d,this.type=h,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(l=i[P],this[P]=l?l(_):_[P]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Si:Hs,this.isPropagationStopped=Hs,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Si)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Si)},persist:function(){},isPersistent:Si}),s}var we={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ii=be(we),ns=E({},we,{view:0,detail:0}),Tr=be(ns),rs,si,Xn,Ri=E({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:os,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Xn&&(Xn&&i.type==="mousemove"?(rs=i.screenX-Xn.screenX,si=i.screenY-Xn.screenY):si=rs=0,Xn=i),rs)},movementY:function(i){return"movementY"in i?i.movementY:si}}),Lr=be(Ri),Mu=E({},Ri,{dataTransfer:0}),no=be(Mu),Ar=E({},ns,{relatedTarget:0}),is=be(Ar),ro=E({},we,{animationName:0,elapsedTime:0,pseudoElement:0}),ss=be(ro),as=E({},we,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),io=be(as),ai=E({},we,{data:0}),Gs=be(ai),so={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ao={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oo(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=ao[i])?!!s[i]:!1}function os(){return oo}var lo=E({},ns,{key:function(i){if(i.key){var s=so[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=wi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?wn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:os,charCode:function(i){return i.type==="keypress"?wi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?wi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),oi=be(lo),de=E({},Ri,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qs=be(de),uo=E({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:os}),Wn=be(uo),o=E({},we,{propertyName:0,elapsedTime:0,pseudoElement:0}),f=be(o),p=E({},Ri,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),v=be(p),O=E({},we,{newState:0,oldState:0}),x=be(O),z=[9,13,27,32],mt=Ue&&"CompositionEvent"in window,Mt=null;Ue&&"documentMode"in document&&(Mt=document.documentMode);var wt=Ue&&"TextEvent"in window&&!Mt,Ft=Ue&&(!mt||Mt&&8<Mt&&11>=Mt),Ce=" ",dn=!1;function Ke(i,s){switch(i){case"keyup":return z.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ye(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Mn=!1;function ls(i,s){switch(i){case"compositionend":return Ye(s);case"keypress":return s.which!==32?null:(dn=!0,Ce);case"textInput":return i=s.data,i===Ce&&dn?null:i;default:return null}}function _2(i,s){if(Mn)return i==="compositionend"||!mt&&Ke(i,s)?(i=Wo(),qs=Vt=xn=null,Mn=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ft&&s.locale!=="ko"?null:s.data;default:return null}}var v2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gv(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!v2[i.type]:s==="textarea"}function Qv(i,s,l,h){Ai?Re?Re.push(h):Re=[h]:Ai=h,s=gf(s,"onChange"),0<s.length&&(l=new Ii("onChange","change",null,l,h),i.push({event:l,listeners:s}))}var ku=null,Lu=null;function E2(i){b1(i,0)}function Vh(i){var s=ti(i);if(It(s))return i}function Kv(i,s){if(i==="change")return s}var Yv=!1;if(Ue){var bm;if(Ue){var Cm="oninput"in document;if(!Cm){var Xv=document.createElement("div");Xv.setAttribute("oninput","return;"),Cm=typeof Xv.oninput=="function"}bm=Cm}else bm=!1;Yv=bm&&(!document.documentMode||9<document.documentMode)}function Wv(){ku&&(ku.detachEvent("onpropertychange",Jv),Lu=ku=null)}function Jv(i){if(i.propertyName==="value"&&Vh(Lu)){var s=[];Qv(s,Lu,i,eo(i)),kr(E2,s)}}function T2(i,s,l){i==="focusin"?(Wv(),ku=s,Lu=l,ku.attachEvent("onpropertychange",Jv)):i==="focusout"&&Wv()}function A2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Vh(Lu)}function w2(i,s){if(i==="click")return Vh(s)}function S2(i,s){if(i==="input"||i==="change")return Vh(s)}function I2(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var wr=typeof Object.is=="function"?Object.is:I2;function Uu(i,s){if(wr(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var l=Object.keys(i),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var d=l[h];if(!Ki.call(s,d)||!wr(i[d],s[d]))return!1}return!0}function Zv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function tE(i,s){var l=Zv(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=s&&h>=s)return{node:l,offset:s-i};i=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=Zv(l)}}function eE(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?eE(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function nE(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=or(i.document);s instanceof i.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)i=s.contentWindow;else break;s=or(i.document)}return s}function Dm(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var R2=Ue&&"documentMode"in document&&11>=document.documentMode,Jo=null,Vm=null,$u=null,Pm=!1;function rE(i,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Pm||Jo==null||Jo!==or(h)||(h=Jo,"selectionStart"in h&&Dm(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),$u&&Uu($u,h)||($u=h,h=gf(Vm,"onSelect"),0<h.length&&(s=new Ii("onSelect","select",null,s,l),i.push({event:s,listeners:h}),s.target=Jo)))}function co(i,s){var l={};return l[i.toLowerCase()]=s.toLowerCase(),l["Webkit"+i]="webkit"+s,l["Moz"+i]="moz"+s,l}var Zo={animationend:co("Animation","AnimationEnd"),animationiteration:co("Animation","AnimationIteration"),animationstart:co("Animation","AnimationStart"),transitionrun:co("Transition","TransitionRun"),transitionstart:co("Transition","TransitionStart"),transitioncancel:co("Transition","TransitionCancel"),transitionend:co("Transition","TransitionEnd")},Nm={},iE={};Ue&&(iE=document.createElement("div").style,"AnimationEvent"in window||(delete Zo.animationend.animation,delete Zo.animationiteration.animation,delete Zo.animationstart.animation),"TransitionEvent"in window||delete Zo.transitionend.transition);function ho(i){if(Nm[i])return Nm[i];if(!Zo[i])return i;var s=Zo[i],l;for(l in s)if(s.hasOwnProperty(l)&&l in iE)return Nm[i]=s[l];return i}var sE=ho("animationend"),aE=ho("animationiteration"),oE=ho("animationstart"),b2=ho("transitionrun"),C2=ho("transitionstart"),D2=ho("transitioncancel"),lE=ho("transitionend"),uE=new Map,Om="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Om.push("scrollEnd");function li(i,s){uE.set(i,s),yr(s,[i])}var cE=new WeakMap;function Ur(i,s){if(typeof i=="object"&&i!==null){var l=cE.get(i);return l!==void 0?l:(s={value:i,source:s,stack:Qe(s)},cE.set(i,s),s)}return{value:i,source:s,stack:Qe(s)}}var $r=[],tl=0,xm=0;function Ph(){for(var i=tl,s=xm=tl=0;s<i;){var l=$r[s];$r[s++]=null;var h=$r[s];$r[s++]=null;var d=$r[s];$r[s++]=null;var _=$r[s];if($r[s++]=null,h!==null&&d!==null){var S=h.pending;S===null?d.next=d:(d.next=S.next,S.next=d),h.pending=d}_!==0&&hE(l,d,_)}}function Nh(i,s,l,h){$r[tl++]=i,$r[tl++]=s,$r[tl++]=l,$r[tl++]=h,xm|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Mm(i,s,l,h){return Nh(i,s,l,h),Oh(i)}function el(i,s){return Nh(i,null,null,s),Oh(i)}function hE(i,s,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var d=!1,_=i.return;_!==null;)_.childLanes|=l,h=_.alternate,h!==null&&(h.childLanes|=l),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(d=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,d&&s!==null&&(d=31-Tn(l),i=_.hiddenUpdates,h=i[d],h===null?i[d]=[s]:h.push(s),s.lane=l|536870912),_):null}function Oh(i){if(50<cc)throw cc=0,Fp=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var nl={};function V2(i,s,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(i,s,l,h){return new V2(i,s,l,h)}function km(i){return i=i.prototype,!(!i||!i.isReactComponent)}function us(i,s){var l=i.alternate;return l===null?(l=Sr(i.tag,s,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=s,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,s=i.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function fE(i,s){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,s=l.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function xh(i,s,l,h,d,_){var S=0;if(h=i,typeof i=="function")km(i)&&(S=1);else if(typeof i=="string")S=ND(i,l,ut.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case A:return i=Sr(31,l,s,d),i.elementType=A,i.lanes=_,i;case B:return fo(l.children,d,_,s);case G:S=8,d|=24;break;case U:return i=Sr(12,l,s,d|2),i.elementType=U,i.lanes=_,i;case W:return i=Sr(13,l,s,d),i.elementType=W,i.lanes=_,i;case ct:return i=Sr(19,l,s,d),i.elementType=ct,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case rt:case it:S=10;break t;case F:S=9;break t;case tt:S=11;break t;case R:S=14;break t;case T:S=16,h=null;break t}S=29,l=Error(r(130,i===null?"null":typeof i,"")),h=null}return s=Sr(S,l,s,d),s.elementType=i,s.type=h,s.lanes=_,s}function fo(i,s,l,h){return i=Sr(7,i,h,s),i.lanes=l,i}function Lm(i,s,l){return i=Sr(6,i,null,s),i.lanes=l,i}function Um(i,s,l){return s=Sr(4,i.children!==null?i.children:[],i.key,s),s.lanes=l,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var rl=[],il=0,Mh=null,kh=0,Br=[],Fr=0,mo=null,cs=1,hs="";function po(i,s){rl[il++]=kh,rl[il++]=Mh,Mh=i,kh=s}function dE(i,s,l){Br[Fr++]=cs,Br[Fr++]=hs,Br[Fr++]=mo,mo=i;var h=cs;i=hs;var d=32-Tn(h)-1;h&=~(1<<d),l+=1;var _=32-Tn(s)+d;if(30<_){var S=d-d%5;_=(h&(1<<S)-1).toString(32),h>>=S,d-=S,cs=1<<32-Tn(s)+d|l<<d|h,hs=_+i}else cs=1<<_|l<<d|h,hs=i}function $m(i){i.return!==null&&(po(i,1),dE(i,1,0))}function Bm(i){for(;i===Mh;)Mh=rl[--il],rl[il]=null,kh=rl[--il],rl[il]=null;for(;i===mo;)mo=Br[--Fr],Br[Fr]=null,hs=Br[--Fr],Br[Fr]=null,cs=Br[--Fr],Br[Fr]=null}var Jn=null,ke=null,he=!1,go=null,bi=!1,Fm=Error(r(519));function yo(i){var s=Error(r(418,""));throw ju(Ur(s,i)),Fm}function mE(i){var s=i.stateNode,l=i.type,h=i.memoizedProps;switch(s[Te]=i,s[He]=h,l){case"dialog":Yt("cancel",s),Yt("close",s);break;case"iframe":case"object":case"embed":Yt("load",s);break;case"video":case"audio":for(l=0;l<fc.length;l++)Yt(fc[l],s);break;case"source":Yt("error",s);break;case"img":case"image":case"link":Yt("error",s),Yt("load",s);break;case"details":Yt("toggle",s);break;case"input":Yt("invalid",s),Fs(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Mr(s);break;case"select":Yt("invalid",s);break;case"textarea":Yt("invalid",s),Yo(s,h.value,h.defaultValue,h.children),Mr(s)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||h.suppressHydrationWarning===!0||P1(s.textContent,l)?(h.popover!=null&&(Yt("beforetoggle",s),Yt("toggle",s)),h.onScroll!=null&&Yt("scroll",s),h.onScrollEnd!=null&&Yt("scrollend",s),h.onClick!=null&&(s.onclick=yf),s=!0):s=!1,s||yo(i)}function pE(i){for(Jn=i.return;Jn;)switch(Jn.tag){case 5:case 13:bi=!1;return;case 27:case 3:bi=!0;return;default:Jn=Jn.return}}function Bu(i){if(i!==Jn)return!1;if(!he)return pE(i),he=!0,!1;var s=i.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||rg(i.type,i.memoizedProps)),l=!l),l&&ke&&yo(i),pE(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(s===0){ke=ci(i.nextSibling);break t}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;i=i.nextSibling}ke=null}}else s===27?(s=ke,ua(i.type)?(i=og,og=null,ke=i):ke=s):ke=Jn?ci(i.stateNode.nextSibling):null;return!0}function Fu(){ke=Jn=null,he=!1}function gE(){var i=go;return i!==null&&(cr===null?cr=i:cr.push.apply(cr,i),go=null),i}function ju(i){go===null?go=[i]:go.push(i)}var jm=$(null),_o=null,fs=null;function Ks(i,s,l){J(jm,s._currentValue),s._currentValue=l}function ds(i){i._currentValue=jm.current,et(jm)}function zm(i,s,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),i===l)break;i=i.return}}function qm(i,s,l,h){var d=i.child;for(d!==null&&(d.return=i);d!==null;){var _=d.dependencies;if(_!==null){var S=d.child;_=_.firstContext;t:for(;_!==null;){var P=_;_=d;for(var k=0;k<s.length;k++)if(P.context===s[k]){_.lanes|=l,P=_.alternate,P!==null&&(P.lanes|=l),zm(_.return,l,i),h||(S=null);break t}_=P.next}}else if(d.tag===18){if(S=d.return,S===null)throw Error(r(341));S.lanes|=l,_=S.alternate,_!==null&&(_.lanes|=l),zm(S,l,i),S=null}else S=d.child;if(S!==null)S.return=d;else for(S=d;S!==null;){if(S===i){S=null;break}if(d=S.sibling,d!==null){d.return=S.return,S=d;break}S=S.return}d=S}}function zu(i,s,l,h){i=null;for(var d=s,_=!1;d!==null;){if(!_){if((d.flags&524288)!==0)_=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var S=d.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var P=d.type;wr(d.pendingProps.value,S.value)||(i!==null?i.push(P):i=[P])}}else if(d===fe.current){if(S=d.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(i!==null?i.push(_c):i=[_c])}d=d.return}i!==null&&qm(s,i,l,h),s.flags|=262144}function Lh(i){for(i=i.firstContext;i!==null;){if(!wr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function vo(i){_o=i,fs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function kn(i){return yE(_o,i)}function Uh(i,s){return _o===null&&vo(i),yE(i,s)}function yE(i,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},fs===null){if(i===null)throw Error(r(308));fs=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else fs=fs.next=s;return l}var P2=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){s.aborted=!0,i.forEach(function(l){return l()})}},N2=n.unstable_scheduleCallback,O2=n.unstable_NormalPriority,an={$$typeof:it,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hm(){return{controller:new P2,data:new Map,refCount:0}}function qu(i){i.refCount--,i.refCount===0&&N2(O2,function(){i.controller.abort()})}var Hu=null,Gm=0,sl=0,al=null;function x2(i,s){if(Hu===null){var l=Hu=[];Gm=0,sl=Kp(),al={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Gm++,s.then(_E,_E),s}function _E(){if(--Gm===0&&Hu!==null){al!==null&&(al.status="fulfilled");var i=Hu;Hu=null,sl=0,al=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function M2(i,s){var l=[],h={status:"pending",value:null,reason:null,then:function(d){l.push(d)}};return i.then(function(){h.status="fulfilled",h.value=s;for(var d=0;d<l.length;d++)(0,l[d])(s)},function(d){for(h.status="rejected",h.reason=d,d=0;d<l.length;d++)(0,l[d])(void 0)}),h}var vE=X.S;X.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&x2(i,s),vE!==null&&vE(i,s)};var Eo=$(null);function Qm(){var i=Eo.current;return i!==null?i:Ae.pooledCache}function $h(i,s){s===null?J(Eo,Eo.current):J(Eo,s.pool)}function EE(){var i=Qm();return i===null?null:{parent:an._currentValue,pool:i}}var Gu=Error(r(460)),TE=Error(r(474)),Bh=Error(r(542)),Km={then:function(){}};function AE(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Fh(){}function wE(i,s,l){switch(l=i[l],l===void 0?i.push(s):l!==s&&(s.then(Fh,Fh),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,IE(i),i;default:if(typeof s.status=="string")s.then(Fh,Fh);else{if(i=Ae,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(h){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=h}},function(h){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,IE(i),i}throw Qu=s,Gu}}var Qu=null;function SE(){if(Qu===null)throw Error(r(459));var i=Qu;return Qu=null,i}function IE(i){if(i===Gu||i===Bh)throw Error(r(483))}var Ys=!1;function Ym(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xm(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Xs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ws(i,s,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(me&2)!==0){var d=h.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),h.pending=s,s=Oh(i),hE(i,null,l),s}return Nh(i,h,s,l),Oh(i)}function Ku(i,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var h=s.lanes;h&=i.pendingLanes,l|=h,s.lanes=l,nr(i,l)}}function Wm(i,s){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var d=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?d=_=S:_=_.next=S,l=l.next}while(l!==null);_===null?d=_=s:_=_.next=s}else d=_=s;l={baseState:h.baseState,firstBaseUpdate:d,lastBaseUpdate:_,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=s:i.next=s,l.lastBaseUpdate=s}var Jm=!1;function Yu(){if(Jm){var i=al;if(i!==null)throw i}}function Xu(i,s,l,h){Jm=!1;var d=i.updateQueue;Ys=!1;var _=d.firstBaseUpdate,S=d.lastBaseUpdate,P=d.shared.pending;if(P!==null){d.shared.pending=null;var k=P,H=k.next;k.next=null,S===null?_=H:S.next=H,S=k;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,P=Z.lastBaseUpdate,P!==S&&(P===null?Z.firstBaseUpdate=H:P.next=H,Z.lastBaseUpdate=k))}if(_!==null){var at=d.baseState;S=0,Z=H=k=null,P=_;do{var Q=P.lane&-536870913,K=Q!==P.lane;if(K?(ne&Q)===Q:(h&Q)===Q){Q!==0&&Q===sl&&(Jm=!0),Z!==null&&(Z=Z.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});t:{var Pt=i,bt=P;Q=s;var ve=l;switch(bt.tag){case 1:if(Pt=bt.payload,typeof Pt=="function"){at=Pt.call(ve,at,Q);break t}at=Pt;break t;case 3:Pt.flags=Pt.flags&-65537|128;case 0:if(Pt=bt.payload,Q=typeof Pt=="function"?Pt.call(ve,at,Q):Pt,Q==null)break t;at=E({},at,Q);break t;case 2:Ys=!0}}Q=P.callback,Q!==null&&(i.flags|=64,K&&(i.flags|=8192),K=d.callbacks,K===null?d.callbacks=[Q]:K.push(Q))}else K={lane:Q,tag:P.tag,payload:P.payload,callback:P.callback,next:null},Z===null?(H=Z=K,k=at):Z=Z.next=K,S|=Q;if(P=P.next,P===null){if(P=d.shared.pending,P===null)break;K=P,P=K.next,K.next=null,d.lastBaseUpdate=K,d.shared.pending=null}}while(!0);Z===null&&(k=at),d.baseState=k,d.firstBaseUpdate=H,d.lastBaseUpdate=Z,_===null&&(d.shared.lanes=0),sa|=S,i.lanes=S,i.memoizedState=at}}function RE(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function bE(i,s){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)RE(l[i],s)}var ol=$(null),jh=$(0);function CE(i,s){i=Es,J(jh,i),J(ol,s),Es=i|s.baseLanes}function Zm(){J(jh,Es),J(ol,ol.current)}function tp(){Es=jh.current,et(ol),et(jh)}var Js=0,Ht=null,ye=null,Xe=null,zh=!1,ll=!1,To=!1,qh=0,Wu=0,ul=null,k2=0;function $e(){throw Error(r(321))}function ep(i,s){if(s===null)return!1;for(var l=0;l<s.length&&l<i.length;l++)if(!wr(i[l],s[l]))return!1;return!0}function np(i,s,l,h,d,_){return Js=_,Ht=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=i===null||i.memoizedState===null?hT:fT,To=!1,_=l(h,d),To=!1,ll&&(_=VE(s,l,h,d)),DE(i),_}function DE(i){X.H=Xh;var s=ye!==null&&ye.next!==null;if(Js=0,Xe=ye=Ht=null,zh=!1,Wu=0,ul=null,s)throw Error(r(300));i===null||mn||(i=i.dependencies,i!==null&&Lh(i)&&(mn=!0))}function VE(i,s,l,h){Ht=i;var d=0;do{if(ll&&(ul=null),Wu=0,ll=!1,25<=d)throw Error(r(301));if(d+=1,Xe=ye=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}X.H=z2,_=s(l,h)}while(ll);return _}function L2(){var i=X.H,s=i.useState()[0];return s=typeof s.then=="function"?Ju(s):s,i=i.useState()[0],(ye!==null?ye.memoizedState:null)!==i&&(Ht.flags|=1024),s}function rp(){var i=qh!==0;return qh=0,i}function ip(i,s,l){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~l}function sp(i){if(zh){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}zh=!1}Js=0,Xe=ye=Ht=null,ll=!1,Wu=qh=0,ul=null}function lr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Ht.memoizedState=Xe=i:Xe=Xe.next=i,Xe}function We(){if(ye===null){var i=Ht.alternate;i=i!==null?i.memoizedState:null}else i=ye.next;var s=Xe===null?Ht.memoizedState:Xe.next;if(s!==null)Xe=s,ye=i;else{if(i===null)throw Ht.alternate===null?Error(r(467)):Error(r(310));ye=i,i={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},Xe===null?Ht.memoizedState=Xe=i:Xe=Xe.next=i}return Xe}function ap(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ju(i){var s=Wu;return Wu+=1,ul===null&&(ul=[]),i=wE(ul,i,s),s=Ht,(Xe===null?s.memoizedState:Xe.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?hT:fT),i}function Hh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ju(i);if(i.$$typeof===it)return kn(i)}throw Error(r(438,String(i)))}function op(i){var s=null,l=Ht.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var h=Ht.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=ap(),Ht.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(i),h=0;h<i;h++)l[h]=D;return s.index++,l}function ms(i,s){return typeof s=="function"?s(i):s}function Gh(i){var s=We();return lp(s,ye,i)}function lp(i,s,l){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var d=i.baseQueue,_=h.pending;if(_!==null){if(d!==null){var S=d.next;d.next=_.next,_.next=S}s.baseQueue=d=_,h.pending=null}if(_=i.baseState,d===null)i.memoizedState=_;else{s=d.next;var P=S=null,k=null,H=s,Z=!1;do{var at=H.lane&-536870913;if(at!==H.lane?(ne&at)===at:(Js&at)===at){var Q=H.revertLane;if(Q===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),at===sl&&(Z=!0);else if((Js&Q)===Q){H=H.next,Q===sl&&(Z=!0);continue}else at={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},k===null?(P=k=at,S=_):k=k.next=at,Ht.lanes|=Q,sa|=Q;at=H.action,To&&l(_,at),_=H.hasEagerState?H.eagerState:l(_,at)}else Q={lane:at,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},k===null?(P=k=Q,S=_):k=k.next=Q,Ht.lanes|=at,sa|=at;H=H.next}while(H!==null&&H!==s);if(k===null?S=_:k.next=P,!wr(_,i.memoizedState)&&(mn=!0,Z&&(l=al,l!==null)))throw l;i.memoizedState=_,i.baseState=S,i.baseQueue=k,h.lastRenderedState=_}return d===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function up(i){var s=We(),l=s.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var h=l.dispatch,d=l.pending,_=s.memoizedState;if(d!==null){l.pending=null;var S=d=d.next;do _=i(_,S.action),S=S.next;while(S!==d);wr(_,s.memoizedState)||(mn=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),l.lastRenderedState=_}return[_,h]}function PE(i,s,l){var h=Ht,d=We(),_=he;if(_){if(l===void 0)throw Error(r(407));l=l()}else l=s();var S=!wr((ye||d).memoizedState,l);S&&(d.memoizedState=l,mn=!0),d=d.queue;var P=xE.bind(null,h,d,i);if(Zu(2048,8,P,[i]),d.getSnapshot!==s||S||Xe!==null&&Xe.memoizedState.tag&1){if(h.flags|=2048,cl(9,Qh(),OE.bind(null,h,d,l,s),null),Ae===null)throw Error(r(349));_||(Js&124)!==0||NE(h,s,l)}return l}function NE(i,s,l){i.flags|=16384,i={getSnapshot:s,value:l},s=Ht.updateQueue,s===null?(s=ap(),Ht.updateQueue=s,s.stores=[i]):(l=s.stores,l===null?s.stores=[i]:l.push(i))}function OE(i,s,l,h){s.value=l,s.getSnapshot=h,ME(s)&&kE(i)}function xE(i,s,l){return l(function(){ME(s)&&kE(i)})}function ME(i){var s=i.getSnapshot;i=i.value;try{var l=s();return!wr(i,l)}catch{return!0}}function kE(i){var s=el(i,2);s!==null&&Dr(s,i,2)}function cp(i){var s=lr();if(typeof i=="function"){var l=i;if(i=l(),To){Pn(!0);try{l()}finally{Pn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:i},s}function LE(i,s,l,h){return i.baseState=l,lp(i,ye,typeof h=="function"?h:ms)}function U2(i,s,l,h,d){if(Yh(i))throw Error(r(485));if(i=s.action,i!==null){var _={payload:d,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){_.listeners.push(S)}};X.T!==null?l(!0):_.isTransition=!1,h(_),l=s.pending,l===null?(_.next=s.pending=_,UE(s,_)):(_.next=l.next,s.pending=l.next=_)}}function UE(i,s){var l=s.action,h=s.payload,d=i.state;if(s.isTransition){var _=X.T,S={};X.T=S;try{var P=l(d,h),k=X.S;k!==null&&k(S,P),$E(i,s,P)}catch(H){hp(i,s,H)}finally{X.T=_}}else try{_=l(d,h),$E(i,s,_)}catch(H){hp(i,s,H)}}function $E(i,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){BE(i,s,h)},function(h){return hp(i,s,h)}):BE(i,s,l)}function BE(i,s,l){s.status="fulfilled",s.value=l,FE(s),i.state=l,s=i.pending,s!==null&&(l=s.next,l===s?i.pending=null:(l=l.next,s.next=l,UE(i,l)))}function hp(i,s,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=l,FE(s),s=s.next;while(s!==h)}i.action=null}function FE(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function jE(i,s){return s}function zE(i,s){if(he){var l=Ae.formState;if(l!==null){t:{var h=Ht;if(he){if(ke){e:{for(var d=ke,_=bi;d.nodeType!==8;){if(!_){d=null;break e}if(d=ci(d.nextSibling),d===null){d=null;break e}}_=d.data,d=_==="F!"||_==="F"?d:null}if(d){ke=ci(d.nextSibling),h=d.data==="F!";break t}}yo(h)}h=!1}h&&(s=l[0])}}return l=lr(),l.memoizedState=l.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jE,lastRenderedState:s},l.queue=h,l=lT.bind(null,Ht,h),h.dispatch=l,h=cp(!1),_=gp.bind(null,Ht,!1,h.queue),h=lr(),d={state:s,dispatch:null,action:i,pending:null},h.queue=d,l=U2.bind(null,Ht,d,_,l),d.dispatch=l,h.memoizedState=i,[s,l,!1]}function qE(i){var s=We();return HE(s,ye,i)}function HE(i,s,l){if(s=lp(i,s,jE)[0],i=Gh(ms)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=Ju(s)}catch(S){throw S===Gu?Bh:S}else h=s;s=We();var d=s.queue,_=d.dispatch;return l!==s.memoizedState&&(Ht.flags|=2048,cl(9,Qh(),$2.bind(null,d,l),null)),[h,_,i]}function $2(i,s){i.action=s}function GE(i){var s=We(),l=ye;if(l!==null)return HE(s,l,i);We(),s=s.memoizedState,l=We();var h=l.queue.dispatch;return l.memoizedState=i,[s,h,!1]}function cl(i,s,l,h){return i={tag:i,create:l,deps:h,inst:s,next:null},s=Ht.updateQueue,s===null&&(s=ap(),Ht.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,s.lastEffect=i),i}function Qh(){return{destroy:void 0,resource:void 0}}function QE(){return We().memoizedState}function Kh(i,s,l,h){var d=lr();h=h===void 0?null:h,Ht.flags|=i,d.memoizedState=cl(1|s,Qh(),l,h)}function Zu(i,s,l,h){var d=We();h=h===void 0?null:h;var _=d.memoizedState.inst;ye!==null&&h!==null&&ep(h,ye.memoizedState.deps)?d.memoizedState=cl(s,_,l,h):(Ht.flags|=i,d.memoizedState=cl(1|s,_,l,h))}function KE(i,s){Kh(8390656,8,i,s)}function YE(i,s){Zu(2048,8,i,s)}function XE(i,s){return Zu(4,2,i,s)}function WE(i,s){return Zu(4,4,i,s)}function JE(i,s){if(typeof s=="function"){i=i();var l=s(i);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function ZE(i,s,l){l=l!=null?l.concat([i]):null,Zu(4,4,JE.bind(null,s,i),l)}function fp(){}function tT(i,s){var l=We();s=s===void 0?null:s;var h=l.memoizedState;return s!==null&&ep(s,h[1])?h[0]:(l.memoizedState=[i,s],i)}function eT(i,s){var l=We();s=s===void 0?null:s;var h=l.memoizedState;if(s!==null&&ep(s,h[1]))return h[0];if(h=i(),To){Pn(!0);try{i()}finally{Pn(!1)}}return l.memoizedState=[h,s],h}function dp(i,s,l){return l===void 0||(Js&1073741824)!==0?i.memoizedState=s:(i.memoizedState=l,i=i1(),Ht.lanes|=i,sa|=i,l)}function nT(i,s,l,h){return wr(l,s)?l:ol.current!==null?(i=dp(i,l,h),wr(i,s)||(mn=!0),i):(Js&42)===0?(mn=!0,i.memoizedState=l):(i=i1(),Ht.lanes|=i,sa|=i,s)}function rT(i,s,l,h,d){var _=pt.p;pt.p=_!==0&&8>_?_:8;var S=X.T,P={};X.T=P,gp(i,!1,s,l);try{var k=d(),H=X.S;if(H!==null&&H(P,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var Z=M2(k,h);tc(i,s,Z,Cr(i))}else tc(i,s,h,Cr(i))}catch(at){tc(i,s,{then:function(){},status:"rejected",reason:at},Cr())}finally{pt.p=_,X.T=S}}function B2(){}function mp(i,s,l,h){if(i.tag!==5)throw Error(r(476));var d=iT(i).queue;rT(i,d,s,Tt,l===null?B2:function(){return sT(i),l(h)})}function iT(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:Tt,baseState:Tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:Tt},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:l},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function sT(i){var s=iT(i).next.queue;tc(i,s,{},Cr())}function pp(){return kn(_c)}function aT(){return We().memoizedState}function oT(){return We().memoizedState}function F2(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var l=Cr();i=Xs(l);var h=Ws(s,i,l);h!==null&&(Dr(h,s,l),Ku(h,s,l)),s={cache:Hm()},i.payload=s;return}s=s.return}}function j2(i,s,l){var h=Cr();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Yh(i)?uT(s,l):(l=Mm(i,s,l,h),l!==null&&(Dr(l,i,h),cT(l,s,h)))}function lT(i,s,l){var h=Cr();tc(i,s,l,h)}function tc(i,s,l,h){var d={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Yh(i))uT(s,d);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var S=s.lastRenderedState,P=_(S,l);if(d.hasEagerState=!0,d.eagerState=P,wr(P,S))return Nh(i,s,d,0),Ae===null&&Ph(),!1}catch{}finally{}if(l=Mm(i,s,d,h),l!==null)return Dr(l,i,h),cT(l,s,h),!0}return!1}function gp(i,s,l,h){if(h={lane:2,revertLane:Kp(),action:h,hasEagerState:!1,eagerState:null,next:null},Yh(i)){if(s)throw Error(r(479))}else s=Mm(i,l,h,2),s!==null&&Dr(s,i,2)}function Yh(i){var s=i.alternate;return i===Ht||s!==null&&s===Ht}function uT(i,s){ll=zh=!0;var l=i.pending;l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s}function cT(i,s,l){if((l&4194048)!==0){var h=s.lanes;h&=i.pendingLanes,l|=h,s.lanes=l,nr(i,l)}}var Xh={readContext:kn,use:Hh,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useLayoutEffect:$e,useInsertionEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useSyncExternalStore:$e,useId:$e,useHostTransitionStatus:$e,useFormState:$e,useActionState:$e,useOptimistic:$e,useMemoCache:$e,useCacheRefresh:$e},hT={readContext:kn,use:Hh,useCallback:function(i,s){return lr().memoizedState=[i,s===void 0?null:s],i},useContext:kn,useEffect:KE,useImperativeHandle:function(i,s,l){l=l!=null?l.concat([i]):null,Kh(4194308,4,JE.bind(null,s,i),l)},useLayoutEffect:function(i,s){return Kh(4194308,4,i,s)},useInsertionEffect:function(i,s){Kh(4,2,i,s)},useMemo:function(i,s){var l=lr();s=s===void 0?null:s;var h=i();if(To){Pn(!0);try{i()}finally{Pn(!1)}}return l.memoizedState=[h,s],h},useReducer:function(i,s,l){var h=lr();if(l!==void 0){var d=l(s);if(To){Pn(!0);try{l(s)}finally{Pn(!1)}}}else d=s;return h.memoizedState=h.baseState=d,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:d},h.queue=i,i=i.dispatch=j2.bind(null,Ht,i),[h.memoizedState,i]},useRef:function(i){var s=lr();return i={current:i},s.memoizedState=i},useState:function(i){i=cp(i);var s=i.queue,l=lT.bind(null,Ht,s);return s.dispatch=l,[i.memoizedState,l]},useDebugValue:fp,useDeferredValue:function(i,s){var l=lr();return dp(l,i,s)},useTransition:function(){var i=cp(!1);return i=rT.bind(null,Ht,i.queue,!0,!1),lr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,l){var h=Ht,d=lr();if(he){if(l===void 0)throw Error(r(407));l=l()}else{if(l=s(),Ae===null)throw Error(r(349));(ne&124)!==0||NE(h,s,l)}d.memoizedState=l;var _={value:l,getSnapshot:s};return d.queue=_,KE(xE.bind(null,h,_,i),[i]),h.flags|=2048,cl(9,Qh(),OE.bind(null,h,_,l,s),null),l},useId:function(){var i=lr(),s=Ae.identifierPrefix;if(he){var l=hs,h=cs;l=(h&~(1<<32-Tn(h)-1)).toString(32)+l,s="«"+s+"R"+l,l=qh++,0<l&&(s+="H"+l.toString(32)),s+="»"}else l=k2++,s="«"+s+"r"+l.toString(32)+"»";return i.memoizedState=s},useHostTransitionStatus:pp,useFormState:zE,useActionState:zE,useOptimistic:function(i){var s=lr();s.memoizedState=s.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=gp.bind(null,Ht,!0,l),l.dispatch=s,[i,s]},useMemoCache:op,useCacheRefresh:function(){return lr().memoizedState=F2.bind(null,Ht)}},fT={readContext:kn,use:Hh,useCallback:tT,useContext:kn,useEffect:YE,useImperativeHandle:ZE,useInsertionEffect:XE,useLayoutEffect:WE,useMemo:eT,useReducer:Gh,useRef:QE,useState:function(){return Gh(ms)},useDebugValue:fp,useDeferredValue:function(i,s){var l=We();return nT(l,ye.memoizedState,i,s)},useTransition:function(){var i=Gh(ms)[0],s=We().memoizedState;return[typeof i=="boolean"?i:Ju(i),s]},useSyncExternalStore:PE,useId:aT,useHostTransitionStatus:pp,useFormState:qE,useActionState:qE,useOptimistic:function(i,s){var l=We();return LE(l,ye,i,s)},useMemoCache:op,useCacheRefresh:oT},z2={readContext:kn,use:Hh,useCallback:tT,useContext:kn,useEffect:YE,useImperativeHandle:ZE,useInsertionEffect:XE,useLayoutEffect:WE,useMemo:eT,useReducer:up,useRef:QE,useState:function(){return up(ms)},useDebugValue:fp,useDeferredValue:function(i,s){var l=We();return ye===null?dp(l,i,s):nT(l,ye.memoizedState,i,s)},useTransition:function(){var i=up(ms)[0],s=We().memoizedState;return[typeof i=="boolean"?i:Ju(i),s]},useSyncExternalStore:PE,useId:aT,useHostTransitionStatus:pp,useFormState:GE,useActionState:GE,useOptimistic:function(i,s){var l=We();return ye!==null?LE(l,ye,i,s):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:op,useCacheRefresh:oT},hl=null,ec=0;function Wh(i){var s=ec;return ec+=1,hl===null&&(hl=[]),wE(hl,i,s)}function nc(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Jh(i,s){throw s.$$typeof===I?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function dT(i){var s=i._init;return s(i._payload)}function mT(i){function s(j,L){if(i){var q=j.deletions;q===null?(j.deletions=[L],j.flags|=16):q.push(L)}}function l(j,L){if(!i)return null;for(;L!==null;)s(j,L),L=L.sibling;return null}function h(j){for(var L=new Map;j!==null;)j.key!==null?L.set(j.key,j):L.set(j.index,j),j=j.sibling;return L}function d(j,L){return j=us(j,L),j.index=0,j.sibling=null,j}function _(j,L,q){return j.index=q,i?(q=j.alternate,q!==null?(q=q.index,q<L?(j.flags|=67108866,L):q):(j.flags|=67108866,L)):(j.flags|=1048576,L)}function S(j){return i&&j.alternate===null&&(j.flags|=67108866),j}function P(j,L,q,nt){return L===null||L.tag!==6?(L=Lm(q,j.mode,nt),L.return=j,L):(L=d(L,q),L.return=j,L)}function k(j,L,q,nt){var _t=q.type;return _t===B?Z(j,L,q.props.children,nt,q.key):L!==null&&(L.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===T&&dT(_t)===L.type)?(L=d(L,q.props),nc(L,q),L.return=j,L):(L=xh(q.type,q.key,q.props,null,j.mode,nt),nc(L,q),L.return=j,L)}function H(j,L,q,nt){return L===null||L.tag!==4||L.stateNode.containerInfo!==q.containerInfo||L.stateNode.implementation!==q.implementation?(L=Um(q,j.mode,nt),L.return=j,L):(L=d(L,q.children||[]),L.return=j,L)}function Z(j,L,q,nt,_t){return L===null||L.tag!==7?(L=fo(q,j.mode,nt,_t),L.return=j,L):(L=d(L,q),L.return=j,L)}function at(j,L,q){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Lm(""+L,j.mode,q),L.return=j,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case V:return q=xh(L.type,L.key,L.props,null,j.mode,q),nc(q,L),q.return=j,q;case M:return L=Um(L,j.mode,q),L.return=j,L;case T:var nt=L._init;return L=nt(L._payload),at(j,L,q)}if(zt(L)||N(L))return L=fo(L,j.mode,q,null),L.return=j,L;if(typeof L.then=="function")return at(j,Wh(L),q);if(L.$$typeof===it)return at(j,Uh(j,L),q);Jh(j,L)}return null}function Q(j,L,q,nt){var _t=L!==null?L.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return _t!==null?null:P(j,L,""+q,nt);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case V:return q.key===_t?k(j,L,q,nt):null;case M:return q.key===_t?H(j,L,q,nt):null;case T:return _t=q._init,q=_t(q._payload),Q(j,L,q,nt)}if(zt(q)||N(q))return _t!==null?null:Z(j,L,q,nt,null);if(typeof q.then=="function")return Q(j,L,Wh(q),nt);if(q.$$typeof===it)return Q(j,L,Uh(j,q),nt);Jh(j,q)}return null}function K(j,L,q,nt,_t){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return j=j.get(q)||null,P(L,j,""+nt,_t);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case V:return j=j.get(nt.key===null?q:nt.key)||null,k(L,j,nt,_t);case M:return j=j.get(nt.key===null?q:nt.key)||null,H(L,j,nt,_t);case T:var Gt=nt._init;return nt=Gt(nt._payload),K(j,L,q,nt,_t)}if(zt(nt)||N(nt))return j=j.get(q)||null,Z(L,j,nt,_t,null);if(typeof nt.then=="function")return K(j,L,q,Wh(nt),_t);if(nt.$$typeof===it)return K(j,L,q,Uh(L,nt),_t);Jh(L,nt)}return null}function Pt(j,L,q,nt){for(var _t=null,Gt=null,St=L,Dt=L=0,gn=null;St!==null&&Dt<q.length;Dt++){St.index>Dt?(gn=St,St=null):gn=St.sibling;var ce=Q(j,St,q[Dt],nt);if(ce===null){St===null&&(St=gn);break}i&&St&&ce.alternate===null&&s(j,St),L=_(ce,L,Dt),Gt===null?_t=ce:Gt.sibling=ce,Gt=ce,St=gn}if(Dt===q.length)return l(j,St),he&&po(j,Dt),_t;if(St===null){for(;Dt<q.length;Dt++)St=at(j,q[Dt],nt),St!==null&&(L=_(St,L,Dt),Gt===null?_t=St:Gt.sibling=St,Gt=St);return he&&po(j,Dt),_t}for(St=h(St);Dt<q.length;Dt++)gn=K(St,j,Dt,q[Dt],nt),gn!==null&&(i&&gn.alternate!==null&&St.delete(gn.key===null?Dt:gn.key),L=_(gn,L,Dt),Gt===null?_t=gn:Gt.sibling=gn,Gt=gn);return i&&St.forEach(function(ma){return s(j,ma)}),he&&po(j,Dt),_t}function bt(j,L,q,nt){if(q==null)throw Error(r(151));for(var _t=null,Gt=null,St=L,Dt=L=0,gn=null,ce=q.next();St!==null&&!ce.done;Dt++,ce=q.next()){St.index>Dt?(gn=St,St=null):gn=St.sibling;var ma=Q(j,St,ce.value,nt);if(ma===null){St===null&&(St=gn);break}i&&St&&ma.alternate===null&&s(j,St),L=_(ma,L,Dt),Gt===null?_t=ma:Gt.sibling=ma,Gt=ma,St=gn}if(ce.done)return l(j,St),he&&po(j,Dt),_t;if(St===null){for(;!ce.done;Dt++,ce=q.next())ce=at(j,ce.value,nt),ce!==null&&(L=_(ce,L,Dt),Gt===null?_t=ce:Gt.sibling=ce,Gt=ce);return he&&po(j,Dt),_t}for(St=h(St);!ce.done;Dt++,ce=q.next())ce=K(St,j,Dt,ce.value,nt),ce!==null&&(i&&ce.alternate!==null&&St.delete(ce.key===null?Dt:ce.key),L=_(ce,L,Dt),Gt===null?_t=ce:Gt.sibling=ce,Gt=ce);return i&&St.forEach(function(qD){return s(j,qD)}),he&&po(j,Dt),_t}function ve(j,L,q,nt){if(typeof q=="object"&&q!==null&&q.type===B&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case V:t:{for(var _t=q.key;L!==null;){if(L.key===_t){if(_t=q.type,_t===B){if(L.tag===7){l(j,L.sibling),nt=d(L,q.props.children),nt.return=j,j=nt;break t}}else if(L.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===T&&dT(_t)===L.type){l(j,L.sibling),nt=d(L,q.props),nc(nt,q),nt.return=j,j=nt;break t}l(j,L);break}else s(j,L);L=L.sibling}q.type===B?(nt=fo(q.props.children,j.mode,nt,q.key),nt.return=j,j=nt):(nt=xh(q.type,q.key,q.props,null,j.mode,nt),nc(nt,q),nt.return=j,j=nt)}return S(j);case M:t:{for(_t=q.key;L!==null;){if(L.key===_t)if(L.tag===4&&L.stateNode.containerInfo===q.containerInfo&&L.stateNode.implementation===q.implementation){l(j,L.sibling),nt=d(L,q.children||[]),nt.return=j,j=nt;break t}else{l(j,L);break}else s(j,L);L=L.sibling}nt=Um(q,j.mode,nt),nt.return=j,j=nt}return S(j);case T:return _t=q._init,q=_t(q._payload),ve(j,L,q,nt)}if(zt(q))return Pt(j,L,q,nt);if(N(q)){if(_t=N(q),typeof _t!="function")throw Error(r(150));return q=_t.call(q),bt(j,L,q,nt)}if(typeof q.then=="function")return ve(j,L,Wh(q),nt);if(q.$$typeof===it)return ve(j,L,Uh(j,q),nt);Jh(j,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,L!==null&&L.tag===6?(l(j,L.sibling),nt=d(L,q),nt.return=j,j=nt):(l(j,L),nt=Lm(q,j.mode,nt),nt.return=j,j=nt),S(j)):l(j,L)}return function(j,L,q,nt){try{ec=0;var _t=ve(j,L,q,nt);return hl=null,_t}catch(St){if(St===Gu||St===Bh)throw St;var Gt=Sr(29,St,null,j.mode);return Gt.lanes=nt,Gt.return=j,Gt}finally{}}}var fl=mT(!0),pT=mT(!1),jr=$(null),Ci=null;function Zs(i){var s=i.alternate;J(on,on.current&1),J(jr,i),Ci===null&&(s===null||ol.current!==null||s.memoizedState!==null)&&(Ci=i)}function gT(i){if(i.tag===22){if(J(on,on.current),J(jr,i),Ci===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(Ci=i)}}else ta()}function ta(){J(on,on.current),J(jr,jr.current)}function ps(i){et(jr),Ci===i&&(Ci=null),et(on)}var on=$(0);function Zh(i){for(var s=i;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||ag(l)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function yp(i,s,l,h){s=i.memoizedState,l=l(h,s),l=l==null?s:E({},s,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var _p={enqueueSetState:function(i,s,l){i=i._reactInternals;var h=Cr(),d=Xs(h);d.payload=s,l!=null&&(d.callback=l),s=Ws(i,d,h),s!==null&&(Dr(s,i,h),Ku(s,i,h))},enqueueReplaceState:function(i,s,l){i=i._reactInternals;var h=Cr(),d=Xs(h);d.tag=1,d.payload=s,l!=null&&(d.callback=l),s=Ws(i,d,h),s!==null&&(Dr(s,i,h),Ku(s,i,h))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var l=Cr(),h=Xs(l);h.tag=2,s!=null&&(h.callback=s),s=Ws(i,h,l),s!==null&&(Dr(s,i,l),Ku(s,i,l))}};function yT(i,s,l,h,d,_,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,_,S):s.prototype&&s.prototype.isPureReactComponent?!Uu(l,h)||!Uu(d,_):!0}function _T(i,s,l,h){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==i&&_p.enqueueReplaceState(s,s.state,null)}function Ao(i,s){var l=s;if("ref"in s){l={};for(var h in s)h!=="ref"&&(l[h]=s[h])}if(i=i.defaultProps){l===s&&(l=E({},l));for(var d in i)l[d]===void 0&&(l[d]=i[d])}return l}var tf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function vT(i){tf(i)}function ET(i){console.error(i)}function TT(i){tf(i)}function ef(i,s){try{var l=i.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function AT(i,s,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function vp(i,s,l){return l=Xs(l),l.tag=3,l.payload={element:null},l.callback=function(){ef(i,s)},l}function wT(i){return i=Xs(i),i.tag=3,i}function ST(i,s,l,h){var d=l.type.getDerivedStateFromError;if(typeof d=="function"){var _=h.value;i.payload=function(){return d(_)},i.callback=function(){AT(s,l,h)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){AT(s,l,h),typeof d!="function"&&(aa===null?aa=new Set([this]):aa.add(this));var P=h.stack;this.componentDidCatch(h.value,{componentStack:P!==null?P:""})})}function q2(i,s,l,h,d){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=l.alternate,s!==null&&zu(s,l,d,!0),l=jr.current,l!==null){switch(l.tag){case 13:return Ci===null?zp():l.alternate===null&&Le===0&&(Le=3),l.flags&=-257,l.flags|=65536,l.lanes=d,h===Km?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([h]):s.add(h),Hp(i,h,d)),!1;case 22:return l.flags|=65536,h===Km?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([h]):l.add(h)),Hp(i,h,d)),!1}throw Error(r(435,l.tag))}return Hp(i,h,d),zp(),!1}if(he)return s=jr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,h!==Fm&&(i=Error(r(422),{cause:h}),ju(Ur(i,l)))):(h!==Fm&&(s=Error(r(423),{cause:h}),ju(Ur(s,l))),i=i.current.alternate,i.flags|=65536,d&=-d,i.lanes|=d,h=Ur(h,l),d=vp(i.stateNode,h,d),Wm(i,d),Le!==4&&(Le=2)),!1;var _=Error(r(520),{cause:h});if(_=Ur(_,l),uc===null?uc=[_]:uc.push(_),Le!==4&&(Le=2),s===null)return!0;h=Ur(h,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,i=d&-d,l.lanes|=i,i=vp(l.stateNode,h,i),Wm(l,i),!1;case 1:if(s=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(aa===null||!aa.has(_))))return l.flags|=65536,d&=-d,l.lanes|=d,d=wT(d),ST(d,i,l,h),Wm(l,d),!1}l=l.return}while(l!==null);return!1}var IT=Error(r(461)),mn=!1;function Sn(i,s,l,h){s.child=i===null?pT(s,null,l,h):fl(s,i.child,l,h)}function RT(i,s,l,h,d){l=l.render;var _=s.ref;if("ref"in h){var S={};for(var P in h)P!=="ref"&&(S[P]=h[P])}else S=h;return vo(s),h=np(i,s,l,S,_,d),P=rp(),i!==null&&!mn?(ip(i,s,d),gs(i,s,d)):(he&&P&&$m(s),s.flags|=1,Sn(i,s,h,d),s.child)}function bT(i,s,l,h,d){if(i===null){var _=l.type;return typeof _=="function"&&!km(_)&&_.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=_,CT(i,s,_,h,d)):(i=xh(l.type,null,h,s,s.mode,d),i.ref=s.ref,i.return=s,s.child=i)}if(_=i.child,!bp(i,d)){var S=_.memoizedProps;if(l=l.compare,l=l!==null?l:Uu,l(S,h)&&i.ref===s.ref)return gs(i,s,d)}return s.flags|=1,i=us(_,h),i.ref=s.ref,i.return=s,s.child=i}function CT(i,s,l,h,d){if(i!==null){var _=i.memoizedProps;if(Uu(_,h)&&i.ref===s.ref)if(mn=!1,s.pendingProps=h=_,bp(i,d))(i.flags&131072)!==0&&(mn=!0);else return s.lanes=i.lanes,gs(i,s,d)}return Ep(i,s,l,h,d)}function DT(i,s,l){var h=s.pendingProps,d=h.children,_=i!==null?i.memoizedState:null;if(h.mode==="hidden"){if((s.flags&128)!==0){if(h=_!==null?_.baseLanes|l:l,i!==null){for(d=s.child=i.child,_=0;d!==null;)_=_|d.lanes|d.childLanes,d=d.sibling;s.childLanes=_&~h}else s.childLanes=0,s.child=null;return VT(i,s,h,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&$h(s,_!==null?_.cachePool:null),_!==null?CE(s,_):Zm(),gT(s);else return s.lanes=s.childLanes=536870912,VT(i,s,_!==null?_.baseLanes|l:l,l)}else _!==null?($h(s,_.cachePool),CE(s,_),ta(),s.memoizedState=null):(i!==null&&$h(s,null),Zm(),ta());return Sn(i,s,d,l),s.child}function VT(i,s,l,h){var d=Qm();return d=d===null?null:{parent:an._currentValue,pool:d},s.memoizedState={baseLanes:l,cachePool:d},i!==null&&$h(s,null),Zm(),gT(s),i!==null&&zu(i,s,h,!0),null}function nf(i,s){var l=s.ref;if(l===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(s.flags|=4194816)}}function Ep(i,s,l,h,d){return vo(s),l=np(i,s,l,h,void 0,d),h=rp(),i!==null&&!mn?(ip(i,s,d),gs(i,s,d)):(he&&h&&$m(s),s.flags|=1,Sn(i,s,l,d),s.child)}function PT(i,s,l,h,d,_){return vo(s),s.updateQueue=null,l=VE(s,h,l,d),DE(i),h=rp(),i!==null&&!mn?(ip(i,s,_),gs(i,s,_)):(he&&h&&$m(s),s.flags|=1,Sn(i,s,l,_),s.child)}function NT(i,s,l,h,d){if(vo(s),s.stateNode===null){var _=nl,S=l.contextType;typeof S=="object"&&S!==null&&(_=kn(S)),_=new l(h,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=_p,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=h,_.state=s.memoizedState,_.refs={},Ym(s),S=l.contextType,_.context=typeof S=="object"&&S!==null?kn(S):nl,_.state=s.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(yp(s,l,S,h),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(S=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),S!==_.state&&_p.enqueueReplaceState(_,_.state,null),Xu(s,h,_,d),Yu(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(i===null){_=s.stateNode;var P=s.memoizedProps,k=Ao(l,P);_.props=k;var H=_.context,Z=l.contextType;S=nl,typeof Z=="object"&&Z!==null&&(S=kn(Z));var at=l.getDerivedStateFromProps;Z=typeof at=="function"||typeof _.getSnapshotBeforeUpdate=="function",P=s.pendingProps!==P,Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(P||H!==S)&&_T(s,_,h,S),Ys=!1;var Q=s.memoizedState;_.state=Q,Xu(s,h,_,d),Yu(),H=s.memoizedState,P||Q!==H||Ys?(typeof at=="function"&&(yp(s,l,at,h),H=s.memoizedState),(k=Ys||yT(s,l,k,h,Q,H,S))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=H),_.props=h,_.state=H,_.context=S,h=k):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{_=s.stateNode,Xm(i,s),S=s.memoizedProps,Z=Ao(l,S),_.props=Z,at=s.pendingProps,Q=_.context,H=l.contextType,k=nl,typeof H=="object"&&H!==null&&(k=kn(H)),P=l.getDerivedStateFromProps,(H=typeof P=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==at||Q!==k)&&_T(s,_,h,k),Ys=!1,Q=s.memoizedState,_.state=Q,Xu(s,h,_,d),Yu();var K=s.memoizedState;S!==at||Q!==K||Ys||i!==null&&i.dependencies!==null&&Lh(i.dependencies)?(typeof P=="function"&&(yp(s,l,P,h),K=s.memoizedState),(Z=Ys||yT(s,l,Z,h,Q,K,k)||i!==null&&i.dependencies!==null&&Lh(i.dependencies))?(H||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,K,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,K,k)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&Q===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Q===i.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=K),_.props=h,_.state=K,_.context=k,h=Z):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&Q===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Q===i.memoizedState||(s.flags|=1024),h=!1)}return _=h,nf(i,s),h=(s.flags&128)!==0,_||h?(_=s.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,i!==null&&h?(s.child=fl(s,i.child,null,d),s.child=fl(s,null,l,d)):Sn(i,s,l,d),s.memoizedState=_.state,i=s.child):i=gs(i,s,d),i}function OT(i,s,l,h){return Fu(),s.flags|=256,Sn(i,s,l,h),s.child}var Tp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ap(i){return{baseLanes:i,cachePool:EE()}}function wp(i,s,l){return i=i!==null?i.childLanes&~l:0,s&&(i|=zr),i}function xT(i,s,l){var h=s.pendingProps,d=!1,_=(s.flags&128)!==0,S;if((S=_)||(S=i!==null&&i.memoizedState===null?!1:(on.current&2)!==0),S&&(d=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,i===null){if(he){if(d?Zs(s):ta(),he){var P=ke,k;if(k=P){t:{for(k=P,P=bi;k.nodeType!==8;){if(!P){P=null;break t}if(k=ci(k.nextSibling),k===null){P=null;break t}}P=k}P!==null?(s.memoizedState={dehydrated:P,treeContext:mo!==null?{id:cs,overflow:hs}:null,retryLane:536870912,hydrationErrors:null},k=Sr(18,null,null,0),k.stateNode=P,k.return=s,s.child=k,Jn=s,ke=null,k=!0):k=!1}k||yo(s)}if(P=s.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return ag(P)?s.lanes=32:s.lanes=536870912,null;ps(s)}return P=h.children,h=h.fallback,d?(ta(),d=s.mode,P=rf({mode:"hidden",children:P},d),h=fo(h,d,l,null),P.return=s,h.return=s,P.sibling=h,s.child=P,d=s.child,d.memoizedState=Ap(l),d.childLanes=wp(i,S,l),s.memoizedState=Tp,h):(Zs(s),Sp(s,P))}if(k=i.memoizedState,k!==null&&(P=k.dehydrated,P!==null)){if(_)s.flags&256?(Zs(s),s.flags&=-257,s=Ip(i,s,l)):s.memoizedState!==null?(ta(),s.child=i.child,s.flags|=128,s=null):(ta(),d=h.fallback,P=s.mode,h=rf({mode:"visible",children:h.children},P),d=fo(d,P,l,null),d.flags|=2,h.return=s,d.return=s,h.sibling=d,s.child=h,fl(s,i.child,null,l),h=s.child,h.memoizedState=Ap(l),h.childLanes=wp(i,S,l),s.memoizedState=Tp,s=d);else if(Zs(s),ag(P)){if(S=P.nextSibling&&P.nextSibling.dataset,S)var H=S.dgst;S=H,h=Error(r(419)),h.stack="",h.digest=S,ju({value:h,source:null,stack:null}),s=Ip(i,s,l)}else if(mn||zu(i,s,l,!1),S=(l&i.childLanes)!==0,mn||S){if(S=Ae,S!==null&&(h=l&-l,h=(h&42)!==0?1:Ka(h),h=(h&(S.suspendedLanes|l))!==0?0:h,h!==0&&h!==k.retryLane))throw k.retryLane=h,el(i,h),Dr(S,i,h),IT;P.data==="$?"||zp(),s=Ip(i,s,l)}else P.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=k.treeContext,ke=ci(P.nextSibling),Jn=s,he=!0,go=null,bi=!1,i!==null&&(Br[Fr++]=cs,Br[Fr++]=hs,Br[Fr++]=mo,cs=i.id,hs=i.overflow,mo=s),s=Sp(s,h.children),s.flags|=4096);return s}return d?(ta(),d=h.fallback,P=s.mode,k=i.child,H=k.sibling,h=us(k,{mode:"hidden",children:h.children}),h.subtreeFlags=k.subtreeFlags&65011712,H!==null?d=us(H,d):(d=fo(d,P,l,null),d.flags|=2),d.return=s,h.return=s,h.sibling=d,s.child=h,h=d,d=s.child,P=i.child.memoizedState,P===null?P=Ap(l):(k=P.cachePool,k!==null?(H=an._currentValue,k=k.parent!==H?{parent:H,pool:H}:k):k=EE(),P={baseLanes:P.baseLanes|l,cachePool:k}),d.memoizedState=P,d.childLanes=wp(i,S,l),s.memoizedState=Tp,h):(Zs(s),l=i.child,i=l.sibling,l=us(l,{mode:"visible",children:h.children}),l.return=s,l.sibling=null,i!==null&&(S=s.deletions,S===null?(s.deletions=[i],s.flags|=16):S.push(i)),s.child=l,s.memoizedState=null,l)}function Sp(i,s){return s=rf({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function rf(i,s){return i=Sr(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Ip(i,s,l){return fl(s,i.child,null,l),i=Sp(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function MT(i,s,l){i.lanes|=s;var h=i.alternate;h!==null&&(h.lanes|=s),zm(i.return,s,l)}function Rp(i,s,l,h,d){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:d}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=h,_.tail=l,_.tailMode=d)}function kT(i,s,l){var h=s.pendingProps,d=h.revealOrder,_=h.tail;if(Sn(i,s,h.children,l),h=on.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&MT(i,l,s);else if(i.tag===19)MT(i,l,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}switch(J(on,h),d){case"forwards":for(l=s.child,d=null;l!==null;)i=l.alternate,i!==null&&Zh(i)===null&&(d=l),l=l.sibling;l=d,l===null?(d=s.child,s.child=null):(d=l.sibling,l.sibling=null),Rp(s,!1,d,l,_);break;case"backwards":for(l=null,d=s.child,s.child=null;d!==null;){if(i=d.alternate,i!==null&&Zh(i)===null){s.child=d;break}i=d.sibling,d.sibling=l,l=d,d=i}Rp(s,!0,l,null,_);break;case"together":Rp(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function gs(i,s,l){if(i!==null&&(s.dependencies=i.dependencies),sa|=s.lanes,(l&s.childLanes)===0)if(i!==null){if(zu(i,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,l=us(i,i.pendingProps),s.child=l,l.return=s;i.sibling!==null;)i=i.sibling,l=l.sibling=us(i,i.pendingProps),l.return=s;l.sibling=null}return s.child}function bp(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Lh(i)))}function H2(i,s,l){switch(s.tag){case 3:Rt(s,s.stateNode.containerInfo),Ks(s,an,i.memoizedState.cache),Fu();break;case 27:case 5:za(s);break;case 4:Rt(s,s.stateNode.containerInfo);break;case 10:Ks(s,s.type,s.memoizedProps.value);break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(Zs(s),s.flags|=128,null):(l&s.child.childLanes)!==0?xT(i,s,l):(Zs(s),i=gs(i,s,l),i!==null?i.sibling:null);Zs(s);break;case 19:var d=(i.flags&128)!==0;if(h=(l&s.childLanes)!==0,h||(zu(i,s,l,!1),h=(l&s.childLanes)!==0),d){if(h)return kT(i,s,l);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),J(on,on.current),h)break;return null;case 22:case 23:return s.lanes=0,DT(i,s,l);case 24:Ks(s,an,i.memoizedState.cache)}return gs(i,s,l)}function LT(i,s,l){if(i!==null)if(i.memoizedProps!==s.pendingProps)mn=!0;else{if(!bp(i,l)&&(s.flags&128)===0)return mn=!1,H2(i,s,l);mn=(i.flags&131072)!==0}else mn=!1,he&&(s.flags&1048576)!==0&&dE(s,kh,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var h=s.elementType,d=h._init;if(h=d(h._payload),s.type=h,typeof h=="function")km(h)?(i=Ao(h,i),s.tag=1,s=NT(null,s,h,i,l)):(s.tag=0,s=Ep(null,s,h,i,l));else{if(h!=null){if(d=h.$$typeof,d===tt){s.tag=11,s=RT(null,s,h,i,l);break t}else if(d===R){s.tag=14,s=bT(null,s,h,i,l);break t}}throw s=Ot(h)||h,Error(r(306,s,""))}}return s;case 0:return Ep(i,s,s.type,s.pendingProps,l);case 1:return h=s.type,d=Ao(h,s.pendingProps),NT(i,s,h,d,l);case 3:t:{if(Rt(s,s.stateNode.containerInfo),i===null)throw Error(r(387));h=s.pendingProps;var _=s.memoizedState;d=_.element,Xm(i,s),Xu(s,h,null,l);var S=s.memoizedState;if(h=S.cache,Ks(s,an,h),h!==_.cache&&qm(s,[an],l,!0),Yu(),h=S.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=OT(i,s,h,l);break t}else if(h!==d){d=Ur(Error(r(424)),s),ju(d),s=OT(i,s,h,l);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ke=ci(i.firstChild),Jn=s,he=!0,go=null,bi=!0,l=pT(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Fu(),h===d){s=gs(i,s,l);break t}Sn(i,s,h,l)}s=s.child}return s;case 26:return nf(i,s),i===null?(l=F1(s.type,null,s.pendingProps,null))?s.memoizedState=l:he||(l=s.type,i=s.pendingProps,h=_f(dt.current).createElement(l),h[Te]=s,h[He]=i,Rn(h,l,i),Se(h),s.stateNode=h):s.memoizedState=F1(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return za(s),i===null&&he&&(h=s.stateNode=U1(s.type,s.pendingProps,dt.current),Jn=s,bi=!0,d=ke,ua(s.type)?(og=d,ke=ci(h.firstChild)):ke=d),Sn(i,s,s.pendingProps.children,l),nf(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&he&&((d=h=ke)&&(h=vD(h,s.type,s.pendingProps,bi),h!==null?(s.stateNode=h,Jn=s,ke=ci(h.firstChild),bi=!1,d=!0):d=!1),d||yo(s)),za(s),d=s.type,_=s.pendingProps,S=i!==null?i.memoizedProps:null,h=_.children,rg(d,_)?h=null:S!==null&&rg(d,S)&&(s.flags|=32),s.memoizedState!==null&&(d=np(i,s,L2,null,null,l),_c._currentValue=d),nf(i,s),Sn(i,s,h,l),s.child;case 6:return i===null&&he&&((i=l=ke)&&(l=ED(l,s.pendingProps,bi),l!==null?(s.stateNode=l,Jn=s,ke=null,i=!0):i=!1),i||yo(s)),null;case 13:return xT(i,s,l);case 4:return Rt(s,s.stateNode.containerInfo),h=s.pendingProps,i===null?s.child=fl(s,null,h,l):Sn(i,s,h,l),s.child;case 11:return RT(i,s,s.type,s.pendingProps,l);case 7:return Sn(i,s,s.pendingProps,l),s.child;case 8:return Sn(i,s,s.pendingProps.children,l),s.child;case 12:return Sn(i,s,s.pendingProps.children,l),s.child;case 10:return h=s.pendingProps,Ks(s,s.type,h.value),Sn(i,s,h.children,l),s.child;case 9:return d=s.type._context,h=s.pendingProps.children,vo(s),d=kn(d),h=h(d),s.flags|=1,Sn(i,s,h,l),s.child;case 14:return bT(i,s,s.type,s.pendingProps,l);case 15:return CT(i,s,s.type,s.pendingProps,l);case 19:return kT(i,s,l);case 31:return h=s.pendingProps,l=s.mode,h={mode:h.mode,children:h.children},i===null?(l=rf(h,l),l.ref=s.ref,s.child=l,l.return=s,s=l):(l=us(i.child,h),l.ref=s.ref,s.child=l,l.return=s,s=l),s;case 22:return DT(i,s,l);case 24:return vo(s),h=kn(an),i===null?(d=Qm(),d===null&&(d=Ae,_=Hm(),d.pooledCache=_,_.refCount++,_!==null&&(d.pooledCacheLanes|=l),d=_),s.memoizedState={parent:h,cache:d},Ym(s),Ks(s,an,d)):((i.lanes&l)!==0&&(Xm(i,s),Xu(s,null,null,l),Yu()),d=i.memoizedState,_=s.memoizedState,d.parent!==h?(d={parent:h,cache:h},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Ks(s,an,h)):(h=_.cache,Ks(s,an,h),h!==d.cache&&qm(s,[an],l,!0))),Sn(i,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function ys(i){i.flags|=4}function UT(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!G1(s)){if(s=jr.current,s!==null&&((ne&4194048)===ne?Ci!==null:(ne&62914560)!==ne&&(ne&536870912)===0||s!==Ci))throw Qu=Km,TE;i.flags|=8192}}function sf(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?tr():536870912,i.lanes|=s,gl|=s)}function rc(i,s){if(!he)switch(i.tailMode){case"hidden":s=i.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Ne(i){var s=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(s)for(var d=i.child;d!==null;)l|=d.lanes|d.childLanes,h|=d.subtreeFlags&65011712,h|=d.flags&65011712,d.return=i,d=d.sibling;else for(d=i.child;d!==null;)l|=d.lanes|d.childLanes,h|=d.subtreeFlags,h|=d.flags,d.return=i,d=d.sibling;return i.subtreeFlags|=h,i.childLanes=l,s}function G2(i,s,l){var h=s.pendingProps;switch(Bm(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(s),null;case 1:return Ne(s),null;case 3:return l=s.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),ds(an),Vn(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Bu(s)?ys(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,gE())),Ne(s),null;case 26:return l=s.memoizedState,i===null?(ys(s),l!==null?(Ne(s),UT(s,l)):(Ne(s),s.flags&=-16777217)):l?l!==i.memoizedState?(ys(s),Ne(s),UT(s,l)):(Ne(s),s.flags&=-16777217):(i.memoizedProps!==h&&ys(s),Ne(s),s.flags&=-16777217),null;case 27:Us(s),l=dt.current;var d=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==h&&ys(s);else{if(!h){if(s.stateNode===null)throw Error(r(166));return Ne(s),null}i=ut.current,Bu(s)?mE(s):(i=U1(d,h,l),s.stateNode=i,ys(s))}return Ne(s),null;case 5:if(Us(s),l=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==h&&ys(s);else{if(!h){if(s.stateNode===null)throw Error(r(166));return Ne(s),null}if(i=ut.current,Bu(s))mE(s);else{switch(d=_f(dt.current),i){case 1:i=d.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=d.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=d.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof h.is=="string"?d.createElement("select",{is:h.is}):d.createElement("select"),h.multiple?i.multiple=!0:h.size&&(i.size=h.size);break;default:i=typeof h.is=="string"?d.createElement(l,{is:h.is}):d.createElement(l)}}i[Te]=s,i[He]=h;t:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break t;for(;d.sibling===null;){if(d.return===null||d.return===s)break t;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=i;t:switch(Rn(i,l,h),l){case"button":case"input":case"select":case"textarea":i=!!h.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&ys(s)}}return Ne(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==h&&ys(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(r(166));if(i=dt.current,Bu(s)){if(i=s.stateNode,l=s.memoizedProps,h=null,d=Jn,d!==null)switch(d.tag){case 27:case 5:h=d.memoizedProps}i[Te]=s,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||P1(i.nodeValue,l)),i||yo(s)}else i=_f(i).createTextNode(h),i[Te]=s,s.stateNode=i}return Ne(s),null;case 13:if(h=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(d=Bu(s),h!==null&&h.dehydrated!==null){if(i===null){if(!d)throw Error(r(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Te]=s}else Fu(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ne(s),d=!1}else d=gE(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(ps(s),s):(ps(s),null)}if(ps(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=h!==null,i=i!==null&&i.memoizedState!==null,l){h=s.child,d=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(d=h.alternate.memoizedState.cachePool.pool);var _=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),_!==d&&(h.flags|=2048)}return l!==i&&l&&(s.child.flags|=8192),sf(s,s.updateQueue),Ne(s),null;case 4:return Vn(),i===null&&Jp(s.stateNode.containerInfo),Ne(s),null;case 10:return ds(s.type),Ne(s),null;case 19:if(et(on),d=s.memoizedState,d===null)return Ne(s),null;if(h=(s.flags&128)!==0,_=d.rendering,_===null)if(h)rc(d,!1);else{if(Le!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(_=Zh(i),_!==null){for(s.flags|=128,rc(d,!1),i=_.updateQueue,s.updateQueue=i,sf(s,i),s.subtreeFlags=0,i=l,l=s.child;l!==null;)fE(l,i),l=l.sibling;return J(on,on.current&1|2),s.child}i=i.sibling}d.tail!==null&&un()>lf&&(s.flags|=128,h=!0,rc(d,!1),s.lanes=4194304)}else{if(!h)if(i=Zh(_),i!==null){if(s.flags|=128,h=!0,i=i.updateQueue,s.updateQueue=i,sf(s,i),rc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!_.alternate&&!he)return Ne(s),null}else 2*un()-d.renderingStartTime>lf&&l!==536870912&&(s.flags|=128,h=!0,rc(d,!1),s.lanes=4194304);d.isBackwards?(_.sibling=s.child,s.child=_):(i=d.last,i!==null?i.sibling=_:s.child=_,d.last=_)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=un(),s.sibling=null,i=on.current,J(on,h?i&1|2:i&1),s):(Ne(s),null);case 22:case 23:return ps(s),tp(),h=s.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(l&536870912)!==0&&(s.flags&128)===0&&(Ne(s),s.subtreeFlags&6&&(s.flags|=8192)):Ne(s),l=s.updateQueue,l!==null&&sf(s,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==l&&(s.flags|=2048),i!==null&&et(Eo),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),ds(an),Ne(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Q2(i,s){switch(Bm(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return ds(an),Vn(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Us(s),null;case 13:if(ps(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Fu()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return et(on),null;case 4:return Vn(),null;case 10:return ds(s.type),null;case 22:case 23:return ps(s),tp(),i!==null&&et(Eo),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return ds(an),null;case 25:return null;default:return null}}function $T(i,s){switch(Bm(s),s.tag){case 3:ds(an),Vn();break;case 26:case 27:case 5:Us(s);break;case 4:Vn();break;case 13:ps(s);break;case 19:et(on);break;case 10:ds(s.type);break;case 22:case 23:ps(s),tp(),i!==null&&et(Eo);break;case 24:ds(an)}}function ic(i,s){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&i)===i){h=void 0;var _=l.create,S=l.inst;h=_(),S.destroy=h}l=l.next}while(l!==d)}}catch(P){Ee(s,s.return,P)}}function ea(i,s,l){try{var h=s.updateQueue,d=h!==null?h.lastEffect:null;if(d!==null){var _=d.next;h=_;do{if((h.tag&i)===i){var S=h.inst,P=S.destroy;if(P!==void 0){S.destroy=void 0,d=s;var k=l,H=P;try{H()}catch(Z){Ee(d,k,Z)}}}h=h.next}while(h!==_)}}catch(Z){Ee(s,s.return,Z)}}function BT(i){var s=i.updateQueue;if(s!==null){var l=i.stateNode;try{bE(s,l)}catch(h){Ee(i,i.return,h)}}}function FT(i,s,l){l.props=Ao(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){Ee(i,s,h)}}function sc(i,s){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(d){Ee(i,s,d)}}function Di(i,s){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(d){Ee(i,s,d)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(d){Ee(i,s,d)}else l.current=null}function jT(i){var s=i.type,l=i.memoizedProps,h=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break t;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(d){Ee(i,i.return,d)}}function Cp(i,s,l){try{var h=i.stateNode;mD(h,i.type,l,s),h[He]=s}catch(d){Ee(i,i.return,d)}}function zT(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ua(i.type)||i.tag===4}function Dp(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||zT(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ua(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Vp(i,s,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(i),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=yf));else if(h!==4&&(h===27&&ua(i.type)&&(l=i.stateNode,s=null),i=i.child,i!==null))for(Vp(i,s,l),i=i.sibling;i!==null;)Vp(i,s,l),i=i.sibling}function af(i,s,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,s?l.insertBefore(i,s):l.appendChild(i);else if(h!==4&&(h===27&&ua(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(af(i,s,l),i=i.sibling;i!==null;)af(i,s,l),i=i.sibling}function qT(i){var s=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Rn(s,h,l),s[Te]=i,s[He]=l}catch(_){Ee(i,i.return,_)}}var _s=!1,Be=!1,Pp=!1,HT=typeof WeakSet=="function"?WeakSet:Set,pn=null;function K2(i,s){if(i=i.containerInfo,eg=Sf,i=nE(i),Dm(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else t:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var d=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break t}var S=0,P=-1,k=-1,H=0,Z=0,at=i,Q=null;e:for(;;){for(var K;at!==l||d!==0&&at.nodeType!==3||(P=S+d),at!==_||h!==0&&at.nodeType!==3||(k=S+h),at.nodeType===3&&(S+=at.nodeValue.length),(K=at.firstChild)!==null;)Q=at,at=K;for(;;){if(at===i)break e;if(Q===l&&++H===d&&(P=S),Q===_&&++Z===h&&(k=S),(K=at.nextSibling)!==null)break;at=Q,Q=at.parentNode}at=K}l=P===-1||k===-1?null:{start:P,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(ng={focusedElem:i,selectionRange:l},Sf=!1,pn=s;pn!==null;)if(s=pn,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,pn=i;else for(;pn!==null;){switch(s=pn,_=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,l=s,d=_.memoizedProps,_=_.memoizedState,h=l.stateNode;try{var Pt=Ao(l.type,d,l.elementType===l.type);i=h.getSnapshotBeforeUpdate(Pt,_),h.__reactInternalSnapshotBeforeUpdate=i}catch(bt){Ee(l,l.return,bt)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,l=i.nodeType,l===9)sg(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":sg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,pn=i;break}pn=s.return}}function GT(i,s,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:na(i,l),h&4&&ic(5,l);break;case 1:if(na(i,l),h&4)if(i=l.stateNode,s===null)try{i.componentDidMount()}catch(S){Ee(l,l.return,S)}else{var d=Ao(l.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(d,s,i.__reactInternalSnapshotBeforeUpdate)}catch(S){Ee(l,l.return,S)}}h&64&&BT(l),h&512&&sc(l,l.return);break;case 3:if(na(i,l),h&64&&(i=l.updateQueue,i!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{bE(i,s)}catch(S){Ee(l,l.return,S)}}break;case 27:s===null&&h&4&&qT(l);case 26:case 5:na(i,l),s===null&&h&4&&jT(l),h&512&&sc(l,l.return);break;case 12:na(i,l);break;case 13:na(i,l),h&4&&YT(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=rD.bind(null,l),TD(i,l))));break;case 22:if(h=l.memoizedState!==null||_s,!h){s=s!==null&&s.memoizedState!==null||Be,d=_s;var _=Be;_s=h,(Be=s)&&!_?ra(i,l,(l.subtreeFlags&8772)!==0):na(i,l),_s=d,Be=_}break;case 30:break;default:na(i,l)}}function QT(i){var s=i.alternate;s!==null&&(i.alternate=null,QT(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Ji(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var De=null,ur=!1;function vs(i,s,l){for(l=l.child;l!==null;)KT(i,s,l),l=l.sibling}function KT(i,s,l){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Yr,l)}catch{}switch(l.tag){case 26:Be||Di(l,s),vs(i,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Be||Di(l,s);var h=De,d=ur;ua(l.type)&&(De=l.stateNode,ur=!1),vs(i,s,l),mc(l.stateNode),De=h,ur=d;break;case 5:Be||Di(l,s);case 6:if(h=De,d=ur,De=null,vs(i,s,l),De=h,ur=d,De!==null)if(ur)try{(De.nodeType===9?De.body:De.nodeName==="HTML"?De.ownerDocument.body:De).removeChild(l.stateNode)}catch(_){Ee(l,s,_)}else try{De.removeChild(l.stateNode)}catch(_){Ee(l,s,_)}break;case 18:De!==null&&(ur?(i=De,k1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Ac(i)):k1(De,l.stateNode));break;case 4:h=De,d=ur,De=l.stateNode.containerInfo,ur=!0,vs(i,s,l),De=h,ur=d;break;case 0:case 11:case 14:case 15:Be||ea(2,l,s),Be||ea(4,l,s),vs(i,s,l);break;case 1:Be||(Di(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"&&FT(l,s,h)),vs(i,s,l);break;case 21:vs(i,s,l);break;case 22:Be=(h=Be)||l.memoizedState!==null,vs(i,s,l),Be=h;break;default:vs(i,s,l)}}function YT(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ac(i)}catch(l){Ee(s,s.return,l)}}function Y2(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new HT),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new HT),s;default:throw Error(r(435,i.tag))}}function Np(i,s){var l=Y2(i);s.forEach(function(h){var d=iD.bind(null,i,h);l.has(h)||(l.add(h),h.then(d,d))})}function Ir(i,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var d=l[h],_=i,S=s,P=S;t:for(;P!==null;){switch(P.tag){case 27:if(ua(P.type)){De=P.stateNode,ur=!1;break t}break;case 5:De=P.stateNode,ur=!1;break t;case 3:case 4:De=P.stateNode.containerInfo,ur=!0;break t}P=P.return}if(De===null)throw Error(r(160));KT(_,S,d),De=null,ur=!1,_=d.alternate,_!==null&&(_.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)XT(s,i),s=s.sibling}var ui=null;function XT(i,s){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ir(s,i),Rr(i),h&4&&(ea(3,i,i.return),ic(3,i),ea(5,i,i.return));break;case 1:Ir(s,i),Rr(i),h&512&&(Be||l===null||Di(l,l.return)),h&64&&_s&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var d=ui;if(Ir(s,i),Rr(i),h&512&&(Be||l===null||Di(l,l.return)),h&4){var _=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){t:{h=i.type,l=i.memoizedProps,d=d.ownerDocument||d;e:switch(h){case"title":_=d.getElementsByTagName("title")[0],(!_||_[Zr]||_[Te]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=d.createElement(h),d.head.insertBefore(_,d.querySelector("head > title"))),Rn(_,h,l),_[Te]=i,Se(_),h=_;break t;case"link":var S=q1("link","href",d).get(h+(l.href||""));if(S){for(var P=0;P<S.length;P++)if(_=S[P],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(P,1);break e}}_=d.createElement(h),Rn(_,h,l),d.head.appendChild(_);break;case"meta":if(S=q1("meta","content",d).get(h+(l.content||""))){for(P=0;P<S.length;P++)if(_=S[P],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(P,1);break e}}_=d.createElement(h),Rn(_,h,l),d.head.appendChild(_);break;default:throw Error(r(468,h))}_[Te]=i,Se(_),h=_}i.stateNode=h}else H1(d,i.type,i.stateNode);else i.stateNode=z1(d,h,i.memoizedProps);else _!==h?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,h===null?H1(d,i.type,i.stateNode):z1(d,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Cp(i,i.memoizedProps,l.memoizedProps)}break;case 27:Ir(s,i),Rr(i),h&512&&(Be||l===null||Di(l,l.return)),l!==null&&h&4&&Cp(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Ir(s,i),Rr(i),h&512&&(Be||l===null||Di(l,l.return)),i.flags&32){d=i.stateNode;try{hn(d,"")}catch(K){Ee(i,i.return,K)}}h&4&&i.stateNode!=null&&(d=i.memoizedProps,Cp(i,d,l!==null?l.memoizedProps:d)),h&1024&&(Pp=!0);break;case 6:if(Ir(s,i),Rr(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(K){Ee(i,i.return,K)}}break;case 3:if(Tf=null,d=ui,ui=vf(s.containerInfo),Ir(s,i),ui=d,Rr(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Ac(s.containerInfo)}catch(K){Ee(i,i.return,K)}Pp&&(Pp=!1,WT(i));break;case 4:h=ui,ui=vf(i.stateNode.containerInfo),Ir(s,i),Rr(i),ui=h;break;case 12:Ir(s,i),Rr(i);break;case 13:Ir(s,i),Rr(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Up=un()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Np(i,h)));break;case 22:d=i.memoizedState!==null;var k=l!==null&&l.memoizedState!==null,H=_s,Z=Be;if(_s=H||d,Be=Z||k,Ir(s,i),Be=Z,_s=H,Rr(i),h&8192)t:for(s=i.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(l===null||k||_s||Be||wo(i)),l=null,s=i;;){if(s.tag===5||s.tag===26){if(l===null){k=l=s;try{if(_=k.stateNode,d)S=_.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{P=k.stateNode;var at=k.memoizedProps.style,Q=at!=null&&at.hasOwnProperty("display")?at.display:null;P.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(K){Ee(k,k.return,K)}}}else if(s.tag===6){if(l===null){k=s;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(K){Ee(k,k.return,K)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,Np(i,l))));break;case 19:Ir(s,i),Rr(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Np(i,h)));break;case 30:break;case 21:break;default:Ir(s,i),Rr(i)}}function Rr(i){var s=i.flags;if(s&2){try{for(var l,h=i.return;h!==null;){if(zT(h)){l=h;break}h=h.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var d=l.stateNode,_=Dp(i);af(i,_,d);break;case 5:var S=l.stateNode;l.flags&32&&(hn(S,""),l.flags&=-33);var P=Dp(i);af(i,P,S);break;case 3:case 4:var k=l.stateNode.containerInfo,H=Dp(i);Vp(i,H,k);break;default:throw Error(r(161))}}catch(Z){Ee(i,i.return,Z)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function WT(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;WT(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function na(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)GT(i,s.alternate,s),s=s.sibling}function wo(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:ea(4,s,s.return),wo(s);break;case 1:Di(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&FT(s,s.return,l),wo(s);break;case 27:mc(s.stateNode);case 26:case 5:Di(s,s.return),wo(s);break;case 22:s.memoizedState===null&&wo(s);break;case 30:wo(s);break;default:wo(s)}i=i.sibling}}function ra(i,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,d=i,_=s,S=_.flags;switch(_.tag){case 0:case 11:case 15:ra(d,_,l),ic(4,_);break;case 1:if(ra(d,_,l),h=_,d=h.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(H){Ee(h,h.return,H)}if(h=_,d=h.updateQueue,d!==null){var P=h.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)RE(k[d],P)}catch(H){Ee(h,h.return,H)}}l&&S&64&&BT(_),sc(_,_.return);break;case 27:qT(_);case 26:case 5:ra(d,_,l),l&&h===null&&S&4&&jT(_),sc(_,_.return);break;case 12:ra(d,_,l);break;case 13:ra(d,_,l),l&&S&4&&YT(d,_);break;case 22:_.memoizedState===null&&ra(d,_,l),sc(_,_.return);break;case 30:break;default:ra(d,_,l)}s=s.sibling}}function Op(i,s){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&qu(l))}function xp(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&qu(i))}function Vi(i,s,l,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)JT(i,s,l,h),s=s.sibling}function JT(i,s,l,h){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Vi(i,s,l,h),d&2048&&ic(9,s);break;case 1:Vi(i,s,l,h);break;case 3:Vi(i,s,l,h),d&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&qu(i)));break;case 12:if(d&2048){Vi(i,s,l,h),i=s.stateNode;try{var _=s.memoizedProps,S=_.id,P=_.onPostCommit;typeof P=="function"&&P(S,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(k){Ee(s,s.return,k)}}else Vi(i,s,l,h);break;case 13:Vi(i,s,l,h);break;case 23:break;case 22:_=s.stateNode,S=s.alternate,s.memoizedState!==null?_._visibility&2?Vi(i,s,l,h):ac(i,s):_._visibility&2?Vi(i,s,l,h):(_._visibility|=2,dl(i,s,l,h,(s.subtreeFlags&10256)!==0)),d&2048&&Op(S,s);break;case 24:Vi(i,s,l,h),d&2048&&xp(s.alternate,s);break;default:Vi(i,s,l,h)}}function dl(i,s,l,h,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var _=i,S=s,P=l,k=h,H=S.flags;switch(S.tag){case 0:case 11:case 15:dl(_,S,P,k,d),ic(8,S);break;case 23:break;case 22:var Z=S.stateNode;S.memoizedState!==null?Z._visibility&2?dl(_,S,P,k,d):ac(_,S):(Z._visibility|=2,dl(_,S,P,k,d)),d&&H&2048&&Op(S.alternate,S);break;case 24:dl(_,S,P,k,d),d&&H&2048&&xp(S.alternate,S);break;default:dl(_,S,P,k,d)}s=s.sibling}}function ac(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=i,h=s,d=h.flags;switch(h.tag){case 22:ac(l,h),d&2048&&Op(h.alternate,h);break;case 24:ac(l,h),d&2048&&xp(h.alternate,h);break;default:ac(l,h)}s=s.sibling}}var oc=8192;function ml(i){if(i.subtreeFlags&oc)for(i=i.child;i!==null;)ZT(i),i=i.sibling}function ZT(i){switch(i.tag){case 26:ml(i),i.flags&oc&&i.memoizedState!==null&&xD(ui,i.memoizedState,i.memoizedProps);break;case 5:ml(i);break;case 3:case 4:var s=ui;ui=vf(i.stateNode.containerInfo),ml(i),ui=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=oc,oc=16777216,ml(i),oc=s):ml(i));break;default:ml(i)}}function t1(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function lc(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var h=s[l];pn=h,n1(h,i)}t1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)e1(i),i=i.sibling}function e1(i){switch(i.tag){case 0:case 11:case 15:lc(i),i.flags&2048&&ea(9,i,i.return);break;case 3:lc(i);break;case 12:lc(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,of(i)):lc(i);break;default:lc(i)}}function of(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var h=s[l];pn=h,n1(h,i)}t1(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:ea(8,s,s.return),of(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,of(s));break;default:of(s)}i=i.sibling}}function n1(i,s){for(;pn!==null;){var l=pn;switch(l.tag){case 0:case 11:case 15:ea(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:qu(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,pn=h;else t:for(l=i;pn!==null;){h=pn;var d=h.sibling,_=h.return;if(QT(h),h===l){pn=null;break t}if(d!==null){d.return=_,pn=d;break t}pn=_}}}var X2={getCacheForType:function(i){var s=kn(an),l=s.data.get(i);return l===void 0&&(l=i(),s.data.set(i,l)),l}},W2=typeof WeakMap=="function"?WeakMap:Map,me=0,Ae=null,Kt=null,ne=0,pe=0,br=null,ia=!1,pl=!1,Mp=!1,Es=0,Le=0,sa=0,So=0,kp=0,zr=0,gl=0,uc=null,cr=null,Lp=!1,Up=0,lf=1/0,uf=null,aa=null,In=0,oa=null,yl=null,_l=0,$p=0,Bp=null,r1=null,cc=0,Fp=null;function Cr(){if((me&2)!==0&&ne!==0)return ne&-ne;if(X.T!==null){var i=sl;return i!==0?i:Kp()}return On()}function i1(){zr===0&&(zr=(ne&536870912)===0||he?Bs():536870912);var i=jr.current;return i!==null&&(i.flags|=32),zr}function Dr(i,s,l){(i===Ae&&(pe===2||pe===9)||i.cancelPendingCommit!==null)&&(vl(i,0),la(i,ne,zr,!1)),Qt(i,l),((me&2)===0||i!==Ae)&&(i===Ae&&((me&2)===0&&(So|=l),Le===4&&la(i,ne,zr,!1)),Pi(i))}function s1(i,s,l){if((me&6)!==0)throw Error(r(327));var h=!l&&(s&124)===0&&(s&i.expiredLanes)===0||Xr(i,s),d=h?tD(i,s):qp(i,s,!0),_=h;do{if(d===0){pl&&!h&&la(i,s,0,!1);break}else{if(l=i.current.alternate,_&&!J2(l)){d=qp(i,s,!1),_=!1;continue}if(d===2){if(_=s,i.errorRecoveryDisabledLanes&_)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;t:{var P=i;d=uc;var k=P.current.memoizedState.isDehydrated;if(k&&(vl(P,S).flags|=256),S=qp(P,S,!1),S!==2){if(Mp&&!k){P.errorRecoveryDisabledLanes|=_,So|=_,d=4;break t}_=cr,cr=d,_!==null&&(cr===null?cr=_:cr.push.apply(cr,_))}d=S}if(_=!1,d!==2)continue}}if(d===1){vl(i,0),la(i,s,0,!0);break}t:{switch(h=i,_=d,_){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:la(h,s,zr,!ia);break t;case 2:cr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(d=Up+300-un(),10<d)){if(la(h,s,zr,!ia),qe(h,0,!0)!==0)break t;h.timeoutHandle=x1(a1.bind(null,h,l,cr,uf,Lp,s,zr,So,gl,ia,_,2,-0,0),d);break t}a1(h,l,cr,uf,Lp,s,zr,So,gl,ia,_,0,-0,0)}}break}while(!0);Pi(i)}function a1(i,s,l,h,d,_,S,P,k,H,Z,at,Q,K){if(i.timeoutHandle=-1,at=s.subtreeFlags,(at&8192||(at&16785408)===16785408)&&(yc={stylesheets:null,count:0,unsuspend:OD},ZT(s),at=MD(),at!==null)){i.cancelPendingCommit=at(d1.bind(null,i,s,_,l,h,d,S,P,k,Z,1,Q,K)),la(i,_,S,!H);return}d1(i,s,_,l,h,d,S,P,k)}function J2(i){for(var s=i;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var d=l[h],_=d.getSnapshot;d=d.value;try{if(!wr(_(),d))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function la(i,s,l,h){s&=~kp,s&=~So,i.suspendedLanes|=s,i.pingedLanes&=~s,h&&(i.warmLanes|=s),h=i.expirationTimes;for(var d=s;0<d;){var _=31-Tn(d),S=1<<_;h[_]=-1,d&=~S}l!==0&&er(i,l,s)}function cf(){return(me&6)===0?(hc(0),!1):!0}function jp(){if(Kt!==null){if(pe===0)var i=Kt.return;else i=Kt,fs=_o=null,sp(i),hl=null,ec=0,i=Kt;for(;i!==null;)$T(i.alternate,i),i=i.return;Kt=null}}function vl(i,s){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,gD(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),jp(),Ae=i,Kt=l=us(i.current,null),ne=s,pe=0,br=null,ia=!1,pl=Xr(i,s),Mp=!1,gl=zr=kp=So=sa=Le=0,cr=uc=null,Lp=!1,(s&8)!==0&&(s|=s&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=s;0<h;){var d=31-Tn(h),_=1<<d;s|=i[d],h&=~_}return Es=s,Ph(),l}function o1(i,s){Ht=null,X.H=Xh,s===Gu||s===Bh?(s=SE(),pe=3):s===TE?(s=SE(),pe=4):pe=s===IT?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,br=s,Kt===null&&(Le=1,ef(i,Ur(s,i.current)))}function l1(){var i=X.H;return X.H=Xh,i===null?Xh:i}function u1(){var i=X.A;return X.A=X2,i}function zp(){Le=4,ia||(ne&4194048)!==ne&&jr.current!==null||(pl=!0),(sa&134217727)===0&&(So&134217727)===0||Ae===null||la(Ae,ne,zr,!1)}function qp(i,s,l){var h=me;me|=2;var d=l1(),_=u1();(Ae!==i||ne!==s)&&(uf=null,vl(i,s)),s=!1;var S=Le;t:do try{if(pe!==0&&Kt!==null){var P=Kt,k=br;switch(pe){case 8:jp(),S=6;break t;case 3:case 2:case 9:case 6:jr.current===null&&(s=!0);var H=pe;if(pe=0,br=null,El(i,P,k,H),l&&pl){S=0;break t}break;default:H=pe,pe=0,br=null,El(i,P,k,H)}}Z2(),S=Le;break}catch(Z){o1(i,Z)}while(!0);return s&&i.shellSuspendCounter++,fs=_o=null,me=h,X.H=d,X.A=_,Kt===null&&(Ae=null,ne=0,Ph()),S}function Z2(){for(;Kt!==null;)c1(Kt)}function tD(i,s){var l=me;me|=2;var h=l1(),d=u1();Ae!==i||ne!==s?(uf=null,lf=un()+500,vl(i,s)):pl=Xr(i,s);t:do try{if(pe!==0&&Kt!==null){s=Kt;var _=br;e:switch(pe){case 1:pe=0,br=null,El(i,s,_,1);break;case 2:case 9:if(AE(_)){pe=0,br=null,h1(s);break}s=function(){pe!==2&&pe!==9||Ae!==i||(pe=7),Pi(i)},_.then(s,s);break t;case 3:pe=7;break t;case 4:pe=5;break t;case 7:AE(_)?(pe=0,br=null,h1(s)):(pe=0,br=null,El(i,s,_,7));break;case 5:var S=null;switch(Kt.tag){case 26:S=Kt.memoizedState;case 5:case 27:var P=Kt;if(!S||G1(S)){pe=0,br=null;var k=P.sibling;if(k!==null)Kt=k;else{var H=P.return;H!==null?(Kt=H,hf(H)):Kt=null}break e}}pe=0,br=null,El(i,s,_,5);break;case 6:pe=0,br=null,El(i,s,_,6);break;case 8:jp(),Le=6;break t;default:throw Error(r(462))}}eD();break}catch(Z){o1(i,Z)}while(!0);return fs=_o=null,X.H=h,X.A=d,me=l,Kt!==null?0:(Ae=null,ne=0,Ph(),Le)}function eD(){for(;Kt!==null&&!bu();)c1(Kt)}function c1(i){var s=LT(i.alternate,i,Es);i.memoizedProps=i.pendingProps,s===null?hf(i):Kt=s}function h1(i){var s=i,l=s.alternate;switch(s.tag){case 15:case 0:s=PT(l,s,s.pendingProps,s.type,void 0,ne);break;case 11:s=PT(l,s,s.pendingProps,s.type.render,s.ref,ne);break;case 5:sp(s);default:$T(l,s),s=Kt=fE(s,Es),s=LT(l,s,Es)}i.memoizedProps=i.pendingProps,s===null?hf(i):Kt=s}function El(i,s,l,h){fs=_o=null,sp(s),hl=null,ec=0;var d=s.return;try{if(q2(i,d,s,l,ne)){Le=1,ef(i,Ur(l,i.current)),Kt=null;return}}catch(_){if(d!==null)throw Kt=d,_;Le=1,ef(i,Ur(l,i.current)),Kt=null;return}s.flags&32768?(he||h===1?i=!0:pl||(ne&536870912)!==0?i=!1:(ia=i=!0,(h===2||h===9||h===3||h===6)&&(h=jr.current,h!==null&&h.tag===13&&(h.flags|=16384))),f1(s,i)):hf(s)}function hf(i){var s=i;do{if((s.flags&32768)!==0){f1(s,ia);return}i=s.return;var l=G2(s.alternate,s,Es);if(l!==null){Kt=l;return}if(s=s.sibling,s!==null){Kt=s;return}Kt=s=i}while(s!==null);Le===0&&(Le=5)}function f1(i,s){do{var l=Q2(i.alternate,i);if(l!==null){l.flags&=32767,Kt=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(i=i.sibling,i!==null)){Kt=i;return}Kt=i=l}while(i!==null);Le=6,Kt=null}function d1(i,s,l,h,d,_,S,P,k){i.cancelPendingCommit=null;do ff();while(In!==0);if((me&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(_=s.lanes|s.childLanes,_|=xm,Qa(i,l,_,S,P,k),i===Ae&&(Kt=Ae=null,ne=0),yl=s,oa=i,_l=l,$p=_,Bp=d,r1=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,sD(Zn,function(){return _1(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=X.T,X.T=null,d=pt.p,pt.p=2,S=me,me|=4;try{K2(i,s,l)}finally{me=S,pt.p=d,X.T=h}}In=1,m1(),p1(),g1()}}function m1(){if(In===1){In=0;var i=oa,s=yl,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=X.T,X.T=null;var h=pt.p;pt.p=2;var d=me;me|=4;try{XT(s,i);var _=ng,S=nE(i.containerInfo),P=_.focusedElem,k=_.selectionRange;if(S!==P&&P&&P.ownerDocument&&eE(P.ownerDocument.documentElement,P)){if(k!==null&&Dm(P)){var H=k.start,Z=k.end;if(Z===void 0&&(Z=H),"selectionStart"in P)P.selectionStart=H,P.selectionEnd=Math.min(Z,P.value.length);else{var at=P.ownerDocument||document,Q=at&&at.defaultView||window;if(Q.getSelection){var K=Q.getSelection(),Pt=P.textContent.length,bt=Math.min(k.start,Pt),ve=k.end===void 0?bt:Math.min(k.end,Pt);!K.extend&&bt>ve&&(S=ve,ve=bt,bt=S);var j=tE(P,bt),L=tE(P,ve);if(j&&L&&(K.rangeCount!==1||K.anchorNode!==j.node||K.anchorOffset!==j.offset||K.focusNode!==L.node||K.focusOffset!==L.offset)){var q=at.createRange();q.setStart(j.node,j.offset),K.removeAllRanges(),bt>ve?(K.addRange(q),K.extend(L.node,L.offset)):(q.setEnd(L.node,L.offset),K.addRange(q))}}}}for(at=[],K=P;K=K.parentNode;)K.nodeType===1&&at.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<at.length;P++){var nt=at[P];nt.element.scrollLeft=nt.left,nt.element.scrollTop=nt.top}}Sf=!!eg,ng=eg=null}finally{me=d,pt.p=h,X.T=l}}i.current=s,In=2}}function p1(){if(In===2){In=0;var i=oa,s=yl,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=X.T,X.T=null;var h=pt.p;pt.p=2;var d=me;me|=4;try{GT(i,s.alternate,s)}finally{me=d,pt.p=h,X.T=l}}In=3}}function g1(){if(In===4||In===3){In=0,Xi();var i=oa,s=yl,l=_l,h=r1;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?In=5:(In=0,yl=oa=null,y1(i,i.pendingLanes));var d=i.pendingLanes;if(d===0&&(aa=null),Ya(l),s=s.stateNode,sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Yr,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=X.T,d=pt.p,pt.p=2,X.T=null;try{for(var _=i.onRecoverableError,S=0;S<h.length;S++){var P=h[S];_(P.value,{componentStack:P.stack})}}finally{X.T=s,pt.p=d}}(_l&3)!==0&&ff(),Pi(i),d=i.pendingLanes,(l&4194090)!==0&&(d&42)!==0?i===Fp?cc++:(cc=0,Fp=i):cc=0,hc(0)}}function y1(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,qu(s)))}function ff(i){return m1(),p1(),g1(),_1()}function _1(){if(In!==5)return!1;var i=oa,s=$p;$p=0;var l=Ya(_l),h=X.T,d=pt.p;try{pt.p=32>l?32:l,X.T=null,l=Bp,Bp=null;var _=oa,S=_l;if(In=0,yl=oa=null,_l=0,(me&6)!==0)throw Error(r(331));var P=me;if(me|=4,e1(_.current),JT(_,_.current,S,l),me=P,hc(0,!1),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Yr,_)}catch{}return!0}finally{pt.p=d,X.T=h,y1(i,s)}}function v1(i,s,l){s=Ur(l,s),s=vp(i.stateNode,s,2),i=Ws(i,s,2),i!==null&&(Qt(i,2),Pi(i))}function Ee(i,s,l){if(i.tag===3)v1(i,i,l);else for(;s!==null;){if(s.tag===3){v1(s,i,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(aa===null||!aa.has(h))){i=Ur(l,i),l=wT(2),h=Ws(s,l,2),h!==null&&(ST(l,h,s,i),Qt(h,2),Pi(h));break}}s=s.return}}function Hp(i,s,l){var h=i.pingCache;if(h===null){h=i.pingCache=new W2;var d=new Set;h.set(s,d)}else d=h.get(s),d===void 0&&(d=new Set,h.set(s,d));d.has(l)||(Mp=!0,d.add(l),i=nD.bind(null,i,s,l),s.then(i,i))}function nD(i,s,l){var h=i.pingCache;h!==null&&h.delete(s),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Ae===i&&(ne&l)===l&&(Le===4||Le===3&&(ne&62914560)===ne&&300>un()-Up?(me&2)===0&&vl(i,0):kp|=l,gl===ne&&(gl=0)),Pi(i)}function E1(i,s){s===0&&(s=tr()),i=el(i,s),i!==null&&(Qt(i,s),Pi(i))}function rD(i){var s=i.memoizedState,l=0;s!==null&&(l=s.retryLane),E1(i,l)}function iD(i,s){var l=0;switch(i.tag){case 13:var h=i.stateNode,d=i.memoizedState;d!==null&&(l=d.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(s),E1(i,l)}function sD(i,s){return Kr(i,s)}var df=null,Tl=null,Gp=!1,mf=!1,Qp=!1,Io=0;function Pi(i){i!==Tl&&i.next===null&&(Tl===null?df=Tl=i:Tl=Tl.next=i),mf=!0,Gp||(Gp=!0,oD())}function hc(i,s){if(!Qp&&mf){Qp=!0;do for(var l=!1,h=df;h!==null;){if(i!==0){var d=h.pendingLanes;if(d===0)var _=0;else{var S=h.suspendedLanes,P=h.pingedLanes;_=(1<<31-Tn(42|i)+1)-1,_&=d&~(S&~P),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,S1(h,_))}else _=ne,_=qe(h,h===Ae?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(_&3)===0||Xr(h,_)||(l=!0,S1(h,_));h=h.next}while(l);Qp=!1}}function aD(){T1()}function T1(){mf=Gp=!1;var i=0;Io!==0&&(pD()&&(i=Io),Io=0);for(var s=un(),l=null,h=df;h!==null;){var d=h.next,_=A1(h,s);_===0?(h.next=null,l===null?df=d:l.next=d,d===null&&(Tl=l)):(l=h,(i!==0||(_&3)!==0)&&(mf=!0)),h=d}hc(i)}function A1(i,s){for(var l=i.suspendedLanes,h=i.pingedLanes,d=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var S=31-Tn(_),P=1<<S,k=d[S];k===-1?((P&l)===0||(P&h)!==0)&&(d[S]=Wr(P,s)):k<=s&&(i.expiredLanes|=P),_&=~P}if(s=Ae,l=ne,l=qe(i,i===s?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===s&&(pe===2||pe===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Yi(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Xr(i,l)){if(s=l&-l,s===i.callbackPriority)return s;switch(h!==null&&Yi(h),Ya(l)){case 2:case 8:l=te;break;case 32:l=Zn;break;case 268435456:l=$s;break;default:l=Zn}return h=w1.bind(null,i),l=Kr(l,h),i.callbackPriority=s,i.callbackNode=l,s}return h!==null&&h!==null&&Yi(h),i.callbackPriority=2,i.callbackNode=null,2}function w1(i,s){if(In!==0&&In!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(ff()&&i.callbackNode!==l)return null;var h=ne;return h=qe(i,i===Ae?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(s1(i,h,s),A1(i,un()),i.callbackNode!=null&&i.callbackNode===l?w1.bind(null,i):null)}function S1(i,s){if(ff())return null;s1(i,s,!0)}function oD(){yD(function(){(me&6)!==0?Kr(Xt,aD):T1()})}function Kp(){return Io===0&&(Io=Bs()),Io}function I1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:fn(""+i)}function R1(i,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,i.id&&l.setAttribute("form",i.id),s.parentNode.insertBefore(l,s),i=new FormData(i),l.parentNode.removeChild(l),i}function lD(i,s,l,h,d){if(s==="submit"&&l&&l.stateNode===d){var _=I1((d[He]||null).action),S=h.submitter;S&&(s=(s=S[He]||null)?I1(s.formAction):S.getAttribute("formAction"),s!==null&&(_=s,S=null));var P=new Ii("action","action",null,h,d);i.push({event:P,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Io!==0){var k=S?R1(d,S):new FormData(d);mp(l,{pending:!0,data:k,method:d.method,action:_},null,k)}}else typeof _=="function"&&(P.preventDefault(),k=S?R1(d,S):new FormData(d),mp(l,{pending:!0,data:k,method:d.method,action:_},_,k))},currentTarget:d}]})}}for(var Yp=0;Yp<Om.length;Yp++){var Xp=Om[Yp],uD=Xp.toLowerCase(),cD=Xp[0].toUpperCase()+Xp.slice(1);li(uD,"on"+cD)}li(sE,"onAnimationEnd"),li(aE,"onAnimationIteration"),li(oE,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(b2,"onTransitionRun"),li(C2,"onTransitionStart"),li(D2,"onTransitionCancel"),li(lE,"onTransitionEnd"),sr("onMouseEnter",["mouseout","mouseover"]),sr("onMouseLeave",["mouseout","mouseover"]),sr("onPointerEnter",["pointerout","pointerover"]),sr("onPointerLeave",["pointerout","pointerover"]),yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yr("onBeforeInput",["compositionend","keypress","textInput","paste"]),yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fc));function b1(i,s){s=(s&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],d=h.event;h=h.listeners;t:{var _=void 0;if(s)for(var S=h.length-1;0<=S;S--){var P=h[S],k=P.instance,H=P.currentTarget;if(P=P.listener,k!==_&&d.isPropagationStopped())break t;_=P,d.currentTarget=H;try{_(d)}catch(Z){tf(Z)}d.currentTarget=null,_=k}else for(S=0;S<h.length;S++){if(P=h[S],k=P.instance,H=P.currentTarget,P=P.listener,k!==_&&d.isPropagationStopped())break t;_=P,d.currentTarget=H;try{_(d)}catch(Z){tf(Z)}d.currentTarget=null,_=k}}}}function Yt(i,s){var l=s[Jr];l===void 0&&(l=s[Jr]=new Set);var h=i+"__bubble";l.has(h)||(C1(s,i,2,!1),l.add(h))}function Wp(i,s,l){var h=0;s&&(h|=4),C1(l,i,h,s)}var pf="_reactListening"+Math.random().toString(36).slice(2);function Jp(i){if(!i[pf]){i[pf]=!0,Qo.forEach(function(l){l!=="selectionchange"&&(hD.has(l)||Wp(l,!1,i),Wp(l,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[pf]||(s[pf]=!0,Wp("selectionchange",!1,s))}}function C1(i,s,l,h){switch(J1(s)){case 2:var d=UD;break;case 8:d=$D;break;default:d=fg}l=d.bind(null,s,l,i),d=void 0,!Yn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),h?d!==void 0?i.addEventListener(s,l,{capture:!0,passive:d}):i.addEventListener(s,l,!0):d!==void 0?i.addEventListener(s,l,{passive:d}):i.addEventListener(s,l,!1)}function Zp(i,s,l,h,d){var _=h;if((s&1)===0&&(s&2)===0&&h!==null)t:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var P=h.stateNode.containerInfo;if(P===d)break;if(S===4)for(S=h.return;S!==null;){var k=S.tag;if((k===3||k===4)&&S.stateNode.containerInfo===d)return;S=S.return}for(;P!==null;){if(S=rr(P),S===null)return;if(k=S.tag,k===5||k===6||k===26||k===27){h=_=S;continue t}P=P.parentNode}}h=h.return}kr(function(){var H=_,Z=eo(l),at=[];t:{var Q=uE.get(i);if(Q!==void 0){var K=Ii,Pt=i;switch(i){case"keypress":if(wi(l)===0)break t;case"keydown":case"keyup":K=oi;break;case"focusin":Pt="focus",K=is;break;case"focusout":Pt="blur",K=is;break;case"beforeblur":case"afterblur":K=is;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Lr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=no;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Wn;break;case sE:case aE:case oE:K=ss;break;case lE:K=f;break;case"scroll":case"scrollend":K=Tr;break;case"wheel":K=v;break;case"copy":case"cut":case"paste":K=io;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Qs;break;case"toggle":case"beforetoggle":K=x}var bt=(s&4)!==0,ve=!bt&&(i==="scroll"||i==="scrollend"),j=bt?Q!==null?Q+"Capture":null:Q;bt=[];for(var L=H,q;L!==null;){var nt=L;if(q=nt.stateNode,nt=nt.tag,nt!==5&&nt!==26&&nt!==27||q===null||j===null||(nt=ri(L,j),nt!=null&&bt.push(dc(L,nt,q))),ve)break;L=L.return}0<bt.length&&(Q=new K(Q,Pt,null,l,Z),at.push({event:Q,listeners:bt}))}}if((s&7)===0){t:{if(Q=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",Q&&l!==to&&(Pt=l.relatedTarget||l.fromElement)&&(rr(Pt)||Pt[Nr]))break t;if((K||Q)&&(Q=Z.window===Z?Z:(Q=Z.ownerDocument)?Q.defaultView||Q.parentWindow:window,K?(Pt=l.relatedTarget||l.toElement,K=H,Pt=Pt?rr(Pt):null,Pt!==null&&(ve=u(Pt),bt=Pt.tag,Pt!==ve||bt!==5&&bt!==27&&bt!==6)&&(Pt=null)):(K=null,Pt=H),K!==Pt)){if(bt=Lr,nt="onMouseLeave",j="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(bt=Qs,nt="onPointerLeave",j="onPointerEnter",L="pointer"),ve=K==null?Q:ti(K),q=Pt==null?Q:ti(Pt),Q=new bt(nt,L+"leave",K,l,Z),Q.target=ve,Q.relatedTarget=q,nt=null,rr(Z)===H&&(bt=new bt(j,L+"enter",Pt,l,Z),bt.target=q,bt.relatedTarget=ve,nt=bt),ve=nt,K&&Pt)e:{for(bt=K,j=Pt,L=0,q=bt;q;q=Al(q))L++;for(q=0,nt=j;nt;nt=Al(nt))q++;for(;0<L-q;)bt=Al(bt),L--;for(;0<q-L;)j=Al(j),q--;for(;L--;){if(bt===j||j!==null&&bt===j.alternate)break e;bt=Al(bt),j=Al(j)}bt=null}else bt=null;K!==null&&D1(at,Q,K,bt,!1),Pt!==null&&ve!==null&&D1(at,ve,Pt,bt,!0)}}t:{if(Q=H?ti(H):window,K=Q.nodeName&&Q.nodeName.toLowerCase(),K==="select"||K==="input"&&Q.type==="file")var _t=Kv;else if(Gv(Q))if(Yv)_t=S2;else{_t=A2;var Gt=T2}else K=Q.nodeName,!K||K.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?H&&es(H.elementType)&&(_t=Kv):_t=w2;if(_t&&(_t=_t(i,H))){Qv(at,_t,l,Z);break t}Gt&&Gt(i,Q,H),i==="focusout"&&H&&Q.type==="number"&&H.memoizedProps.value!=null&&Wa(Q,"number",Q.value)}switch(Gt=H?ti(H):window,i){case"focusin":(Gv(Gt)||Gt.contentEditable==="true")&&(Jo=Gt,Vm=H,$u=null);break;case"focusout":$u=Vm=Jo=null;break;case"mousedown":Pm=!0;break;case"contextmenu":case"mouseup":case"dragend":Pm=!1,rE(at,l,Z);break;case"selectionchange":if(R2)break;case"keydown":case"keyup":rE(at,l,Z)}var St;if(mt)t:{switch(i){case"compositionstart":var Dt="onCompositionStart";break t;case"compositionend":Dt="onCompositionEnd";break t;case"compositionupdate":Dt="onCompositionUpdate";break t}Dt=void 0}else Mn?Ke(i,l)&&(Dt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Dt="onCompositionStart");Dt&&(Ft&&l.locale!=="ko"&&(Mn||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&Mn&&(St=Wo()):(xn=Z,Vt="value"in xn?xn.value:xn.textContent,Mn=!0)),Gt=gf(H,Dt),0<Gt.length&&(Dt=new Gs(Dt,i,null,l,Z),at.push({event:Dt,listeners:Gt}),St?Dt.data=St:(St=Ye(l),St!==null&&(Dt.data=St)))),(St=wt?ls(i,l):_2(i,l))&&(Dt=gf(H,"onBeforeInput"),0<Dt.length&&(Gt=new Gs("onBeforeInput","beforeinput",null,l,Z),at.push({event:Gt,listeners:Dt}),Gt.data=St)),lD(at,i,H,l,Z)}b1(at,s)})}function dc(i,s,l){return{instance:i,listener:s,currentTarget:l}}function gf(i,s){for(var l=s+"Capture",h=[];i!==null;){var d=i,_=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||_===null||(d=ri(i,l),d!=null&&h.unshift(dc(i,d,_)),d=ri(i,s),d!=null&&h.push(dc(i,d,_))),i.tag===3)return h;i=i.return}return[]}function Al(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function D1(i,s,l,h,d){for(var _=s._reactName,S=[];l!==null&&l!==h;){var P=l,k=P.alternate,H=P.stateNode;if(P=P.tag,k!==null&&k===h)break;P!==5&&P!==26&&P!==27||H===null||(k=H,d?(H=ri(l,_),H!=null&&S.unshift(dc(l,H,k))):d||(H=ri(l,_),H!=null&&S.push(dc(l,H,k)))),l=l.return}S.length!==0&&i.push({event:s,listeners:S})}var fD=/\r\n?/g,dD=/\u0000|\uFFFD/g;function V1(i){return(typeof i=="string"?i:""+i).replace(fD,`
`).replace(dD,"")}function P1(i,s){return s=V1(s),V1(i)===s}function yf(){}function _e(i,s,l,h,d,_){switch(l){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||hn(i,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&hn(i,""+h);break;case"className":vi(i,"class",h);break;case"tabIndex":vi(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":vi(i,l,h);break;case"style":zs(i,h,_);break;case"data":if(s!=="object"){vi(i,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=fn(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(s!=="input"&&_e(i,s,"name",d.name,d,null),_e(i,s,"formEncType",d.formEncType,d,null),_e(i,s,"formMethod",d.formMethod,d,null),_e(i,s,"formTarget",d.formTarget,d,null)):(_e(i,s,"encType",d.encType,d,null),_e(i,s,"method",d.method,d,null),_e(i,s,"target",d.target,d,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=fn(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=yf);break;case"onScroll":h!=null&&Yt("scroll",i);break;case"onScrollEnd":h!=null&&Yt("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(d.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=fn(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":Yt("beforetoggle",i),Yt("toggle",i),_i(i,"popover",h);break;case"xlinkActuate":Kn(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Kn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Kn(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Kn(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Kn(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Kn(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Kn(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Kn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Kn(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":_i(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Ja.get(l)||l,_i(i,l,h))}}function tg(i,s,l,h,d,_){switch(l){case"style":zs(i,h,_);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(d.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof h=="string"?hn(i,h):(typeof h=="number"||typeof h=="bigint")&&hn(i,""+h);break;case"onScroll":h!=null&&Yt("scroll",i);break;case"onScrollEnd":h!=null&&Yt("scrollend",i);break;case"onClick":h!=null&&(i.onclick=yf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Or.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(d=l.endsWith("Capture"),s=l.slice(2,d?l.length-7:void 0),_=i[He]||null,_=_!=null?_[l]:null,typeof _=="function"&&i.removeEventListener(s,_,d),typeof h=="function")){typeof _!="function"&&_!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(s,h,d);break t}l in i?i[l]=h:h===!0?i.setAttribute(l,""):_i(i,l,h)}}}function Rn(i,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",i),Yt("load",i);var h=!1,d=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var S=l[_];if(S!=null)switch(_){case"src":h=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:_e(i,s,_,S,l,null)}}d&&_e(i,s,"srcSet",l.srcSet,l,null),h&&_e(i,s,"src",l.src,l,null);return;case"input":Yt("invalid",i);var P=_=S=d=null,k=null,H=null;for(h in l)if(l.hasOwnProperty(h)){var Z=l[h];if(Z!=null)switch(h){case"name":d=Z;break;case"type":S=Z;break;case"checked":k=Z;break;case"defaultChecked":H=Z;break;case"value":_=Z;break;case"defaultValue":P=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:_e(i,s,h,Z,l,null)}}Fs(i,_,P,k,H,S,d,!1),Mr(i);return;case"select":Yt("invalid",i),h=S=_=null;for(d in l)if(l.hasOwnProperty(d)&&(P=l[d],P!=null))switch(d){case"value":_=P;break;case"defaultValue":S=P;break;case"multiple":h=P;default:_e(i,s,d,P,l,null)}s=_,l=S,i.multiple=!!h,s!=null?Ti(i,!!h,s,!1):l!=null&&Ti(i,!!h,l,!0);return;case"textarea":Yt("invalid",i),_=d=h=null;for(S in l)if(l.hasOwnProperty(S)&&(P=l[S],P!=null))switch(S){case"value":h=P;break;case"defaultValue":d=P;break;case"children":_=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(r(91));break;default:_e(i,s,S,P,l,null)}Yo(i,h,d,_),Mr(i);return;case"option":for(k in l)if(l.hasOwnProperty(k)&&(h=l[k],h!=null))switch(k){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:_e(i,s,k,h,l,null)}return;case"dialog":Yt("beforetoggle",i),Yt("toggle",i),Yt("cancel",i),Yt("close",i);break;case"iframe":case"object":Yt("load",i);break;case"video":case"audio":for(h=0;h<fc.length;h++)Yt(fc[h],i);break;case"image":Yt("error",i),Yt("load",i);break;case"details":Yt("toggle",i);break;case"embed":case"source":case"link":Yt("error",i),Yt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in l)if(l.hasOwnProperty(H)&&(h=l[H],h!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:_e(i,s,H,h,l,null)}return;default:if(es(s)){for(Z in l)l.hasOwnProperty(Z)&&(h=l[Z],h!==void 0&&tg(i,s,Z,h,l,void 0));return}}for(P in l)l.hasOwnProperty(P)&&(h=l[P],h!=null&&_e(i,s,P,h,l,null))}function mD(i,s,l,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,_=null,S=null,P=null,k=null,H=null,Z=null;for(K in l){var at=l[K];if(l.hasOwnProperty(K)&&at!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":k=at;default:h.hasOwnProperty(K)||_e(i,s,K,null,h,at)}}for(var Q in h){var K=h[Q];if(at=l[Q],h.hasOwnProperty(Q)&&(K!=null||at!=null))switch(Q){case"type":_=K;break;case"name":d=K;break;case"checked":H=K;break;case"defaultChecked":Z=K;break;case"value":S=K;break;case"defaultValue":P=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,s));break;default:K!==at&&_e(i,s,Q,K,h,at)}}Xa(i,S,P,k,H,Z,_,d);return;case"select":K=S=P=Q=null;for(_ in l)if(k=l[_],l.hasOwnProperty(_)&&k!=null)switch(_){case"value":break;case"multiple":K=k;default:h.hasOwnProperty(_)||_e(i,s,_,null,h,k)}for(d in h)if(_=h[d],k=l[d],h.hasOwnProperty(d)&&(_!=null||k!=null))switch(d){case"value":Q=_;break;case"defaultValue":P=_;break;case"multiple":S=_;default:_!==k&&_e(i,s,d,_,h,k)}s=P,l=S,h=K,Q!=null?Ti(i,!!l,Q,!1):!!h!=!!l&&(s!=null?Ti(i,!!l,s,!0):Ti(i,!!l,l?[]:"",!1));return;case"textarea":K=Q=null;for(P in l)if(d=l[P],l.hasOwnProperty(P)&&d!=null&&!h.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:_e(i,s,P,null,h,d)}for(S in h)if(d=h[S],_=l[S],h.hasOwnProperty(S)&&(d!=null||_!=null))switch(S){case"value":Q=d;break;case"defaultValue":K=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==_&&_e(i,s,S,d,h,_)}Ko(i,Q,K);return;case"option":for(var Pt in l)if(Q=l[Pt],l.hasOwnProperty(Pt)&&Q!=null&&!h.hasOwnProperty(Pt))switch(Pt){case"selected":i.selected=!1;break;default:_e(i,s,Pt,null,h,Q)}for(k in h)if(Q=h[k],K=l[k],h.hasOwnProperty(k)&&Q!==K&&(Q!=null||K!=null))switch(k){case"selected":i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:_e(i,s,k,Q,h,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var bt in l)Q=l[bt],l.hasOwnProperty(bt)&&Q!=null&&!h.hasOwnProperty(bt)&&_e(i,s,bt,null,h,Q);for(H in h)if(Q=h[H],K=l[H],h.hasOwnProperty(H)&&Q!==K&&(Q!=null||K!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,s));break;default:_e(i,s,H,Q,h,K)}return;default:if(es(s)){for(var ve in l)Q=l[ve],l.hasOwnProperty(ve)&&Q!==void 0&&!h.hasOwnProperty(ve)&&tg(i,s,ve,void 0,h,Q);for(Z in h)Q=h[Z],K=l[Z],!h.hasOwnProperty(Z)||Q===K||Q===void 0&&K===void 0||tg(i,s,Z,Q,h,K);return}}for(var j in l)Q=l[j],l.hasOwnProperty(j)&&Q!=null&&!h.hasOwnProperty(j)&&_e(i,s,j,null,h,Q);for(at in h)Q=h[at],K=l[at],!h.hasOwnProperty(at)||Q===K||Q==null&&K==null||_e(i,s,at,Q,h,K)}var eg=null,ng=null;function _f(i){return i.nodeType===9?i:i.ownerDocument}function N1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function O1(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function rg(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ig=null;function pD(){var i=window.event;return i&&i.type==="popstate"?i===ig?!1:(ig=i,!0):(ig=null,!1)}var x1=typeof setTimeout=="function"?setTimeout:void 0,gD=typeof clearTimeout=="function"?clearTimeout:void 0,M1=typeof Promise=="function"?Promise:void 0,yD=typeof queueMicrotask=="function"?queueMicrotask:typeof M1<"u"?function(i){return M1.resolve(null).then(i).catch(_D)}:x1;function _D(i){setTimeout(function(){throw i})}function ua(i){return i==="head"}function k1(i,s){var l=s,h=0,d=0;do{var _=l.nextSibling;if(i.removeChild(l),_&&_.nodeType===8)if(l=_.data,l==="/$"){if(0<h&&8>h){l=h;var S=i.ownerDocument;if(l&1&&mc(S.documentElement),l&2&&mc(S.body),l&4)for(l=S.head,mc(l),S=l.firstChild;S;){var P=S.nextSibling,k=S.nodeName;S[Zr]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&S.rel.toLowerCase()==="stylesheet"||l.removeChild(S),S=P}}if(d===0){i.removeChild(_),Ac(s);return}d--}else l==="$"||l==="$?"||l==="$!"?d++:h=l.charCodeAt(0)-48;else h=0;l=_}while(l);Ac(s)}function sg(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":sg(l),Ji(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function vD(i,s,l,h){for(;i.nodeType===1;){var d=l;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Zr])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==d.rel||i.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||i.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||i.getAttribute("title")!==(d.title==null?null:d.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(d.src==null?null:d.src)||i.getAttribute("type")!==(d.type==null?null:d.type)||i.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var _=d.name==null?null:""+d.name;if(d.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=ci(i.nextSibling),i===null)break}return null}function ED(i,s,l){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=ci(i.nextSibling),i===null))return null;return i}function ag(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function TD(i,s){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")s();else{var h=function(){s(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function ci(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var og=null;function L1(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return i;s--}else l==="/$"&&s++}i=i.previousSibling}return null}function U1(i,s,l){switch(s=_f(l),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function mc(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Ji(i)}var qr=new Map,$1=new Set;function vf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ts=pt.d;pt.d={f:AD,r:wD,D:SD,C:ID,L:RD,m:bD,X:DD,S:CD,M:VD};function AD(){var i=Ts.f(),s=cf();return i||s}function wD(i){var s=ir(i);s!==null&&s.tag===5&&s.type==="form"?sT(s):Ts.r(i)}var wl=typeof document>"u"?null:document;function B1(i,s,l){var h=wl;if(h&&typeof s=="string"&&s){var d=Ie(s);d='link[rel="'+i+'"][href="'+d+'"]',typeof l=="string"&&(d+='[crossorigin="'+l+'"]'),$1.has(d)||($1.add(d),i={rel:i,crossOrigin:l,href:s},h.querySelector(d)===null&&(s=h.createElement("link"),Rn(s,"link",i),Se(s),h.head.appendChild(s)))}}function SD(i){Ts.D(i),B1("dns-prefetch",i,null)}function ID(i,s){Ts.C(i,s),B1("preconnect",i,s)}function RD(i,s,l){Ts.L(i,s,l);var h=wl;if(h&&i&&s){var d='link[rel="preload"][as="'+Ie(s)+'"]';s==="image"&&l&&l.imageSrcSet?(d+='[imagesrcset="'+Ie(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(d+='[imagesizes="'+Ie(l.imageSizes)+'"]')):d+='[href="'+Ie(i)+'"]';var _=d;switch(s){case"style":_=Sl(i);break;case"script":_=Il(i)}qr.has(_)||(i=E({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:i,as:s},l),qr.set(_,i),h.querySelector(d)!==null||s==="style"&&h.querySelector(pc(_))||s==="script"&&h.querySelector(gc(_))||(s=h.createElement("link"),Rn(s,"link",i),Se(s),h.head.appendChild(s)))}}function bD(i,s){Ts.m(i,s);var l=wl;if(l&&i){var h=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+Ie(h)+'"][href="'+Ie(i)+'"]',_=d;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Il(i)}if(!qr.has(_)&&(i=E({rel:"modulepreload",href:i},s),qr.set(_,i),l.querySelector(d)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(gc(_)))return}h=l.createElement("link"),Rn(h,"link",i),Se(h),l.head.appendChild(h)}}}function CD(i,s,l){Ts.S(i,s,l);var h=wl;if(h&&i){var d=gi(h).hoistableStyles,_=Sl(i);s=s||"default";var S=d.get(_);if(!S){var P={loading:0,preload:null};if(S=h.querySelector(pc(_)))P.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":s},l),(l=qr.get(_))&&lg(i,l);var k=S=h.createElement("link");Se(k),Rn(k,"link",i),k._p=new Promise(function(H,Z){k.onload=H,k.onerror=Z}),k.addEventListener("load",function(){P.loading|=1}),k.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Ef(S,s,h)}S={type:"stylesheet",instance:S,count:1,state:P},d.set(_,S)}}}function DD(i,s){Ts.X(i,s);var l=wl;if(l&&i){var h=gi(l).hoistableScripts,d=Il(i),_=h.get(d);_||(_=l.querySelector(gc(d)),_||(i=E({src:i,async:!0},s),(s=qr.get(d))&&ug(i,s),_=l.createElement("script"),Se(_),Rn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(d,_))}}function VD(i,s){Ts.M(i,s);var l=wl;if(l&&i){var h=gi(l).hoistableScripts,d=Il(i),_=h.get(d);_||(_=l.querySelector(gc(d)),_||(i=E({src:i,async:!0,type:"module"},s),(s=qr.get(d))&&ug(i,s),_=l.createElement("script"),Se(_),Rn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(d,_))}}function F1(i,s,l,h){var d=(d=dt.current)?vf(d):null;if(!d)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Sl(l.href),l=gi(d).hoistableStyles,h=l.get(s),h||(h={type:"style",instance:null,count:0,state:null},l.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Sl(l.href);var _=gi(d).hoistableStyles,S=_.get(i);if(S||(d=d.ownerDocument||d,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,S),(_=d.querySelector(pc(i)))&&!_._p&&(S.instance=_,S.state.loading=5),qr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},qr.set(i,l),_||PD(d,i,l,S.state))),s&&h===null)throw Error(r(528,""));return S}if(s&&h!==null)throw Error(r(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Il(l),l=gi(d).hoistableScripts,h=l.get(s),h||(h={type:"script",instance:null,count:0,state:null},l.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Sl(i){return'href="'+Ie(i)+'"'}function pc(i){return'link[rel="stylesheet"]['+i+"]"}function j1(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function PD(i,s,l,h){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=i.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),Rn(s,"link",l),Se(s),i.head.appendChild(s))}function Il(i){return'[src="'+Ie(i)+'"]'}function gc(i){return"script[async]"+i}function z1(i,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var h=i.querySelector('style[data-href~="'+Ie(l.href)+'"]');if(h)return s.instance=h,Se(h),h;var d=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Se(h),Rn(h,"style",d),Ef(h,l.precedence,i),s.instance=h;case"stylesheet":d=Sl(l.href);var _=i.querySelector(pc(d));if(_)return s.state.loading|=4,s.instance=_,Se(_),_;h=j1(l),(d=qr.get(d))&&lg(h,d),_=(i.ownerDocument||i).createElement("link"),Se(_);var S=_;return S._p=new Promise(function(P,k){S.onload=P,S.onerror=k}),Rn(_,"link",h),s.state.loading|=4,Ef(_,l.precedence,i),s.instance=_;case"script":return _=Il(l.src),(d=i.querySelector(gc(_)))?(s.instance=d,Se(d),d):(h=l,(d=qr.get(_))&&(h=E({},l),ug(h,d)),i=i.ownerDocument||i,d=i.createElement("script"),Se(d),Rn(d,"link",h),i.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,Ef(h,l.precedence,i));return s.instance}function Ef(i,s,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=h.length?h[h.length-1]:null,_=d,S=0;S<h.length;S++){var P=h[S];if(P.dataset.precedence===s)_=P;else if(_!==d)break}_?_.parentNode.insertBefore(i,_.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(i,s.firstChild))}function lg(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function ug(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Tf=null;function q1(i,s,l){if(Tf===null){var h=new Map,d=Tf=new Map;d.set(l,h)}else d=Tf,h=d.get(l),h||(h=new Map,d.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),d=0;d<l.length;d++){var _=l[d];if(!(_[Zr]||_[Te]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var S=_.getAttribute(s)||"";S=i+S;var P=h.get(S);P?P.push(_):h.set(S,[_])}}return h}function H1(i,s,l){i=i.ownerDocument||i,i.head.insertBefore(l,s==="title"?i.querySelector("head > title"):null)}function ND(i,s,l){if(l===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function G1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var yc=null;function OD(){}function xD(i,s,l){if(yc===null)throw Error(r(475));var h=yc;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=Sl(l.href),_=i.querySelector(pc(d));if(_){i=_._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(h.count++,h=Af.bind(h),i.then(h,h)),s.state.loading|=4,s.instance=_,Se(_);return}_=i.ownerDocument||i,l=j1(l),(d=qr.get(d))&&lg(l,d),_=_.createElement("link"),Se(_);var S=_;S._p=new Promise(function(P,k){S.onload=P,S.onerror=k}),Rn(_,"link",l),s.instance=_}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(h.count++,s=Af.bind(h),i.addEventListener("load",s),i.addEventListener("error",s))}}function MD(){if(yc===null)throw Error(r(475));var i=yc;return i.stylesheets&&i.count===0&&cg(i,i.stylesheets),0<i.count?function(s){var l=setTimeout(function(){if(i.stylesheets&&cg(i,i.stylesheets),i.unsuspend){var h=i.unsuspend;i.unsuspend=null,h()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(l)}}:null}function Af(){if(this.count--,this.count===0){if(this.stylesheets)cg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var wf=null;function cg(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,wf=new Map,s.forEach(kD,i),wf=null,Af.call(i))}function kD(i,s){if(!(s.state.loading&4)){var l=wf.get(i);if(l)var h=l.get(null);else{l=new Map,wf.set(i,l);for(var d=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<d.length;_++){var S=d[_];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),h=S)}h&&l.set(null,h)}d=s.instance,S=d.getAttribute("data-precedence"),_=l.get(S)||h,_===h&&l.set(null,d),l.set(S,d),this.count++,h=Af.bind(this),d.addEventListener("load",h),d.addEventListener("error",h),_?_.parentNode.insertBefore(d,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(d,i.firstChild)),s.state.loading|=4}}var _c={$$typeof:it,Provider:null,Consumer:null,_currentValue:Tt,_currentValue2:Tt,_threadCount:0};function LD(i,s,l,h,d,_,S,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wi(0),this.hiddenUpdates=Wi(null),this.identifierPrefix=h,this.onUncaughtError=d,this.onCaughtError=_,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function Q1(i,s,l,h,d,_,S,P,k,H,Z,at){return i=new LD(i,s,l,S,P,k,H,at),s=1,_===!0&&(s|=24),_=Sr(3,null,null,s),i.current=_,_.stateNode=i,s=Hm(),s.refCount++,i.pooledCache=s,s.refCount++,_.memoizedState={element:h,isDehydrated:l,cache:s},Ym(_),i}function K1(i){return i?(i=nl,i):nl}function Y1(i,s,l,h,d,_){d=K1(d),h.context===null?h.context=d:h.pendingContext=d,h=Xs(s),h.payload={element:l},_=_===void 0?null:_,_!==null&&(h.callback=_),l=Ws(i,h,s),l!==null&&(Dr(l,i,s),Ku(l,i,s))}function X1(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<s?l:s}}function hg(i,s){X1(i,s),(i=i.alternate)&&X1(i,s)}function W1(i){if(i.tag===13){var s=el(i,67108864);s!==null&&Dr(s,i,67108864),hg(i,67108864)}}var Sf=!0;function UD(i,s,l,h){var d=X.T;X.T=null;var _=pt.p;try{pt.p=2,fg(i,s,l,h)}finally{pt.p=_,X.T=d}}function $D(i,s,l,h){var d=X.T;X.T=null;var _=pt.p;try{pt.p=8,fg(i,s,l,h)}finally{pt.p=_,X.T=d}}function fg(i,s,l,h){if(Sf){var d=dg(h);if(d===null)Zp(i,s,h,If,l),Z1(i,h);else if(FD(d,i,s,l,h))h.stopPropagation();else if(Z1(i,h),s&4&&-1<BD.indexOf(i)){for(;d!==null;){var _=ir(d);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var S=Qn(_.pendingLanes);if(S!==0){var P=_;for(P.pendingLanes|=2,P.entangledLanes|=2;S;){var k=1<<31-Tn(S);P.entanglements[1]|=k,S&=~k}Pi(_),(me&6)===0&&(lf=un()+500,hc(0))}}break;case 13:P=el(_,2),P!==null&&Dr(P,_,2),cf(),hg(_,2)}if(_=dg(h),_===null&&Zp(i,s,h,If,l),_===d)break;d=_}d!==null&&h.stopPropagation()}else Zp(i,s,h,null,l)}}function dg(i){return i=eo(i),mg(i)}var If=null;function mg(i){if(If=null,i=rr(i),i!==null){var s=u(i);if(s===null)i=null;else{var l=s.tag;if(l===13){if(i=c(s),i!==null)return i;i=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return If=i,null}function J1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qa()){case Xt:return 2;case te:return 8;case Zn:case Cu:return 32;case $s:return 268435456;default:return 32}default:return 32}}var pg=!1,ca=null,ha=null,fa=null,vc=new Map,Ec=new Map,da=[],BD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Z1(i,s){switch(i){case"focusin":case"focusout":ca=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":fa=null;break;case"pointerover":case"pointerout":vc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ec.delete(s.pointerId)}}function Tc(i,s,l,h,d,_){return i===null||i.nativeEvent!==_?(i={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:_,targetContainers:[d]},s!==null&&(s=ir(s),s!==null&&W1(s)),i):(i.eventSystemFlags|=h,s=i.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),i)}function FD(i,s,l,h,d){switch(s){case"focusin":return ca=Tc(ca,i,s,l,h,d),!0;case"dragenter":return ha=Tc(ha,i,s,l,h,d),!0;case"mouseover":return fa=Tc(fa,i,s,l,h,d),!0;case"pointerover":var _=d.pointerId;return vc.set(_,Tc(vc.get(_)||null,i,s,l,h,d)),!0;case"gotpointercapture":return _=d.pointerId,Ec.set(_,Tc(Ec.get(_)||null,i,s,l,h,d)),!0}return!1}function t0(i){var s=rr(i.target);if(s!==null){var l=u(s);if(l!==null){if(s=l.tag,s===13){if(s=c(l),s!==null){i.blockedOn=s,Pu(i.priority,function(){if(l.tag===13){var h=Cr();h=Ka(h);var d=el(l,h);d!==null&&Dr(d,l,h),hg(l,h)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Rf(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var l=dg(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);to=h,l.target.dispatchEvent(h),to=null}else return s=ir(l),s!==null&&W1(s),i.blockedOn=l,!1;s.shift()}return!0}function e0(i,s,l){Rf(i)&&l.delete(s)}function jD(){pg=!1,ca!==null&&Rf(ca)&&(ca=null),ha!==null&&Rf(ha)&&(ha=null),fa!==null&&Rf(fa)&&(fa=null),vc.forEach(e0),Ec.forEach(e0)}function bf(i,s){i.blockedOn===s&&(i.blockedOn=null,pg||(pg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,jD)))}var Cf=null;function n0(i){Cf!==i&&(Cf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Cf===i&&(Cf=null);for(var s=0;s<i.length;s+=3){var l=i[s],h=i[s+1],d=i[s+2];if(typeof h!="function"){if(mg(h||l)===null)continue;break}var _=ir(l);_!==null&&(i.splice(s,3),s-=3,mp(_,{pending:!0,data:d,method:l.method,action:h},h,d))}}))}function Ac(i){function s(k){return bf(k,i)}ca!==null&&bf(ca,i),ha!==null&&bf(ha,i),fa!==null&&bf(fa,i),vc.forEach(s),Ec.forEach(s);for(var l=0;l<da.length;l++){var h=da[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<da.length&&(l=da[0],l.blockedOn===null);)t0(l),l.blockedOn===null&&da.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var d=l[h],_=l[h+1],S=d[He]||null;if(typeof _=="function")S||n0(l);else if(S){var P=null;if(_&&_.hasAttribute("formAction")){if(d=_,S=_[He]||null)P=S.formAction;else if(mg(d)!==null)continue}else P=S.action;typeof P=="function"?l[h+1]=P:(l.splice(h,3),h-=3),n0(l)}}}function gg(i){this._internalRoot=i}Df.prototype.render=gg.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var l=s.current,h=Cr();Y1(l,h,i,s,null,null)},Df.prototype.unmount=gg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Y1(i.current,2,null,i,null,null),cf(),s[Nr]=null}};function Df(i){this._internalRoot=i}Df.prototype.unstable_scheduleHydration=function(i){if(i){var s=On();i={blockedOn:null,target:i,priority:s};for(var l=0;l<da.length&&s!==0&&s<da[l].priority;l++);da.splice(l,0,i),l===0&&t0(i)}};var r0=t.version;if(r0!=="19.1.1")throw Error(r(527,r0,"19.1.1"));pt.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=g(s),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var zD={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vf.isDisabled&&Vf.supportsFiber)try{Yr=Vf.inject(zD),sn=Vf}catch{}}return Ic.createRoot=function(i,s){if(!a(i))throw Error(r(299));var l=!1,h="",d=vT,_=ET,S=TT,P=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(P=s.unstable_transitionCallbacks)),s=Q1(i,1,!1,null,null,l,h,d,_,S,P,null),i[Nr]=s.current,Jp(i),new gg(s)},Ic.hydrateRoot=function(i,s,l){if(!a(i))throw Error(r(299));var h=!1,d="",_=vT,S=ET,P=TT,k=null,H=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(P=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(k=l.unstable_transitionCallbacks),l.formState!==void 0&&(H=l.formState)),s=Q1(i,1,!0,s,l??null,h,d,_,S,P,k,H),s.context=K1(null),l=s.current,h=Cr(),h=Ka(h),d=Xs(h),d.callback=null,Ws(l,d,h),l=h,s.current.lanes=l,Qt(s,l),Pi(s),i[Nr]=s.current,Jp(i),new Df(s)},Ic.version="19.1.1",Ic}var _0;function TP(){if(_0)return Ag.exports;_0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Ag.exports=EP(),Ag.exports}var AP=TP();const wP=HD(AP);function SP(){return st.jsxs("nav",{className:"bg-orange-200 p-4 flex justify-center gap-6 sticky top-0 z-50",children:[st.jsx(kl,{to:"/",className:"font-bold text-orange-800 hover:text-orange-600",children:"About"}),st.jsx(kl,{to:"/questions",className:"font-bold text-orange-800 hover:text-orange-600",children:"Question Bank"}),st.jsx(kl,{to:"/resources",className:"font-bold text-orange-800 hover:text-orange-600",children:"Resources"}),st.jsx(kl,{to:"/contact",className:"font-bold text-orange-800 hover:text-orange-600",children:"Contact"})]})}function uy(){const n=()=>{const e=[];for(let r=0;r<32;r++){const a=`${Math.random()*100}%`,u=`${Math.random()*5}s`,c=`${10+Math.random()*10}s`,m=.2+Math.random()*.3,g=`${10+Math.random()*30}px`;e.push(st.jsx("img",{src:"/logo.png",alt:"",className:"absolute pointer-events-none",style:{left:a,top:"-50px",width:g,height:"auto",opacity:m,animation:`fall ${c} linear ${u} infinite`,zIndex:0}},r))}return e},t=()=>{const a=[],u=["🌸","🏵️","💮","🍥"];for(let c=0;c<10;c++)for(let m=0;m<12;m++){const g=`${10+Math.random()*15}px`,y=`${c*m*.1+Math.random()*2}s`,E=`${8+Math.random()*10}s`;a.push(st.jsx("div",{className:"absolute flex items-center justify-center text-xl opacity-20 hover:opacity-40 transition-opacity pointer-events-none",style:{left:`${m/12*100}%`,top:`${c/10*100}%`,width:g,height:g,animation:`float ${E} ease-in-out ${y} infinite alternate`,zIndex:1},children:u[(c+m)%u.length]},`grid-${c}-${m}`))}return a};return st.jsxs("div",{className:"bg-gradient-to-b from-orange-100 to-orange-50 min-h-screen py-24 px-6 md:px-12 relative overflow-hidden",children:[st.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-orange-100 to-orange-50 z-0"}),st.jsx("div",{className:"absolute inset-0 overflow-hidden z-10",children:n()}),st.jsx("div",{className:"absolute inset-0 overflow-hidden z-10",children:t()}),st.jsxs("section",{className:"max-w-7xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden border-2 border-orange-200 relative z-20",children:[st.jsx("div",{className:"bg-gradient-to-b from-orange-300 to-orange-200 p-6",children:st.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-orange-800 text-center mb-4",children:"South Asian Medical Society"})}),st.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8 md:gap-16 p-8 bg-orange-100",children:[st.jsx("p",{className:"text-lg md:text-xl text-gray-700",children:"Welcome to SAMS @ UoM! We founded this society to bring together South Asian medical students, creating a supportive space to connect, share experiences, and celebrate our culture. But this isn't just for South Asians - everyone is welcome! Our main focus is regular teaching sessions that go beyond traditional learning. We aim to provide interactive, engaging, and clinically relevant teaching that you might not usually get, alongside academic support tailored to help all students thrive. Stay tuned for weekly sessions, mentorship opportunities, and a strong community to support you throughout medical school!"}),st.jsx("img",{src:"/logo.png",alt:"South Asian Medical Society Logo",className:"w-1/4 h-auto rounded-lg"})]})]}),st.jsx("style",{children:`
        @keyframes fall {
          0% {
            transform: translateY(-50px);
          }
          100% {
            transform: translateY(calc(100vh + 50px));
          }
        }
        
        @keyframes float {
          0%, 100% { transform: translateY(0) rotate(0deg); }
          50% { transform: translateY(-10px) rotate(180deg); }
        }
      `})]})}const IP=()=>{};var v0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=function(n){const t=[];let e=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},RP=function(n){const t=[];let e=0,r=0;for(;e<n.length;){const a=n[e++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const u=n[e++];t[r++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=n[e++],c=n[e++],m=n[e++],g=((a&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=n[e++],c=n[e++];t[r++]=String.fromCharCode((a&15)<<12|(u&63)<<6|c&63)}}return t.join("")},FS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const u=n[a],c=a+1<n.length,m=c?n[a+1]:0,g=a+2<n.length,y=g?n[a+2]:0,E=u>>2,I=(u&3)<<4|m>>4;let V=(m&15)<<2|y>>6,M=y&63;g||(M=64,c||(V=64)),r.push(e[E],e[I],e[V],e[M])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(BS(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):RP(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const u=e[n.charAt(a++)],m=a<n.length?e[n.charAt(a)]:0;++a;const y=a<n.length?e[n.charAt(a)]:64;++a;const I=a<n.length?e[n.charAt(a)]:64;if(++a,u==null||m==null||y==null||I==null)throw new bP;const V=u<<2|m>>4;if(r.push(V),y!==64){const M=m<<4&240|y>>2;if(r.push(M),I!==64){const B=y<<6&192|I;r.push(B)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};let bP=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};const CP=function(n){const t=BS(n);return FS.encodeByteArray(t,!0)},_d=function(n){return CP(n).replace(/\./g,"")},DP=function(n){try{return FS.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=()=>VP().__FIREBASE_DEFAULTS__,NP=()=>{if(typeof process>"u"||typeof v0>"u")return;const n=v0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},OP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&DP(n[1]);return t&&JSON.parse(t)},R_=()=>{try{return IP()||PP()||NP()||OP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},xP=n=>R_()?.emulatorHosts?.[n],MP=n=>{const t=xP(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},jS=()=>R_()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kP=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function LP(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",a=n.iat||0,u=n.sub||n.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...n};return[_d(JSON.stringify(e)),_d(JSON.stringify(c)),""].join(".")}const $c={};function $P(){const n={prod:[],emulator:[]};for(const t of Object.keys($c))$c[t]?n.emulator.push(t):n.prod.push(t);return n}function BP(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let E0=!1;function FP(n,t){if(typeof window>"u"||typeof document>"u"||!b_(window.location.host)||$c[n]===t||$c[n]||E0)return;$c[n]=t;function e(V){return`__firebase__banner__${V}`}const r="__firebase__banner",u=$P().prod.length>0;function c(){const V=document.getElementById(r);V&&V.remove()}function m(V){V.style.display="flex",V.style.background="#7faaf0",V.style.position="fixed",V.style.bottom="5px",V.style.left="5px",V.style.padding=".5em",V.style.borderRadius="5px",V.style.alignItems="center"}function g(V,M){V.setAttribute("width","24"),V.setAttribute("id",M),V.setAttribute("height","24"),V.setAttribute("viewBox","0 0 24 24"),V.setAttribute("fill","none"),V.style.marginLeft="-6px"}function y(){const V=document.createElement("span");return V.style.cursor="pointer",V.style.marginLeft="16px",V.style.fontSize="24px",V.innerHTML=" &times;",V.onclick=()=>{E0=!0,c()},V}function E(V,M){V.setAttribute("id",M),V.innerText="Learn more",V.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",V.setAttribute("target","__blank"),V.style.paddingLeft="5px",V.style.textDecoration="underline"}function I(){const V=BP(r),M=e("text"),B=document.getElementById(M)||document.createElement("span"),G=e("learnmore"),U=document.getElementById(G)||document.createElement("a"),rt=e("preprendIcon"),F=document.getElementById(rt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(V.created){const it=V.element;m(it),E(U,G);const tt=y();g(F,rt),it.append(F,B,U,tt),document.body.appendChild(it)}u?(B.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zP(){const n=R_()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function HP(){return!zP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zS(){try{return typeof indexedDB=="object"}catch{return!1}}function qS(){return new Promise((n,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{t(a.error?.message||"")}}catch(e){t(e)}})}function GP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="FirebaseError";let mu=class HS extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=QP,Object.setPrototypeOf(this,HS.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xd.prototype.create)}},Xd=class{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},a=`${this.service}/${t}`,u=this.errors[t],c=u?KP(u,r):"Error",m=`${this.serviceName}: ${c} (${a}).`;return new mu(a,m,r)}};function KP(n,t){return n.replace(YP,(e,r)=>{const a=t[r];return a!=null?String(a):`<${r}?>`})}const YP=/\{\$([^}]+)}/g;function vd(n,t){if(n===t)return!0;const e=Object.keys(n),r=Object.keys(t);for(const a of e){if(!r.includes(a))return!1;const u=n[a],c=t[a];if(T0(u)&&T0(c)){if(!vd(u,c))return!1}else if(u!==c)return!1}for(const a of r)if(!e.includes(a))return!1;return!0}function T0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=1e3,WP=2,JP=14400*1e3,ZP=.5;function A0(n,t=XP,e=WP){const r=t*Math.pow(e,n),a=Math.round(ZP*r*(Math.random()-.5)*2);return Math.min(JP,r+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(n){return n&&n._delegate?n._delegate:n}let bs=class{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tN=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new kP;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(nN(t))try{this.getOrInitializeService({instanceIdentifier:Ro})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:a});r.resolve(u)}catch{}}}}clearInstance(t=Ro){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ro){return this.instances.has(t)}getOptions(t=Ro){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(a)}return a}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),a=this.onInitCallbacks.get(r)??new Set;a.add(t),this.onInitCallbacks.set(r,a);const u=this.instances.get(r);return u&&t(u,r),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const a of r)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eN(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ro){return this.component?this.component.multipleInstances?t:Ro:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function eN(n){return n===Ro?void 0:n}function nN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rN=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new tN(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(se||(se={}));const iN={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},sN=se.INFO,aN={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},oN=(n,t,...e)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),a=aN[t];if(a)console[a](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let C_=class{constructor(t){this.name=t,this._logLevel=sN,this._logHandler=oN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in se))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?iN[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...t),this._logHandler(this,se.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...t),this._logHandler(this,se.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,se.INFO,...t),this._logHandler(this,se.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,se.WARN,...t),this._logHandler(this,se.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...t),this._logHandler(this,se.ERROR,...t)}};const lN=(n,t)=>t.some(e=>n instanceof e);let w0,S0;function uN(){return w0||(w0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cN(){return S0||(S0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GS=new WeakMap,cy=new WeakMap,QS=new WeakMap,Ig=new WeakMap,D_=new WeakMap;function hN(n){const t=new Promise((e,r)=>{const a=()=>{n.removeEventListener("success",u),n.removeEventListener("error",c)},u=()=>{e(wa(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",u),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&GS.set(e,n)}).catch(()=>{}),D_.set(t,n),t}function fN(n){if(cy.has(n))return;const t=new Promise((e,r)=>{const a=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",c),n.removeEventListener("abort",c)},u=()=>{e(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",u),n.addEventListener("error",c),n.addEventListener("abort",c)});cy.set(n,t)}let hy={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return cy.get(n);if(t==="objectStoreNames")return n.objectStoreNames||QS.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return wa(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function dN(n){hy=n(hy)}function mN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(Rg(this),t,...e);return QS.set(r,t.sort?t.sort():[t]),wa(r)}:cN().includes(n)?function(...t){return n.apply(Rg(this),t),wa(GS.get(this))}:function(...t){return wa(n.apply(Rg(this),t))}}function pN(n){return typeof n=="function"?mN(n):(n instanceof IDBTransaction&&fN(n),lN(n,uN())?new Proxy(n,hy):n)}function wa(n){if(n instanceof IDBRequest)return hN(n);if(Ig.has(n))return Ig.get(n);const t=pN(n);return t!==n&&(Ig.set(n,t),D_.set(t,n)),t}const Rg=n=>D_.get(n);function KS(n,t,{blocked:e,upgrade:r,blocking:a,terminated:u}={}){const c=indexedDB.open(n,t),m=wa(c);return r&&c.addEventListener("upgradeneeded",g=>{r(wa(c.result),g.oldVersion,g.newVersion,wa(c.transaction),g)}),e&&c.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),a&&g.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const gN=["get","getKey","getAll","getAllKeys","count"],yN=["put","add","delete","clear"],bg=new Map;function I0(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(bg.get(t))return bg.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,a=yN.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(a||gN.includes(e)))return;const u=async function(c,...m){const g=this.transaction(c,a?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[e](...m),a&&g.done]))[0]};return bg.set(t,u),u}dN(n=>({...n,get:(t,e,r)=>I0(t,e)||n.get(t,e,r),has:(t,e)=>!!I0(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _N=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(vN(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}};function vN(n){return n.getComponent()?.type==="VERSION"}const fy="@firebase/app",R0="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new C_("@firebase/app"),EN="@firebase/app-compat",TN="@firebase/analytics-compat",AN="@firebase/analytics",wN="@firebase/app-check-compat",SN="@firebase/app-check",IN="@firebase/auth",RN="@firebase/auth-compat",bN="@firebase/database",CN="@firebase/data-connect",DN="@firebase/database-compat",VN="@firebase/functions",PN="@firebase/functions-compat",NN="@firebase/installations",ON="@firebase/installations-compat",xN="@firebase/messaging",MN="@firebase/messaging-compat",kN="@firebase/performance",LN="@firebase/performance-compat",UN="@firebase/remote-config",$N="@firebase/remote-config-compat",BN="@firebase/storage",FN="@firebase/storage-compat",jN="@firebase/firestore",zN="@firebase/ai",qN="@firebase/firestore-compat",HN="firebase",GN="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="[DEFAULT]",QN={[fy]:"fire-core",[EN]:"fire-core-compat",[AN]:"fire-analytics",[TN]:"fire-analytics-compat",[SN]:"fire-app-check",[wN]:"fire-app-check-compat",[IN]:"fire-auth",[RN]:"fire-auth-compat",[bN]:"fire-rtdb",[CN]:"fire-data-connect",[DN]:"fire-rtdb-compat",[VN]:"fire-fn",[PN]:"fire-fn-compat",[NN]:"fire-iid",[ON]:"fire-iid-compat",[xN]:"fire-fcm",[MN]:"fire-fcm-compat",[kN]:"fire-perf",[LN]:"fire-perf-compat",[UN]:"fire-rc",[$N]:"fire-rc-compat",[BN]:"fire-gcs",[FN]:"fire-gcs-compat",[jN]:"fire-fst",[qN]:"fire-fst-compat",[zN]:"fire-vertex","fire-js":"fire-js",[HN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new Map,KN=new Map,my=new Map;function b0(n,t){try{n.container.addComponent(t)}catch(e){Cs.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Pa(n){const t=n.name;if(my.has(t))return Cs.debug(`There were multiple attempts to register component ${t}.`),!1;my.set(t,n);for(const e of Ed.values())b0(e,n);for(const e of KN.values())b0(e,n);return!0}function V_(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function YN(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sa=new Xd("app","Firebase",XN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WN=class{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Sa.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=GN;function YS(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const r={name:dy,automaticDataCollectionEnabled:!0,...t},a=r.name;if(typeof a!="string"||!a)throw Sa.create("bad-app-name",{appName:String(a)});if(e||(e=jS()),!e)throw Sa.create("no-options");const u=Ed.get(a);if(u){if(vd(e,u.options)&&vd(r,u.config))return u;throw Sa.create("duplicate-app",{appName:a})}const c=new rN(a);for(const g of my.values())c.addComponent(g);const m=new WN(e,r,c);return Ed.set(a,m),m}function ZN(n=dy){const t=Ed.get(n);if(!t&&n===dy&&jS())return YS();if(!t)throw Sa.create("no-app",{appName:n});return t}function ki(n,t,e){let r=QN[n]??n;e&&(r+=`-${e}`);const a=r.match(/\s|\//),u=t.match(/\s|\//);if(a||u){const c=[`Unable to register library "${r}" with version "${t}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&u&&c.push("and"),u&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Cs.warn(c.join(" "));return}Pa(new bs(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO="firebase-heartbeat-database",eO=1,nh="firebase-heartbeat-store";let Cg=null;function XS(){return Cg||(Cg=KS(tO,eO,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(nh)}catch(e){console.warn(e)}}}}).catch(n=>{throw Sa.create("idb-open",{originalErrorMessage:n.message})})),Cg}async function nO(n){try{const e=(await XS()).transaction(nh),r=await e.objectStore(nh).get(WS(n));return await e.done,r}catch(t){if(t instanceof mu)Cs.warn(t.message);else{const e=Sa.create("idb-get",{originalErrorMessage:t?.message});Cs.warn(e.message)}}}async function C0(n,t){try{const r=(await XS()).transaction(nh,"readwrite");await r.objectStore(nh).put(t,WS(n)),await r.done}catch(e){if(e instanceof mu)Cs.warn(e.message);else{const r=Sa.create("idb-set",{originalErrorMessage:e?.message});Cs.warn(r.message)}}}function WS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=1024,iO=30;let sO=class{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new oO(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=D0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:e}),this._heartbeatsCache.heartbeats.length>iO){const a=lO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Cs.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=D0(),{heartbeatsToSend:e,unsentEntries:r}=aO(this._heartbeatsCache.heartbeats),a=_d(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Cs.warn(t),""}}};function D0(){return new Date().toISOString().substring(0,10)}function aO(n,t=rO){const e=[];let r=n.slice();for(const a of n){const u=e.find(c=>c.agent===a.agent);if(u){if(u.dates.push(a.date),V0(e)>t){u.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),V0(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}let oO=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zS()?qS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await nO(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return C0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return C0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}};function V0(n){return _d(JSON.stringify({version:2,heartbeats:n})).length}function lO(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(n){Pa(new bs("platform-logger",t=>new _N(t),"PRIVATE")),Pa(new bs("heartbeat",t=>new sO(t),"PRIVATE")),ki(fy,R0,n),ki(fy,R0,"esm2020"),ki("fire-js","")}uO("");var P0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ia,JS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(R,T){function A(){}A.prototype=T.prototype,R.F=T.prototype,R.prototype=new A,R.prototype.constructor=R,R.D=function(D,b,N){for(var w=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)w[Ot-2]=arguments[Ot];return T.prototype[b].apply(D,w)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,e),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,T,A){A||(A=0);const D=Array(16);if(typeof T=="string")for(var b=0;b<16;++b)D[b]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(b=0;b<16;++b)D[b]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=R.g[0],A=R.g[1],b=R.g[2];let N=R.g[3],w;w=T+(N^A&(b^N))+D[0]+3614090360&4294967295,T=A+(w<<7&4294967295|w>>>25),w=N+(b^T&(A^b))+D[1]+3905402710&4294967295,N=T+(w<<12&4294967295|w>>>20),w=b+(A^N&(T^A))+D[2]+606105819&4294967295,b=N+(w<<17&4294967295|w>>>15),w=A+(T^b&(N^T))+D[3]+3250441966&4294967295,A=b+(w<<22&4294967295|w>>>10),w=T+(N^A&(b^N))+D[4]+4118548399&4294967295,T=A+(w<<7&4294967295|w>>>25),w=N+(b^T&(A^b))+D[5]+1200080426&4294967295,N=T+(w<<12&4294967295|w>>>20),w=b+(A^N&(T^A))+D[6]+2821735955&4294967295,b=N+(w<<17&4294967295|w>>>15),w=A+(T^b&(N^T))+D[7]+4249261313&4294967295,A=b+(w<<22&4294967295|w>>>10),w=T+(N^A&(b^N))+D[8]+1770035416&4294967295,T=A+(w<<7&4294967295|w>>>25),w=N+(b^T&(A^b))+D[9]+2336552879&4294967295,N=T+(w<<12&4294967295|w>>>20),w=b+(A^N&(T^A))+D[10]+4294925233&4294967295,b=N+(w<<17&4294967295|w>>>15),w=A+(T^b&(N^T))+D[11]+2304563134&4294967295,A=b+(w<<22&4294967295|w>>>10),w=T+(N^A&(b^N))+D[12]+1804603682&4294967295,T=A+(w<<7&4294967295|w>>>25),w=N+(b^T&(A^b))+D[13]+4254626195&4294967295,N=T+(w<<12&4294967295|w>>>20),w=b+(A^N&(T^A))+D[14]+2792965006&4294967295,b=N+(w<<17&4294967295|w>>>15),w=A+(T^b&(N^T))+D[15]+1236535329&4294967295,A=b+(w<<22&4294967295|w>>>10),w=T+(b^N&(A^b))+D[1]+4129170786&4294967295,T=A+(w<<5&4294967295|w>>>27),w=N+(A^b&(T^A))+D[6]+3225465664&4294967295,N=T+(w<<9&4294967295|w>>>23),w=b+(T^A&(N^T))+D[11]+643717713&4294967295,b=N+(w<<14&4294967295|w>>>18),w=A+(N^T&(b^N))+D[0]+3921069994&4294967295,A=b+(w<<20&4294967295|w>>>12),w=T+(b^N&(A^b))+D[5]+3593408605&4294967295,T=A+(w<<5&4294967295|w>>>27),w=N+(A^b&(T^A))+D[10]+38016083&4294967295,N=T+(w<<9&4294967295|w>>>23),w=b+(T^A&(N^T))+D[15]+3634488961&4294967295,b=N+(w<<14&4294967295|w>>>18),w=A+(N^T&(b^N))+D[4]+3889429448&4294967295,A=b+(w<<20&4294967295|w>>>12),w=T+(b^N&(A^b))+D[9]+568446438&4294967295,T=A+(w<<5&4294967295|w>>>27),w=N+(A^b&(T^A))+D[14]+3275163606&4294967295,N=T+(w<<9&4294967295|w>>>23),w=b+(T^A&(N^T))+D[3]+4107603335&4294967295,b=N+(w<<14&4294967295|w>>>18),w=A+(N^T&(b^N))+D[8]+1163531501&4294967295,A=b+(w<<20&4294967295|w>>>12),w=T+(b^N&(A^b))+D[13]+2850285829&4294967295,T=A+(w<<5&4294967295|w>>>27),w=N+(A^b&(T^A))+D[2]+4243563512&4294967295,N=T+(w<<9&4294967295|w>>>23),w=b+(T^A&(N^T))+D[7]+1735328473&4294967295,b=N+(w<<14&4294967295|w>>>18),w=A+(N^T&(b^N))+D[12]+2368359562&4294967295,A=b+(w<<20&4294967295|w>>>12),w=T+(A^b^N)+D[5]+4294588738&4294967295,T=A+(w<<4&4294967295|w>>>28),w=N+(T^A^b)+D[8]+2272392833&4294967295,N=T+(w<<11&4294967295|w>>>21),w=b+(N^T^A)+D[11]+1839030562&4294967295,b=N+(w<<16&4294967295|w>>>16),w=A+(b^N^T)+D[14]+4259657740&4294967295,A=b+(w<<23&4294967295|w>>>9),w=T+(A^b^N)+D[1]+2763975236&4294967295,T=A+(w<<4&4294967295|w>>>28),w=N+(T^A^b)+D[4]+1272893353&4294967295,N=T+(w<<11&4294967295|w>>>21),w=b+(N^T^A)+D[7]+4139469664&4294967295,b=N+(w<<16&4294967295|w>>>16),w=A+(b^N^T)+D[10]+3200236656&4294967295,A=b+(w<<23&4294967295|w>>>9),w=T+(A^b^N)+D[13]+681279174&4294967295,T=A+(w<<4&4294967295|w>>>28),w=N+(T^A^b)+D[0]+3936430074&4294967295,N=T+(w<<11&4294967295|w>>>21),w=b+(N^T^A)+D[3]+3572445317&4294967295,b=N+(w<<16&4294967295|w>>>16),w=A+(b^N^T)+D[6]+76029189&4294967295,A=b+(w<<23&4294967295|w>>>9),w=T+(A^b^N)+D[9]+3654602809&4294967295,T=A+(w<<4&4294967295|w>>>28),w=N+(T^A^b)+D[12]+3873151461&4294967295,N=T+(w<<11&4294967295|w>>>21),w=b+(N^T^A)+D[15]+530742520&4294967295,b=N+(w<<16&4294967295|w>>>16),w=A+(b^N^T)+D[2]+3299628645&4294967295,A=b+(w<<23&4294967295|w>>>9),w=T+(b^(A|~N))+D[0]+4096336452&4294967295,T=A+(w<<6&4294967295|w>>>26),w=N+(A^(T|~b))+D[7]+1126891415&4294967295,N=T+(w<<10&4294967295|w>>>22),w=b+(T^(N|~A))+D[14]+2878612391&4294967295,b=N+(w<<15&4294967295|w>>>17),w=A+(N^(b|~T))+D[5]+4237533241&4294967295,A=b+(w<<21&4294967295|w>>>11),w=T+(b^(A|~N))+D[12]+1700485571&4294967295,T=A+(w<<6&4294967295|w>>>26),w=N+(A^(T|~b))+D[3]+2399980690&4294967295,N=T+(w<<10&4294967295|w>>>22),w=b+(T^(N|~A))+D[10]+4293915773&4294967295,b=N+(w<<15&4294967295|w>>>17),w=A+(N^(b|~T))+D[1]+2240044497&4294967295,A=b+(w<<21&4294967295|w>>>11),w=T+(b^(A|~N))+D[8]+1873313359&4294967295,T=A+(w<<6&4294967295|w>>>26),w=N+(A^(T|~b))+D[15]+4264355552&4294967295,N=T+(w<<10&4294967295|w>>>22),w=b+(T^(N|~A))+D[6]+2734768916&4294967295,b=N+(w<<15&4294967295|w>>>17),w=A+(N^(b|~T))+D[13]+1309151649&4294967295,A=b+(w<<21&4294967295|w>>>11),w=T+(b^(A|~N))+D[4]+4149444226&4294967295,T=A+(w<<6&4294967295|w>>>26),w=N+(A^(T|~b))+D[11]+3174756917&4294967295,N=T+(w<<10&4294967295|w>>>22),w=b+(T^(N|~A))+D[2]+718787259&4294967295,b=N+(w<<15&4294967295|w>>>17),w=A+(N^(b|~T))+D[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,R.g[2]=R.g[2]+b&4294967295,R.g[3]=R.g[3]+N&4294967295}r.prototype.v=function(R,T){T===void 0&&(T=R.length);const A=T-this.blockSize,D=this.C;let b=this.h,N=0;for(;N<T;){if(b==0)for(;N<=A;)a(this,R,N),N+=this.blockSize;if(typeof R=="string"){for(;N<T;)if(D[b++]=R.charCodeAt(N++),b==this.blockSize){a(this,D),b=0;break}}else for(;N<T;)if(D[b++]=R[N++],b==this.blockSize){a(this,D),b=0;break}}this.h=b,this.o+=T},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;T=this.o*8;for(var A=R.length-8;A<R.length;++A)R[A]=T&255,T/=256;for(this.v(R),R=Array(16),T=0,A=0;A<4;++A)for(let D=0;D<32;D+=8)R[T++]=this.g[A]>>>D&255;return R};function u(R,T){var A=m;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=T(R)}function c(R,T){this.h=T;const A=[];let D=!0;for(let b=R.length-1;b>=0;b--){const N=R[b]|0;D&&N==T||(A[b]=N,D=!1)}this.g=A}var m={};function g(R){return-128<=R&&R<128?u(R,function(T){return new c([T|0],T<0?-1:0)}):new c([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return I;if(R<0)return U(y(-R));const T=[];let A=1;for(let D=0;R>=A;D++)T[D]=R/A|0,A*=4294967296;return new c(T,0)}function E(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return U(E(R.substring(1),T));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=y(Math.pow(T,8));let D=I;for(let N=0;N<R.length;N+=8){var b=Math.min(8,R.length-N);const w=parseInt(R.substring(N,N+b),T);b<8?(b=y(Math.pow(T,b)),D=D.j(b).add(y(w))):(D=D.j(A),D=D.add(y(w)))}return D}var I=g(0),V=g(1),M=g(16777216);n=c.prototype,n.m=function(){if(G(this))return-U(this).m();let R=0,T=1;for(let A=0;A<this.g.length;A++){const D=this.i(A);R+=(D>=0?D:4294967296+D)*T,T*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(B(this))return"0";if(G(this))return"-"+U(this).toString(R);const T=y(Math.pow(R,6));var A=this;let D="";for(;;){const b=tt(A,T).g;A=rt(A,b.j(T));let N=((A.g.length>0?A.g[0]:A.h)>>>0).toString(R);if(A=b,B(A))return N+D;for(;N.length<6;)N="0"+N;D=N+D}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function B(R){if(R.h!=0)return!1;for(let T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function G(R){return R.h==-1}n.l=function(R){return R=rt(this,R),G(R)?-1:B(R)?0:1};function U(R){const T=R.g.length,A=[];for(let D=0;D<T;D++)A[D]=~R.g[D];return new c(A,~R.h).add(V)}n.abs=function(){return G(this)?U(this):this},n.add=function(R){const T=Math.max(this.g.length,R.g.length),A=[];let D=0;for(let b=0;b<=T;b++){let N=D+(this.i(b)&65535)+(R.i(b)&65535),w=(N>>>16)+(this.i(b)>>>16)+(R.i(b)>>>16);D=w>>>16,N&=65535,w&=65535,A[b]=w<<16|N}return new c(A,A[A.length-1]&-2147483648?-1:0)};function rt(R,T){return R.add(U(T))}n.j=function(R){if(B(this)||B(R))return I;if(G(this))return G(R)?U(this).j(U(R)):U(U(this).j(R));if(G(R))return U(this.j(U(R)));if(this.l(M)<0&&R.l(M)<0)return y(this.m()*R.m());const T=this.g.length+R.g.length,A=[];for(var D=0;D<2*T;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(let b=0;b<R.g.length;b++){const N=this.i(D)>>>16,w=this.i(D)&65535,Ot=R.i(b)>>>16,zt=R.i(b)&65535;A[2*D+2*b]+=w*zt,F(A,2*D+2*b),A[2*D+2*b+1]+=N*zt,F(A,2*D+2*b+1),A[2*D+2*b+1]+=w*Ot,F(A,2*D+2*b+1),A[2*D+2*b+2]+=N*Ot,F(A,2*D+2*b+2)}for(R=0;R<T;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=T;R<2*T;R++)A[R]=0;return new c(A,0)};function F(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function it(R,T){this.g=R,this.h=T}function tt(R,T){if(B(T))throw Error("division by zero");if(B(R))return new it(I,I);if(G(R))return T=tt(U(R),T),new it(U(T.g),U(T.h));if(G(T))return T=tt(R,U(T)),new it(U(T.g),T.h);if(R.g.length>30){if(G(R)||G(T))throw Error("slowDivide_ only works with positive integers.");for(var A=V,D=T;D.l(R)<=0;)A=W(A),D=W(D);var b=ct(A,1),N=ct(D,1);for(D=ct(D,2),A=ct(A,2);!B(D);){var w=N.add(D);w.l(R)<=0&&(b=b.add(A),N=w),D=ct(D,1),A=ct(A,1)}return T=rt(R,b.j(T)),new it(b,T)}for(b=I;R.l(T)>=0;){for(A=Math.max(1,Math.floor(R.m()/T.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),N=y(A),w=N.j(T);G(w)||w.l(R)>0;)A-=D,N=y(A),w=N.j(T);B(N)&&(N=V),b=b.add(N),R=rt(R,w)}return new it(b,R)}n.B=function(R){return tt(this,R).h},n.and=function(R){const T=Math.max(this.g.length,R.g.length),A=[];for(let D=0;D<T;D++)A[D]=this.i(D)&R.i(D);return new c(A,this.h&R.h)},n.or=function(R){const T=Math.max(this.g.length,R.g.length),A=[];for(let D=0;D<T;D++)A[D]=this.i(D)|R.i(D);return new c(A,this.h|R.h)},n.xor=function(R){const T=Math.max(this.g.length,R.g.length),A=[];for(let D=0;D<T;D++)A[D]=this.i(D)^R.i(D);return new c(A,this.h^R.h)};function W(R){const T=R.g.length+1,A=[];for(let D=0;D<T;D++)A[D]=R.i(D)<<1|R.i(D-1)>>>31;return new c(A,R.h)}function ct(R,T){const A=T>>5;T%=32;const D=R.g.length-A,b=[];for(let N=0;N<D;N++)b[N]=T>0?R.i(N+A)>>>T|R.i(N+A+1)<<32-T:R.i(N+A);return new c(b,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,JS=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=E,Ia=c}).apply(typeof P0<"u"?P0:typeof self<"u"?self:typeof window<"u"?window:{});var Nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZS,bc,tI,Hf,py,eI,nI,rI;(function(){var n,t=Object.defineProperty;function e(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nf=="object"&&Nf];for(var f=0;f<o.length;++f){var p=o[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=e(this);function a(o,f){if(f)t:{var p=r;o=o.split(".");for(var v=0;v<o.length-1;v++){var O=o[v];if(!(O in p))break t;p=p[O]}o=o[o.length-1],v=p[o],f=f(v),f!=v&&f!=null&&t(p,o,{configurable:!0,writable:!0,value:f})}}a("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(o){return o||function(f){var p=[],v;for(v in f)Object.prototype.hasOwnProperty.call(f,v)&&p.push([v,f[v]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function m(o){var f=typeof o;return f=="object"&&o!=null||f=="function"}function g(o,f,p){return o.call.apply(o.bind,arguments)}function y(o,f,p){return y=g,y.apply(null,arguments)}function E(o,f){var p=Array.prototype.slice.call(arguments,1);return function(){var v=p.slice();return v.push.apply(v,arguments),o.apply(this,v)}}function I(o,f){function p(){}p.prototype=f.prototype,o.Z=f.prototype,o.prototype=new p,o.prototype.constructor=o,o.Ob=function(v,O,x){for(var z=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)z[mt-2]=arguments[mt];return f.prototype[O].apply(v,z)}}var V=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function M(o){const f=o.length;if(f>0){const p=Array(f);for(let v=0;v<f;v++)p[v]=o[v];return p}return[]}function B(o,f){for(let v=1;v<arguments.length;v++){const O=arguments[v];var p=typeof O;if(p=p!="object"?p:O?Array.isArray(O)?"array":p:"null",p=="array"||p=="object"&&typeof O.length=="number"){p=o.length||0;const x=O.length||0;o.length=p+x;for(let z=0;z<x;z++)o[p+z]=O[z]}else o.push(O)}}class G{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function U(o){c.setTimeout(()=>{throw o},0)}function rt(){var o=R;let f=null;return o.g&&(f=o.g,o.g=o.g.next,o.g||(o.h=null),f.next=null),f}class F{constructor(){this.h=this.g=null}add(f,p){const v=it.get();v.set(f,p),this.h?this.h.next=v:this.g=v,this.h=v}}var it=new G(()=>new tt,o=>o.reset());class tt{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let W,ct=!1,R=new F,T=()=>{const o=Promise.resolve(void 0);W=()=>{o.then(A)}};function A(){for(var o;o=rt();){try{o.h.call(o.g)}catch(p){U(p)}var f=it;f.j(o),f.h<100&&(f.h++,o.next=f.g,f.g=o)}ct=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(o,f){this.type=o,this.g=this.target=f,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var N=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,f=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const p=()=>{};c.addEventListener("test",p,f),c.removeEventListener("test",p,f)}catch{}return o})();function w(o){return/^[\s\xa0]*$/.test(o)}function Ot(o,f){b.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,f)}I(Ot,b),Ot.prototype.init=function(o,f){const p=this.type=o.type,v=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=f,f=o.relatedTarget,f||(p=="mouseover"?f=o.fromElement:p=="mouseout"&&(f=o.toElement)),this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Ot.Z.h.call(this)},Ot.prototype.h=function(){Ot.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var zt="closure_listenable_"+(Math.random()*1e6|0),X=0;function pt(o,f,p,v,O){this.listener=o,this.proxy=null,this.src=f,this.type=p,this.capture=!!v,this.ha=O,this.key=++X,this.da=this.fa=!1}function Tt(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function qt(o,f,p){for(const v in o)f.call(p,o[v],v,o)}function C(o,f){for(const p in o)f.call(void 0,o[p],p,o)}function $(o){const f={};for(const p in o)f[p]=o[p];return f}const et="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(o,f){let p,v;for(let O=1;O<arguments.length;O++){v=arguments[O];for(p in v)o[p]=v[p];for(let x=0;x<et.length;x++)p=et[x],Object.prototype.hasOwnProperty.call(v,p)&&(o[p]=v[p])}}function ut(o){this.src=o,this.g={},this.h=0}ut.prototype.add=function(o,f,p,v,O){const x=o.toString();o=this.g[x],o||(o=this.g[x]=[],this.h++);const z=dt(o,f,v,O);return z>-1?(f=o[z],p||(f.fa=!1)):(f=new pt(f,this.src,x,!!v,O),f.fa=p,o.push(f)),f};function At(o,f){const p=f.type;if(p in o.g){var v=o.g[p],O=Array.prototype.indexOf.call(v,f,void 0),x;(x=O>=0)&&Array.prototype.splice.call(v,O,1),x&&(Tt(f),o.g[p].length==0&&(delete o.g[p],o.h--))}}function dt(o,f,p,v){for(let O=0;O<o.length;++O){const x=o[O];if(!x.da&&x.listener==f&&x.capture==!!p&&x.ha==v)return O}return-1}var fe="closure_lm_"+(Math.random()*1e6|0),Rt={};function Vn(o,f,p,v,O){if(Array.isArray(f)){for(let x=0;x<f.length;x++)Vn(o,f[x],p,v,O);return null}return p=qa(p),o&&o[zt]?o.J(f,p,m(v)?!!v.capture:!1,O):za(o,f,p,!1,v,O)}function za(o,f,p,v,O,x){if(!f)throw Error("Invalid event type");const z=m(O)?!!O.capture:!!O;let mt=Xi(o);if(mt||(o[fe]=mt=new ut(o)),p=mt.add(f,p,v,z,x),p.proxy)return p;if(v=Us(),p.proxy=v,v.src=o,v.listener=p,o.addEventListener)N||(O=z),O===void 0&&(O=!1),o.addEventListener(f.toString(),v,O);else if(o.attachEvent)o.attachEvent(Yi(f.toString()),v);else if(o.addListener&&o.removeListener)o.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Us(){function o(p){return f.call(o.src,o.listener,p)}const f=bu;return o}function Ki(o,f,p,v,O){if(Array.isArray(f))for(var x=0;x<f.length;x++)Ki(o,f[x],p,v,O);else v=m(v)?!!v.capture:!!v,p=qa(p),o&&o[zt]?(o=o.i,x=String(f).toString(),x in o.g&&(f=o.g[x],p=dt(f,p,v,O),p>-1&&(Tt(f[p]),Array.prototype.splice.call(f,p,1),f.length==0&&(delete o.g[x],o.h--)))):o&&(o=Xi(o))&&(f=o.g[f.toString()],o=-1,f&&(o=dt(f,p,v,O)),(p=o>-1?f[o]:null)&&Kr(p))}function Kr(o){if(typeof o!="number"&&o&&!o.da){var f=o.src;if(f&&f[zt])At(f.i,o);else{var p=o.type,v=o.proxy;f.removeEventListener?f.removeEventListener(p,v,o.capture):f.detachEvent?f.detachEvent(Yi(p),v):f.addListener&&f.removeListener&&f.removeListener(v),(p=Xi(f))?(At(p,o),p.h==0&&(p.src=null,f[fe]=null)):Tt(o)}}}function Yi(o){return o in Rt?Rt[o]:Rt[o]="on"+o}function bu(o,f){if(o.da)o=!0;else{f=new Ot(f,this);const p=o.listener,v=o.ha||o.src;o.fa&&Kr(o),o=p.call(v,f)}return o}function Xi(o){return o=o[fe],o instanceof ut?o:null}var un="__closure_events_fn_"+(Math.random()*1e9>>>0);function qa(o){return typeof o=="function"?o:(o[un]||(o[un]=function(f){return o.handleEvent(f)}),o[un])}function Xt(){D.call(this),this.i=new ut(this),this.M=this,this.G=null}I(Xt,D),Xt.prototype[zt]=!0,Xt.prototype.removeEventListener=function(o,f,p,v){Ki(this,o,f,p,v)};function te(o,f){var p,v=o.G;if(v)for(p=[];v;v=v.G)p.push(v);if(o=o.M,v=f.type||f,typeof f=="string")f=new b(f,o);else if(f instanceof b)f.target=f.target||o;else{var O=f;f=new b(v,o),J(f,O)}O=!0;let x,z;if(p)for(z=p.length-1;z>=0;z--)x=f.g=p[z],O=Zn(x,v,!0,f)&&O;if(x=f.g=o,O=Zn(x,v,!0,f)&&O,O=Zn(x,v,!1,f)&&O,p)for(z=0;z<p.length;z++)x=f.g=p[z],O=Zn(x,v,!1,f)&&O}Xt.prototype.N=function(){if(Xt.Z.N.call(this),this.i){var o=this.i;for(const f in o.g){const p=o.g[f];for(let v=0;v<p.length;v++)Tt(p[v]);delete o.g[f],o.h--}}this.G=null},Xt.prototype.J=function(o,f,p,v){return this.i.add(String(o),f,!1,p,v)},Xt.prototype.K=function(o,f,p,v){return this.i.add(String(o),f,!0,p,v)};function Zn(o,f,p,v){if(f=o.i.g[String(f)],!f)return!0;f=f.concat();let O=!0;for(let x=0;x<f.length;++x){const z=f[x];if(z&&!z.da&&z.capture==p){const mt=z.listener,Mt=z.ha||z.src;z.fa&&At(o.i,z),O=mt.call(Mt,v)!==!1&&O}}return O&&!v.defaultPrevented}function Cu(o,f){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=y(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:c.setTimeout(o,f||0)}function $s(o){o.g=Cu(()=>{o.g=null,o.i&&(o.i=!1,$s(o))},o.l);const f=o.h;o.h=null,o.m.apply(null,f)}class Du extends D{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:$s(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pr(o){D.call(this),this.h=o,this.g={}}I(pr,D);var Yr=[];function sn(o){qt(o.g,function(f,p){this.g.hasOwnProperty(p)&&Kr(f)},o),o.g={}}pr.prototype.N=function(){pr.Z.N.call(this),sn(this)},pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pn=c.JSON.stringify,Tn=c.JSON.parse,Vu=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function Ha(){}function Ga(){}var Nn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vr(){b.call(this,"d")}I(Vr,b);function Qn(){b.call(this,"c")}I(Qn,b);var qe={},Xr=null;function Wr(){return Xr=Xr||new Xt}qe.Ia="serverreachability";function Bs(o){b.call(this,qe.Ia,o)}I(Bs,b);function tr(o){const f=Wr();te(f,new Bs(f))}qe.STAT_EVENT="statevent";function Wi(o,f){b.call(this,qe.STAT_EVENT,o),this.stat=f}I(Wi,b);function Qt(o){const f=Wr();te(f,new Wi(f,o))}qe.Ja="timingevent";function Qa(o,f){b.call(this,qe.Ja,o),this.size=f}I(Qa,b);function er(o,f){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},f)}function nr(){this.g=!0}nr.prototype.ua=function(){this.g=!1};function Ka(o,f,p,v,O,x){o.info(function(){if(o.g)if(x){var z="",mt=x.split("&");for(let wt=0;wt<mt.length;wt++){var Mt=mt[wt].split("=");if(Mt.length>1){const Ft=Mt[0];Mt=Mt[1];const Ce=Ft.split("_");z=Ce.length>=2&&Ce[1]=="type"?z+(Ft+"="+Mt+"&"):z+(Ft+"=redacted&")}}}else z=null;else z=x;return"XMLHTTP REQ ("+v+") [attempt "+O+"]: "+f+`
`+p+`
`+z})}function Ya(o,f,p,v,O,x,z){o.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+O+"]: "+f+`
`+p+`
`+x+" "+z})}function On(o,f,p,v){o.info(function(){return"XMLHTTP TEXT ("+f+"): "+Pr(o,p)+(v?" "+v:"")})}function Pu(o,f){o.info(function(){return"TIMEOUT: "+f})}nr.prototype.info=function(){};function Pr(o,f){if(!o.g)return f;if(!f)return null;try{const x=JSON.parse(f);if(x){for(o=0;o<x.length;o++)if(Array.isArray(x[o])){var p=x[o];if(!(p.length<2)){var v=p[1];if(Array.isArray(v)&&!(v.length<1)){var O=v[0];if(O!="noop"&&O!="stop"&&O!="close")for(let z=1;z<v.length;z++)v[z]=""}}}}return Pn(x)}catch{return f}}var Te={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},He={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nr;function Jr(){}I(Jr,Ha),Jr.prototype.g=function(){return new XMLHttpRequest},Nr=new Jr;function gr(o){return encodeURIComponent(String(o))}function Nu(o){var f=1;o=o.split(":");const p=[];for(;f>0&&o.length;)p.push(o.shift()),f--;return o.length&&p.push(o.join(":")),p}function Ge(o,f,p,v){this.j=o,this.i=f,this.l=p,this.S=v||1,this.V=new pr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zr}function Zr(){this.i=null,this.g="",this.h=!1}var Ji={},rr={};function ir(o,f,p){o.M=1,o.A=or(ee(f)),o.u=p,o.R=!0,ti(o,null)}function ti(o,f){o.F=Date.now(),Or(o),o.B=ee(o.A);var p=o.B,v=o.S;Array.isArray(v)||(v=[String(v)]),Ja(p.i,"t",v),o.C=0,p=o.j.L,o.h=new Zr,o.g=os(o.j,p?f:null,!o.u),o.P>0&&(o.O=new Du(y(o.Y,o,o.g),o.P)),f=o.V,p=o.g,v=o.ba;var O="readystatechange";Array.isArray(O)||(O&&(Yr[0]=O.toString()),O=Yr);for(let x=0;x<O.length;x++){const z=Vn(p,O[x],v||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=o.J?$(o.J):{},o.u?(o.v||(o.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,f)):(o.v="GET",o.g.ea(o.B,o.v,null,f)),tr(),Ka(o.i,o.v,o.B,o.l,o.S,o.u)}Ge.prototype.ba=function(o){o=o.target;const f=this.O;f&&we(o)==3?f.j():this.Y(o)},Ge.prototype.Y=function(o){try{if(o==this.g)t:{const mt=we(this.g),Mt=this.g.ya(),wt=this.g.ca();if(!(mt<3)&&(mt!=3||this.g&&(this.h.h||this.g.la()||Ii(this.g)))){this.K||mt!=4||Mt==7||(Mt==8||wt<=0?tr(3):tr(2)),sr(this);var f=this.g.ca();this.X=f;var p=gi(this);if(this.o=f==200,Ya(this.i,this.v,this.B,this.l,this.S,mt,f),this.o){if(this.U&&!this.L){e:{if(this.g){var v,O=this.g;if((v=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(v)){var x=v;break e}}x=null}if(o=x)On(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yi(this,o);else{this.o=!1,this.m=3,Qt(12),cn(this),_r(this);break t}}if(this.R){o=!0;let Ft;for(;!this.K&&this.C<p.length;)if(Ft=Qo(this,p),Ft==rr){mt==4&&(this.m=4,Qt(14),o=!1),On(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==Ji){this.m=4,Qt(15),On(this.i,this.l,p,"[Invalid Chunk]"),o=!1;break}else On(this.i,this.l,Ft,null),yi(this,Ft);if(Se(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||p.length!=0||this.h.h||(this.m=1,Qt(16),o=!1),this.o=this.o&&o,!o)On(this.i,this.l,p,"[Invalid Chunked Response]"),cn(this),_r(this);else if(p.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),as(z),z.P=!0,Qt(11))}}else On(this.i,this.l,p,null),yi(this,p);mt==4&&cn(this),this.o&&!this.K&&(mt==4?Gs(this.j,this):(this.o=!1,Or(this)))}else ns(this.g),f==400&&p.indexOf("Unknown SID")>0?(this.m=3,Qt(12)):(this.m=0,Qt(13)),cn(this),_r(this)}}}catch{}finally{}};function gi(o){if(!Se(o))return o.g.la();const f=Ii(o.g);if(f==="")return"";let p="";const v=f.length,O=we(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return cn(o),_r(o),"";o.h.i=new c.TextDecoder}for(let x=0;x<v;x++)o.h.h=!0,p+=o.h.i.decode(f[x],{stream:!(O&&x==v-1)});return f.length=0,o.h.g+=p,o.C=0,o.h.g}function Se(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function Qo(o,f){var p=o.C,v=f.indexOf(`
`,p);return v==-1?rr:(p=Number(f.substring(p,v)),isNaN(p)?Ji:(v+=1,v+p>f.length?rr:(f=f.slice(v,v+p),o.C=v+p,f)))}Ge.prototype.cancel=function(){this.K=!0,cn(this)};function Or(o){o.T=Date.now()+o.H,yr(o,o.H)}function yr(o,f){if(o.D!=null)throw Error("WatchDog timer not null");o.D=er(y(o.aa,o),f)}function sr(o){o.D&&(c.clearTimeout(o.D),o.D=null)}Ge.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(Pu(this.i,this.B),this.M!=2&&(tr(),Qt(17)),cn(this),this.m=2,_r(this)):yr(this,this.T-o)};function _r(o){o.j.I==0||o.K||Gs(o.j,o)}function cn(o){sr(o);var f=o.O;f&&typeof f.dispose=="function"&&f.dispose(),o.O=null,sn(o.V),o.g&&(f=o.g,o.g=null,f.abort(),f.dispose())}function yi(o,f){try{var p=o.j;if(p.I!=0&&(p.g==o||ei(p.h,o))){if(!o.L&&ei(p.h,o)&&p.I==3){try{var v=p.Ba.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var O=v;if(O[0]==0){t:if(!p.v){if(p.g)if(p.g.F+3e3<o.F)ai(p),Xn(p);else break t;ss(p),Qt(18)}}else p.xa=O[1],0<p.xa-p.K&&O[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=er(y(p.Va,p),6e3));Kn(p.h)<=1&&p.ta&&(p.ta=void 0)}else wn(p,11)}else if((o.L||p.g==o)&&ai(p),!w(f))for(O=p.Ba.g.parse(f),f=0;f<O.length;f++){let wt=O[f];const Ft=wt[0];if(!(Ft<=p.K))if(p.K=Ft,wt=wt[1],p.I==2)if(wt[0]=="c"){p.M=wt[1],p.ba=wt[2];const Ce=wt[3];Ce!=null&&(p.ka=Ce,p.j.info("VER="+p.ka));const dn=wt[4];dn!=null&&(p.za=dn,p.j.info("SVER="+p.za));const Ke=wt[5];Ke!=null&&typeof Ke=="number"&&Ke>0&&(v=1.5*Ke,p.O=v,p.j.info("backChannelRequestTimeoutMs_="+v)),v=p;const Ye=o.g;if(Ye){const Mn=Ye.g?Ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mn){var x=v.h;x.g||Mn.indexOf("spdy")==-1&&Mn.indexOf("quic")==-1&&Mn.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Ei(x,x.h),x.h=null))}if(v.G){const ls=Ye.g?Ye.g.getResponseHeader("X-HTTP-Session-Id"):null;ls&&(v.wa=ls,It(v.J,v.G,ls))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-o.F,p.j.info("Handshake RTT: "+p.T+"ms")),v=p;var z=o;if(v.na=oo(v,v.L?v.ba:null,v.W),z.L){xr(v.h,z);var mt=z,Mt=v.O;Mt&&(mt.H=Mt),mt.D&&(sr(mt),Or(mt)),v.g=z}else ro(v);p.i.length>0&&Lr(p)}else wt[0]!="stop"&&wt[0]!="close"||wn(p,7);else p.I==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?wn(p,7):si(p):wt[0]!="noop"&&p.l&&p.l.qa(wt),p.A=0)}}tr(4)}catch{}}var Ou=class{constructor(o,f){this.g=o,this.map=f}};function _i(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vi(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Kn(o){return o.h?1:o.g?o.g.size:0}function ei(o,f){return o.h?o.h==f:o.g?o.g.has(f):!1}function Ei(o,f){o.g?o.g.add(f):o.h=f}function xr(o,f){o.h&&o.h==f?o.h=null:o.g&&o.g.has(f)&&o.g.delete(f)}_i.prototype.cancel=function(){if(this.i=Zi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Zi(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let f=o.i;for(const p of o.g.values())f=f.concat(p.G);return f}return M(o.i)}var ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xu(o,f){if(o){o=o.split("&");for(let p=0;p<o.length;p++){const v=o[p].indexOf("=");let O,x=null;v>=0?(O=o[p].substring(0,v),x=o[p].substring(v+1)):O=o[p],f(O,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Qe(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;o instanceof Qe?(this.l=o.l,ar(this,o.j),this.o=o.o,this.g=o.g,vr(this,o.u),this.h=o.h,Mr(this,Za(o.i)),this.m=o.m):o&&(f=String(o).match(ts))?(this.l=!1,ar(this,f[1]||"",!0),this.o=Er(f[2]||""),this.g=Er(f[3]||"",!0),vr(this,f[4]),this.h=Er(f[5]||"",!0),Mr(this,f[6]||"",!0),this.m=Er(f[7]||"")):(this.l=!1,this.i=new hn(null,this.l))}Qe.prototype.toString=function(){const o=[];var f=this.j;f&&o.push(Ie(f,Fs,!0),":");var p=this.g;return(p||f=="file")&&(o.push("//"),(f=this.o)&&o.push(Ie(f,Fs,!0),"@"),o.push(gr(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&o.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&o.push("/"),o.push(Ie(p,p.charAt(0)=="/"?Ti:Wa,!0))),(p=this.i.toString())&&o.push("?",p),(p=this.m)&&o.push("#",Ie(p,Yo)),o.join("")},Qe.prototype.resolve=function(o){const f=ee(this);let p=!!o.j;p?ar(f,o.j):p=!!o.o,p?f.o=o.o:p=!!o.g,p?f.g=o.g:p=o.u!=null;var v=o.h;if(p)vr(f,o.u);else if(p=!!o.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var O=f.h.lastIndexOf("/");O!=-1&&(v=f.h.slice(0,O+1)+v)}if(O=v,O==".."||O==".")v="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){v=O.lastIndexOf("/",0)==0,O=O.split("/");const x=[];for(let z=0;z<O.length;){const mt=O[z++];mt=="."?v&&z==O.length&&x.push(""):mt==".."?((x.length>1||x.length==1&&x[0]!="")&&x.pop(),v&&z==O.length&&x.push("")):(x.push(mt),v=!0)}v=x.join("/")}else v=O}return p?f.h=v:p=o.i.toString()!=="",p?Mr(f,Za(o.i)):p=!!o.m,p&&(f.m=o.m),f};function ee(o){return new Qe(o)}function ar(o,f,p){o.j=p?Er(f,!0):f,o.j&&(o.j=o.j.replace(/:$/,""))}function vr(o,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);o.u=f}else o.u=null}function Mr(o,f,p){f instanceof hn?(o.i=f,to(o.i,o.l)):(p||(f=Ie(f,Ko)),o.i=new hn(f,o.l))}function It(o,f,p){o.i.set(f,p)}function or(o){return It(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function Er(o,f){return o?f?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ie(o,f,p){return typeof o=="string"?(o=encodeURI(o).replace(f,Xa),p&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Xa(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Fs=/[#\/\?@]/g,Wa=/[#\?:]/g,Ti=/[#\?]/g,Ko=/[#\?@]/g,Yo=/#/g;function hn(o,f){this.h=this.g=null,this.i=o||null,this.j=!!f}function An(o){o.g||(o.g=new Map,o.h=0,o.i&&xu(o.i,function(f,p){o.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}n=hn.prototype,n.add=function(o,f){An(this),this.i=null,o=fn(this,o);let p=this.g.get(o);return p||this.g.set(o,p=[]),p.push(f),this.h+=1,this};function js(o,f){An(o),f=fn(o,f),o.g.has(f)&&(o.i=null,o.h-=o.g.get(f).length,o.g.delete(f))}function zs(o,f){return An(o),f=fn(o,f),o.g.has(f)}n.forEach=function(o,f){An(this),this.g.forEach(function(p,v){p.forEach(function(O){o.call(f,O,v,this)},this)},this)};function es(o,f){An(o);let p=[];if(typeof f=="string")zs(o,f)&&(p=p.concat(o.g.get(fn(o,f))));else for(o=Array.from(o.g.values()),f=0;f<o.length;f++)p=p.concat(o[f]);return p}n.set=function(o,f){return An(this),this.i=null,o=fn(this,o),zs(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[f]),this.h+=1,this},n.get=function(o,f){return o?(o=es(this,o),o.length>0?String(o[0]):f):f};function Ja(o,f,p){js(o,f),p.length>0&&(o.i=null,o.g.set(fn(o,f),M(p)),o.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],f=Array.from(this.g.keys());for(let v=0;v<f.length;v++){var p=f[v];const O=gr(p);p=es(this,p);for(let x=0;x<p.length;x++){let z=O;p[x]!==""&&(z+="="+gr(p[x])),o.push(z)}}return this.i=o.join("&")};function Za(o){const f=new hn;return f.i=o.i,o.g&&(f.g=new Map(o.g),f.h=o.h),f}function fn(o,f){return f=String(f),o.j&&(f=f.toLowerCase()),f}function to(o,f){f&&!o.j&&(An(o),o.i=null,o.g.forEach(function(p,v){const O=v.toLowerCase();v!=O&&(js(this,v),Ja(this,O,p))},o)),o.j=f}function eo(o,f){const p=new nr;if(c.Image){const v=new Image;v.onload=E(Re,p,"TestLoadImage: loaded",!0,f,v),v.onerror=E(Re,p,"TestLoadImage: error",!1,f,v),v.onabort=E(Re,p,"TestLoadImage: abort",!1,f,v),v.ontimeout=E(Re,p,"TestLoadImage: timeout",!1,f,v),c.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=o}else f(!1)}function Ai(o,f){const p=new nr,v=new AbortController,O=setTimeout(()=>{v.abort(),Re(p,"TestPingServer: timeout",!1,f)},1e4);fetch(o,{signal:v.signal}).then(x=>{clearTimeout(O),x.ok?Re(p,"TestPingServer: ok",!0,f):Re(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),Re(p,"TestPingServer: error",!1,f)})}function Re(o,f,p,v,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),v(p)}catch{}}function Xo(){this.g=new Vu}function ni(o){this.i=o.Sb||null,this.h=o.ab||!1}I(ni,Ha),ni.prototype.g=function(){return new kr(this.i,this.h)};function kr(o,f){Xt.call(this),this.H=o,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(kr,Xt),n=kr.prototype,n.open=function(o,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=f,this.readyState=1,Yn(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(f.body=o),(this.H||c).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ue(this)),this.readyState=0},n.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Yn(this)),this.g&&(this.readyState=3,Yn(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ri(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function ri(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}n.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var f=o.value?o.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!o.done}))&&(this.response=this.responseText+=f)}o.done?Ue(this):Yn(this),this.readyState==3&&ri(this)}},n.Oa=function(o){this.g&&(this.response=this.responseText=o,Ue(this))},n.Na=function(o){this.g&&(this.response=o,Ue(this))},n.ga=function(){this.g&&Ue(this)};function Ue(o){o.readyState=4,o.l=null,o.j=null,o.B=null,Yn(o)}n.setRequestHeader=function(o,f){this.A.append(o,f)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,o.push(p[0]+": "+p[1]),p=f.next();return o.join(`\r
`)};function Yn(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(kr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function ii(o){let f="";return qt(o,function(p,v){f+=v,f+=":",f+=p,f+=`\r
`}),f}function xn(o,f,p){t:{for(v in p){var v=!1;break t}v=!0}v||(p=ii(p),typeof o=="string"?p!=null&&gr(p):It(o,f,p))}function Vt(o){Xt.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(Vt,Xt);var qs=/^https?$/i,Wo=["POST","PUT"];n=Vt.prototype,n.Fa=function(o){this.H=o},n.ea=function(o,f,p,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);f=f?f.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nr.g(),this.g.onreadystatechange=V(y(this.Ca,this));try{this.B=!0,this.g.open(f,String(o),!0),this.B=!1}catch(x){wi(this,x);return}if(o=p||"",p=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var O in v)p.set(O,v[O]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const x of v.keys())p.set(x,v.get(x));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(p.keys()).find(x=>x.toLowerCase()=="content-type"),O=c.FormData&&o instanceof c.FormData,!(Array.prototype.indexOf.call(Wo,f,void 0)>=0)||v||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[x,z]of p)this.g.setRequestHeader(x,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(x){wi(this,x)}};function wi(o,f){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=f,o.o=5,Si(o),be(o)}function Si(o){o.A||(o.A=!0,te(o,"complete"),te(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,te(this,"complete"),te(this,"abort"),be(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),be(this,!0)),Vt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Hs(this):this.Xa())},n.Xa=function(){Hs(this)};function Hs(o){if(o.h&&typeof u<"u"){if(o.v&&we(o)==4)setTimeout(o.Ca.bind(o),0);else if(te(o,"readystatechange"),we(o)==4){o.h=!1;try{const x=o.ca();t:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var p;if(!(p=f)){var v;if(v=x===0){let z=String(o.D).match(ts)[1]||null;!z&&c.self&&c.self.location&&(z=c.self.location.protocol.slice(0,-1)),v=!qs.test(z?z.toLowerCase():"")}p=v}if(p)te(o,"complete"),te(o,"success");else{o.o=6;try{var O=we(o)>2?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.ca()+"]",Si(o)}}finally{be(o)}}}}function be(o,f){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const p=o.g;o.g=null,f||te(o,"ready");try{p.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function we(o){return o.g?o.g.readyState:0}n.ca=function(){try{return we(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(o){if(this.g){var f=this.g.responseText;return o&&f.indexOf(o)==0&&(f=f.substring(o.length)),Tn(f)}};function Ii(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function ns(o){const f={};o=(o.g&&we(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<o.length;v++){if(w(o[v]))continue;var p=Nu(o[v]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const x=f[O]||[];f[O]=x,x.push(p)}C(f,function(v){return v.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tr(o,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[o]||f}function rs(o){this.za=0,this.i=[],this.j=new nr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Tr("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Tr("baseRetryDelayMs",5e3,o),this.Za=Tr("retryDelaySeedMs",1e4,o),this.Ta=Tr("forwardChannelMaxRetries",2,o),this.va=Tr("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new _i(o&&o.concurrentRequestLimit),this.Ba=new Xo,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=rs.prototype,n.ka=8,n.I=1,n.connect=function(o,f,p,v){Qt(0),this.W=o,this.H=f||{},p&&v!==void 0&&(this.H.OSID=p,this.H.OAID=v),this.F=this.X,this.J=oo(this,null,this.W),Lr(this)};function si(o){if(Ri(o),o.I==3){var f=o.V++,p=ee(o.J);if(It(p,"SID",o.M),It(p,"RID",f),It(p,"TYPE","terminate"),Ar(o,p),f=new Ge(o,o.j,f),f.M=2,f.A=or(ee(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(f.A.toString(),"")}catch{}!p&&c.Image&&(new Image().src=f.A,p=!0),p||(f.g=os(f.j,null),f.g.ea(f.A)),f.F=Date.now(),Or(f)}ao(o)}function Xn(o){o.g&&(as(o),o.g.cancel(),o.g=null)}function Ri(o){Xn(o),o.v&&(c.clearTimeout(o.v),o.v=null),ai(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&c.clearTimeout(o.m),o.m=null)}function Lr(o){if(!vi(o.h)&&!o.m){o.m=!0;var f=o.Ea;W||T(),ct||(W(),ct=!0),R.add(f,o),o.D=0}}function Mu(o,f){return Kn(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=f.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=er(y(o.Ea,o,f),so(o,o.D)),o.D++,!0)}n.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const O=new Ge(this,this.j,o);let x=this.o;if(this.U&&(x?(x=$(x),J(x,this.U)):x=this.U),this.u!==null||this.R||(O.J=x,x=null),this.S)t:{for(var f=0,p=0;p<this.i.length;p++){e:{var v=this.i[p];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break e}v=void 0}if(v===void 0)break;if(f+=v,f>4096){f=p;break t}if(f===4096||p===this.i.length-1){f=p+1;break t}}f=1e3}else f=1e3;f=is(this,O,f),p=ee(this.J),It(p,"RID",o),It(p,"CVER",22),this.G&&It(p,"X-HTTP-Session-Id",this.G),Ar(this,p),x&&(this.R?f="headers="+gr(ii(x))+"&"+f:this.u&&xn(p,this.u,x)),Ei(this.h,O),this.Ra&&It(p,"TYPE","init"),this.S?(It(p,"$req",f),It(p,"SID","null"),O.U=!0,ir(O,p,null)):ir(O,p,f),this.I=2}}else this.I==3&&(o?no(this,o):this.i.length==0||vi(this.h)||no(this))};function no(o,f){var p;f?p=f.l:p=o.V++;const v=ee(o.J);It(v,"SID",o.M),It(v,"RID",p),It(v,"AID",o.K),Ar(o,v),o.u&&o.o&&xn(v,o.u,o.o),p=new Ge(o,o.j,p,o.D+1),o.u===null&&(p.J=o.o),f&&(o.i=f.G.concat(o.i)),f=is(o,p,1e3),p.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Ei(o.h,p),ir(p,v,f)}function Ar(o,f){o.H&&qt(o.H,function(p,v){It(f,v,p)}),o.l&&qt({},function(p,v){It(f,v,p)})}function is(o,f,p){p=Math.min(o.i.length,p);const v=o.l?y(o.l.Ka,o.l,o):null;t:{var O=o.i;let mt=-1;for(;;){const Mt=["count="+p];mt==-1?p>0?(mt=O[0].g,Mt.push("ofs="+mt)):mt=0:Mt.push("ofs="+mt);let wt=!0;for(let Ft=0;Ft<p;Ft++){var x=O[Ft].g;const Ce=O[Ft].map;if(x-=mt,x<0)mt=Math.max(0,O[Ft].g-100),wt=!1;else try{x="req"+x+"_"||"";try{var z=Ce instanceof Map?Ce:Object.entries(Ce);for(const[dn,Ke]of z){let Ye=Ke;m(Ke)&&(Ye=Pn(Ke)),Mt.push(x+dn+"="+encodeURIComponent(Ye))}}catch(dn){throw Mt.push(x+"type="+encodeURIComponent("_badmap")),dn}}catch{v&&v(Ce)}}if(wt){z=Mt.join("&");break t}}z=void 0}return o=o.i.splice(0,p),f.G=o,z}function ro(o){if(!o.g&&!o.v){o.Y=1;var f=o.Da;W||T(),ct||(W(),ct=!0),R.add(f,o),o.A=0}}function ss(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=er(y(o.Da,o),so(o,o.A)),o.A++,!0)}n.Da=function(){if(this.v=null,io(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=er(y(this.Wa,this),o)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Qt(10),Xn(this),io(this))};function as(o){o.B!=null&&(c.clearTimeout(o.B),o.B=null)}function io(o){o.g=new Ge(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var f=ee(o.na);It(f,"RID","rpc"),It(f,"SID",o.M),It(f,"AID",o.K),It(f,"CI",o.F?"0":"1"),!o.F&&o.ia&&It(f,"TO",o.ia),It(f,"TYPE","xmlhttp"),Ar(o,f),o.u&&o.o&&xn(f,o.u,o.o),o.O&&(o.g.H=o.O);var p=o.g;o=o.ba,p.M=1,p.A=or(ee(f)),p.u=null,p.R=!0,ti(p,o)}n.Va=function(){this.C!=null&&(this.C=null,Xn(this),ss(this),Qt(19))};function ai(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function Gs(o,f){var p=null;if(o.g==f){ai(o),as(o),o.g=null;var v=2}else if(ei(o.h,f))p=f.G,xr(o.h,f),v=1;else return;if(o.I!=0){if(f.o)if(v==1){p=f.u?f.u.length:0,f=Date.now()-f.F;var O=o.D;v=Wr(),te(v,new Qa(v,p)),Lr(o)}else ro(o);else if(O=f.m,O==3||O==0&&f.X>0||!(v==1&&Mu(o,f)||v==2&&ss(o)))switch(p&&p.length>0&&(f=o.h,f.i=f.i.concat(p)),O){case 1:wn(o,5);break;case 4:wn(o,10);break;case 3:wn(o,6);break;default:wn(o,2)}}}function so(o,f){let p=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(p*=2),p*f}function wn(o,f){if(o.j.info("Error code "+f),f==2){var p=y(o.bb,o),v=o.Ua;const O=!v;v=new Qe(v||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ar(v,"https"),or(v),O?eo(v.toString(),p):Ai(v.toString(),p)}else Qt(2);o.I=0,o.l&&o.l.pa(f),ao(o),Ri(o)}n.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function ao(o){if(o.I=0,o.ja=[],o.l){const f=Zi(o.h);(f.length!=0||o.i.length!=0)&&(B(o.ja,f),B(o.ja,o.i),o.h.i.length=0,M(o.i),o.i.length=0),o.l.oa()}}function oo(o,f,p){var v=p instanceof Qe?ee(p):new Qe(p);if(v.g!="")f&&(v.g=f+"."+v.g),vr(v,v.u);else{var O=c.location;v=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;const x=new Qe(null);v&&ar(x,v),f&&(x.g=f),O&&vr(x,O),p&&(x.h=p),v=x}return p=o.G,f=o.wa,p&&f&&It(v,p,f),It(v,"VER",o.ka),Ar(o,v),v}function os(o,f,p){if(f&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=o.Aa&&!o.ma?new Vt(new ni({ab:p})):new Vt(o.ma),f.Fa(o.L),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function lo(){}n=lo.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function oi(){}oi.prototype.g=function(o,f){return new de(o,f)};function de(o,f){Xt.call(this),this.g=new rs(f),this.l=o,this.h=f&&f.messageUrlParams||null,o=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(o?o["X-WebChannel-Content-Type"]=f.messageContentType:o={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(o?o["X-WebChannel-Client-Profile"]=f.sa:o={"X-WebChannel-Client-Profile":f.sa}),this.g.U=o,(o=f&&f.Qb)&&!w(o)&&(this.g.u=o),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!w(f)&&(this.g.G=f,o=this.h,o!==null&&f in o&&(o=this.h,f in o&&delete o[f])),this.j=new Wn(this)}I(de,Xt),de.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},de.prototype.close=function(){si(this.g)},de.prototype.o=function(o){var f=this.g;if(typeof o=="string"){var p={};p.__data__=o,o=p}else this.v&&(p={},p.__data__=Pn(o),o=p);f.i.push(new Ou(f.Ya++,o)),f.I==3&&Lr(f)},de.prototype.N=function(){this.g.l=null,delete this.j,si(this.g),delete this.g,de.Z.N.call(this)};function Qs(o){Vr.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var f=o.__sm__;if(f){t:{for(const p in f){o=p;break t}o=void 0}(this.i=o)&&(o=this.i,f=f!==null&&o in f?f[o]:void 0),this.data=f}else this.data=o}I(Qs,Vr);function uo(){Qn.call(this),this.status=1}I(uo,Qn);function Wn(o){this.g=o}I(Wn,lo),Wn.prototype.ra=function(){te(this.g,"a")},Wn.prototype.qa=function(o){te(this.g,new Qs(o))},Wn.prototype.pa=function(o){te(this.g,new uo)},Wn.prototype.oa=function(){te(this.g,"b")},oi.prototype.createWebChannel=oi.prototype.g,de.prototype.send=de.prototype.o,de.prototype.open=de.prototype.m,de.prototype.close=de.prototype.close,rI=function(){return new oi},nI=function(){return Wr()},eI=qe,py={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Te.NO_ERROR=0,Te.TIMEOUT=8,Te.HTTP_ERROR=6,Hf=Te,He.COMPLETE="complete",tI=He,Ga.EventType=Nn,Nn.OPEN="a",Nn.CLOSE="b",Nn.ERROR="c",Nn.MESSAGE="d",Xt.prototype.listen=Xt.prototype.J,bc=Ga,Vt.prototype.listenOnce=Vt.prototype.K,Vt.prototype.getLastError=Vt.prototype.Ha,Vt.prototype.getLastErrorCode=Vt.prototype.ya,Vt.prototype.getStatus=Vt.prototype.ca,Vt.prototype.getResponseJson=Vt.prototype.La,Vt.prototype.getResponseText=Vt.prototype.la,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Fa,ZS=Vt}).apply(typeof Nf<"u"?Nf:typeof self<"u"?self:typeof window<"u"?window:{});const N0="@firebase/firestore",O0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bn=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=new C_("@firebase/firestore");function Rl(){return Lo.logLevel}function gt(n,...t){if(Lo.logLevel<=se.DEBUG){const e=t.map(P_);Lo.debug(`Firestore (${pu}): ${n}`,...e)}}function Ds(n,...t){if(Lo.logLevel<=se.ERROR){const e=t.map(P_);Lo.error(`Firestore (${pu}): ${n}`,...e)}}function Jl(n,...t){if(Lo.logLevel<=se.WARN){const e=t.map(P_);Lo.warn(`Firestore (${pu}): ${n}`,...e)}}function P_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(n,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,iI(n,r,e)}function iI(n,t,e){let r=`FIRESTORE (${pu}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw Ds(r),new Error(r)}function xe(n,t,e,r){let a="Unexpected state";typeof e=="string"?a=e:r=e,n||iI(t,a,r)}function ae(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let vt=class extends mu{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul=class{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sI=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},cO=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Bn.UNAUTHENTICATED)))}shutdown(){}},hO=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}},fO=class{constructor(t){this.t=t,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){xe(this.o===void 0,42304);let r=this.i;const a=g=>this.i!==r?(r=this.i,e(g)):Promise.resolve();let u=new Ul;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ul,t.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},m=g=>{gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ul)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((r=>this.i!==t?(gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new sI(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return xe(t===null||typeof t=="string",2055,{h:t}),new Bn(t)}},dO=class{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},mO=class{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new dO(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(Bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},x0=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},pO=class{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,YN(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){xe(this.o===void 0,3512);const r=u=>{u.error!=null&&gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,gt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const a=u=>{gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>a(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?a(u):gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new x0(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(xe(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new x0(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aI=class{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=gO(40);for(let u=0;u<a.length;++u)r.length<20&&a[u]<e&&(r+=t.charAt(a[u]%62))}return r}};function Jt(n,t){return n<t?-1:n>t?1:0}function gy(n,t){const e=Math.min(n.length,t.length);for(let r=0;r<e;r++){const a=n.charAt(r),u=t.charAt(r);if(a!==u)return Dg(a)===Dg(u)?Jt(a,u):Dg(a)?1:-1}return Jt(n.length,t.length)}const yO=55296,_O=57343;function Dg(n){const t=n.charCodeAt(0);return t>=yO&&t<=_O}function Zl(n,t,e){return n.length===t.length&&n.every(((r,a)=>e(r,t[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="__name__";let oI=class ga{constructor(t,e,r){e===void 0?e=0:e>t.length&&Lt(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&Lt(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return ga.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof ga?t.forEach((r=>{e.push(r)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let a=0;a<r;a++){const u=ga.compareSegments(t.get(a),e.get(a));if(u!==0)return u}return Jt(t.length,e.length)}static compareSegments(t,e){const r=ga.isNumericId(t),a=ga.isNumericId(e);return r&&!a?-1:!r&&a?1:r&&a?ga.extractNumericId(t).compare(ga.extractNumericId(e)):gy(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ia.fromString(t.substring(4,t.length-2))}},tn=class Gf extends oI{construct(t,e,r){return new Gf(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new vt(ht.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter((a=>a.length>0)))}return new Gf(e)}static emptyPath(){return new Gf([])}};const vO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let Li=class bl extends oI{construct(t,e,r){return new bl(t,e,r)}static isValidIdentifier(t){return vO.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bl.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===M0}static keyField(){return new bl([M0])}static fromServerFormat(t){const e=[];let r="",a=0;const u=()=>{if(r.length===0)throw new vt(ht.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;a<t.length;){const m=t[a];if(m==="\\"){if(a+1===t.length)throw new vt(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new vt(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,a+=2}else m==="`"?(c=!c,a++):m!=="."||c?(r+=m,a++):(u(),a++)}if(u(),c)throw new vt(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new bl(e)}static emptyPath(){return new bl([])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xt=class Cc{constructor(t){this.path=t}static fromPath(t){return new Cc(tn.fromString(t))}static fromName(t){return new Cc(tn.fromString(t).popFirst(5))}static empty(){return new Cc(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&tn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return tn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Cc(new tn(t.slice()))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(n,t,e){if(!e)throw new vt(ht.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function TO(n,t,e,r){if(t===!0&&r===!0)throw new vt(ht.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function k0(n){if(xt.isDocumentKey(n))throw new vt(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Wd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Lt(12329,{type:typeof n})}function Qf(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new vt(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Wd(n);throw new vt(ht.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(n,t){const e={typeString:n};return t&&(e.value=t),e}function gh(n,t){if(!lI(n))throw new vt(ht.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const a=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in n)){e=`JSON missing required field: '${r}'`;break}const c=n[r];if(a&&typeof c!==a){e=`JSON field '${r}' must be a ${a}.`;break}if(u!==void 0&&c!==u.value){e=`Expected '${r}' field to equal '${u.value}'`;break}}if(e)throw new vt(ht.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=-62135596800,U0=1e6;let Cn=class bo{static now(){return bo.fromMillis(Date.now())}static fromDate(t){return bo.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*U0);return new bo(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new vt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new vt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<L0)throw new vt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new vt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/U0}_compareTo(t){return this.seconds===t.seconds?Jt(this.nanoseconds,t.nanoseconds):Jt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bo._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(gh(t,bo._jsonSchema))return new bo(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-L0;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Cn._jsonSchemaVersion="firestore/timestamp/1.0",Cn._jsonSchema={type:nn("string",Cn._jsonSchemaVersion),seconds:nn("number"),nanoseconds:nn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jt=class Kf{static fromTimestamp(t){return new Kf(t)}static min(){return new Kf(new Cn(0,0))}static max(){return new Kf(new Cn(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=-1;function AO(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=jt.fromTimestamp(r===1e9?new Cn(e+1,0):new Cn(e,r));return new ih(a,xt.empty(),t)}function wO(n){return new ih(n.readTime,n.key,rh)}let ih=class yy{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new yy(jt.min(),xt.empty(),rh)}static max(){return new yy(jt.max(),xt.empty(),rh)}};function SO(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=xt.comparator(n.documentKey,t.documentKey),e!==0?e:Jt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";let RO=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jd(n){if(n.code!==ht.FAILED_PRECONDITION||n.message!==IO)throw n;gt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lt=class hr{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new hr(((r,a)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,a)},this.catchCallback=u=>{this.wrapFailure(e,u).next(r,a)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof hr?e:hr.resolve(e)}catch(e){return hr.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):hr.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):hr.reject(e)}static resolve(t){return new hr(((e,r)=>{e(t)}))}static reject(t){return new hr(((e,r)=>{r(t)}))}static waitFor(t){return new hr(((e,r)=>{let a=0,u=0,c=!1;t.forEach((m=>{++a,m.next((()=>{++u,c&&u===a&&e()}),(g=>r(g)))})),c=!0,u===a&&e()}))}static or(t){let e=hr.resolve(!1);for(const r of t)e=e.next((a=>a?hr.resolve(a):r()));return e}static forEach(t,e){const r=[];return t.forEach(((a,u)=>{r.push(e.call(this,a,u))})),this.waitFor(r)}static mapArray(t,e){return new hr(((r,a)=>{const u=t.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const y=g;e(t[y]).next((E=>{c[y]=E,++m,m===u&&r(c)}),(E=>a(E)))}}))}static doWhile(t,e){return new hr(((r,a)=>{const u=()=>{t()===!0?e().next((()=>{u()}),a):r()};u()}))}};function bO(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function gu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zd=class{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}};Zd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=-1;function tm(n){return n==null}function Td(n){return n===0&&1/n==-1/0}function DO(n){return typeof n=="number"&&Number.isInteger(n)&&!Td(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="";function VO(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=$0(t)),t=PO(n.get(e),t);return $0(t)}function PO(n,t){let e=t;const r=n.length;for(let a=0;a<r;a++){const u=n.charAt(a);switch(u){case"\0":e+="";break;case uI:e+="";break;default:e+=u}}return e}function $0(n){return n+uI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function yu(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function cI(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let En=class _y{constructor(t,e){this.comparator=t,this.root=e||Ra.EMPTY}insert(t,e){return new _y(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ra.BLACK,null,null))}remove(t){return new _y(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ra.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return e+r.left.size;a<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,r)=>(t(e,r),!1)))}toString(){const t=[];return this.inorderTraversal(((e,r)=>(t.push(`${e}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Of(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Of(this.root,t,this.comparator,!1)}getReverseIterator(){return new Of(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Of(this.root,t,this.comparator,!0)}},Of=class{constructor(t,e,r,a){this.isReverse=a,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=e?r(t.key,e):1,e&&a&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Ra=class As{constructor(t,e,r,a,u){this.key=t,this.value=e,this.color=r??As.RED,this.left=a??As.EMPTY,this.right=u??As.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,a,u){return new As(t??this.key,e??this.value,r??this.color,a??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let a=this;const u=r(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,e,r),null):u===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return As.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return As.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,As.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,As.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Lt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Lt(27949);return t+(this.isRed()?0:1)}};Ra.EMPTY=null,Ra.RED=!0,Ra.BLACK=!1;Ra.EMPTY=new class{constructor(){this.size=0}get key(){throw Lt(57766)}get value(){throw Lt(16141)}get color(){throw Lt(16727)}get left(){throw Lt(29726)}get right(){throw Lt(36894)}copy(t,e,r,a,u){return this}insert(t,e,r){return new Ra(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hn=class vy{constructor(t){this.comparator=t,this.data=new En(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,r)=>(t(e),!1)))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new F0(this.data.getIterator())}getIteratorFrom(t){return new F0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((r=>{e=e.add(r)})),e}isEqual(t){if(!(t instanceof vy)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,u=r.getNext().key;if(this.comparator(a,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new vy(this.comparator);return e.data=t,e}},F0=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc=class Ey{constructor(t){this.fields=t,t.sort(Li.comparator)}static empty(){return new Ey([])}unionWith(t){let e=new Hn(Li.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new Ey(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Zl(this.fields,t.fields,((e,r)=>e.isEqual(r)))}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hI=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mr=class Ty{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(a){try{return atob(a)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new hI("Invalid base64 string: "+u):u}})(t);return new Ty(e)}static fromUint8Array(t){const e=(function(a){let u="";for(let c=0;c<a.length;++c)u+=String.fromCharCode(a[c]);return u})(t);return new Ty(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const r=new Uint8Array(e.length);for(let a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Jt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};mr.EMPTY_BYTE_STRING=new mr("");const NO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Na(n){if(xe(!!n,39018),typeof n=="string"){let t=0;const e=NO.exec(n);if(xe(!!e,46558,{timestamp:n}),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Fe(n.seconds),nanos:Fe(n.nanos)}}function Fe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Oa(n){return typeof n=="string"?mr.fromBase64String(n):mr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="server_timestamp",dI="__type__",mI="__previous_value__",pI="__local_write_time__";function N_(n){return(n?.mapValue?.fields||{})[dI]?.stringValue===fI}function em(n){const t=n.mapValue.fields[mI];return N_(t)?em(t):t}function sh(n){const t=Na(n.mapValue.fields[pI].timestampValue);return new Cn(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OO=class{constructor(t,e,r,a,u,c,m,g,y,E){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=a,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=E}};const Ad="(default)";let gI=class Ay{constructor(t,e){this.projectId=t,this.database=e||Ad}static empty(){return new Ay("","")}get isDefaultDatabase(){return this.database===Ad}isEqual(t){return t instanceof Ay&&t.projectId===this.projectId&&t.database===this.database}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="__type__",xO="__max__",xf={mapValue:{}},_I="__vector__",wd="value";function xa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?N_(n)?4:kO(n)?9007199254740991:MO(n)?10:11:Lt(28295,{value:n})}function Hi(n,t){if(n===t)return!0;const e=xa(n);if(e!==xa(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return sh(n).isEqual(sh(t));case 3:return(function(a,u){if(typeof a.timestampValue=="string"&&typeof u.timestampValue=="string"&&a.timestampValue.length===u.timestampValue.length)return a.timestampValue===u.timestampValue;const c=Na(a.timestampValue),m=Na(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(a,u){return Oa(a.bytesValue).isEqual(Oa(u.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(a,u){return Fe(a.geoPointValue.latitude)===Fe(u.geoPointValue.latitude)&&Fe(a.geoPointValue.longitude)===Fe(u.geoPointValue.longitude)})(n,t);case 2:return(function(a,u){if("integerValue"in a&&"integerValue"in u)return Fe(a.integerValue)===Fe(u.integerValue);if("doubleValue"in a&&"doubleValue"in u){const c=Fe(a.doubleValue),m=Fe(u.doubleValue);return c===m?Td(c)===Td(m):isNaN(c)&&isNaN(m)}return!1})(n,t);case 9:return Zl(n.arrayValue.values||[],t.arrayValue.values||[],Hi);case 10:case 11:return(function(a,u){const c=a.mapValue.fields||{},m=u.mapValue.fields||{};if(B0(c)!==B0(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!Hi(c[g],m[g])))return!1;return!0})(n,t);default:return Lt(52216,{left:n})}}function ah(n,t){return(n.values||[]).find((e=>Hi(e,t)))!==void 0}function tu(n,t){if(n===t)return 0;const e=xa(n),r=xa(t);if(e!==r)return Jt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Jt(n.booleanValue,t.booleanValue);case 2:return(function(u,c){const m=Fe(u.integerValue||u.doubleValue),g=Fe(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(n,t);case 3:return j0(n.timestampValue,t.timestampValue);case 4:return j0(sh(n),sh(t));case 5:return gy(n.stringValue,t.stringValue);case 6:return(function(u,c){const m=Oa(u),g=Oa(c);return m.compareTo(g)})(n.bytesValue,t.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let y=0;y<m.length&&y<g.length;y++){const E=Jt(m[y],g[y]);if(E!==0)return E}return Jt(m.length,g.length)})(n.referenceValue,t.referenceValue);case 8:return(function(u,c){const m=Jt(Fe(u.latitude),Fe(c.latitude));return m!==0?m:Jt(Fe(u.longitude),Fe(c.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return z0(n.arrayValue,t.arrayValue);case 10:return(function(u,c){const m=u.fields||{},g=c.fields||{},y=m[wd]?.arrayValue,E=g[wd]?.arrayValue,I=Jt(y?.values?.length||0,E?.values?.length||0);return I!==0?I:z0(y,E)})(n.mapValue,t.mapValue);case 11:return(function(u,c){if(u===xf.mapValue&&c===xf.mapValue)return 0;if(u===xf.mapValue)return 1;if(c===xf.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),y=c.fields||{},E=Object.keys(y);g.sort(),E.sort();for(let I=0;I<g.length&&I<E.length;++I){const V=gy(g[I],E[I]);if(V!==0)return V;const M=tu(m[g[I]],y[E[I]]);if(M!==0)return M}return Jt(g.length,E.length)})(n.mapValue,t.mapValue);default:throw Lt(23264,{he:e})}}function j0(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Jt(n,t);const e=Na(n),r=Na(t),a=Jt(e.seconds,r.seconds);return a!==0?a:Jt(e.nanos,r.nanos)}function z0(n,t){const e=n.values||[],r=t.values||[];for(let a=0;a<e.length&&a<r.length;++a){const u=tu(e[a],r[a]);if(u)return u}return Jt(e.length,r.length)}function eu(n){return wy(n)}function wy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const r=Na(e);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return Oa(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return xt.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let r="[",a=!0;for(const u of e.values||[])a?a=!1:r+=",",r+=wy(u);return r+"]"})(n.arrayValue):"mapValue"in n?(function(e){const r=Object.keys(e.fields||{}).sort();let a="{",u=!0;for(const c of r)u?u=!1:a+=",",a+=`${c}:${wy(e.fields[c])}`;return a+"}"})(n.mapValue):Lt(61005,{value:n})}function Yf(n){switch(xa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=em(n);return t?16+Yf(t):16;case 5:return 2*n.stringValue.length;case 6:return Oa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,u)=>a+Yf(u)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return yu(r.fields,((u,c)=>{a+=u.length+Yf(c)})),a})(n.mapValue);default:throw Lt(13486,{value:n})}}function q0(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Sy(n){return!!n&&"integerValue"in n}function O_(n){return!!n&&"arrayValue"in n}function H0(n){return!!n&&"nullValue"in n}function G0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vg(n){return!!n&&"mapValue"in n}function MO(n){return(n?.mapValue?.fields||{})[yI]?.stringValue===_I}function Bc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return yu(n.mapValue.fields,((e,r)=>t.mapValue.fields[e]=Bc(r))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Bc(n.arrayValue.values[e]);return t}return{...n}}function kO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===xO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vo=class Iy{constructor(t){this.value=t}static empty(){return new Iy({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!Vg(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Bc(e)}setAll(t){let e=Li.emptyPath(),r={},a=[];t.forEach(((c,m)=>{if(!e.isImmediateParentOf(m)){const g=this.getFieldsMap(e);this.applyChanges(g,r,a),r={},a=[],e=m.popLast()}c?r[m.lastSegment()]=Bc(c):a.push(m.lastSegment())}));const u=this.getFieldsMap(e);this.applyChanges(u,r,a)}delete(t){const e=this.field(t.popLast());Vg(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Hi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let a=e.mapValue.fields[t.get(r)];Vg(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,r){yu(e,((a,u)=>t[a]=u));for(const a of r)delete t[a]}clone(){return new Iy(Bc(this.value))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vs=class Co{constructor(t,e,r,a,u,c,m){this.key=t,this.documentType=e,this.version=r,this.readTime=a,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(t){return new Co(t,0,jt.min(),jt.min(),jt.min(),Vo.empty(),0)}static newFoundDocument(t,e,r,a){return new Co(t,1,e,jt.min(),r,a,0)}static newNoDocument(t,e){return new Co(t,2,e,jt.min(),jt.min(),Vo.empty(),0)}static newUnknownDocument(t,e){return new Co(t,3,e,jt.min(),jt.min(),Vo.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(jt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Vo.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Vo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Co&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Co(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sd=class{constructor(t,e){this.position=t,this.inclusive=e}};function Q0(n,t,e){let r=0;for(let a=0;a<n.position.length;a++){const u=t[a],c=n.position[a];if(u.field.isKeyField()?r=xt.comparator(xt.fromName(c.referenceValue),e.key):r=tu(c,e.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function K0(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Hi(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Id=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function LO(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vI=class{},vn=class EI extends vI{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new $O(t,e,r):e==="array-contains"?new jO(t,r):e==="in"?new zO(t,r):e==="not-in"?new qO(t,r):e==="array-contains-any"?new HO(t,r):new EI(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new BO(t,r):new FO(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(tu(e,this.value)):e!==null&&xa(this.value)===xa(e)&&this.matchesComparison(tu(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ps=class TI extends vI{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new TI(t,e)}matches(t){return AI(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function AI(n){return n.op==="and"}function wI(n){return UO(n)&&AI(n)}function UO(n){for(const t of n.filters)if(t instanceof Ps)return!1;return!0}function Ry(n){if(n instanceof vn)return n.field.canonicalString()+n.op.toString()+eu(n.value);if(wI(n))return n.filters.map((t=>Ry(t))).join(",");{const t=n.filters.map((e=>Ry(e))).join(",");return`${n.op}(${t})`}}function SI(n,t){return n instanceof vn?(function(r,a){return a instanceof vn&&r.op===a.op&&r.field.isEqual(a.field)&&Hi(r.value,a.value)})(n,t):n instanceof Ps?(function(r,a){return a instanceof Ps&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((u,c,m)=>u&&SI(c,a.filters[m])),!0):!1})(n,t):void Lt(19439)}function II(n){return n instanceof vn?(function(e){return`${e.field.canonicalString()} ${e.op} ${eu(e.value)}`})(n):n instanceof Ps?(function(e){return e.op.toString()+" {"+e.getFilters().map(II).join(" ,")+"}"})(n):"Filter"}let $O=class extends vn{constructor(t,e,r){super(t,e,r),this.key=xt.fromName(r.referenceValue)}matches(t){const e=xt.comparator(t.key,this.key);return this.matchesComparison(e)}},BO=class extends vn{constructor(t,e){super(t,"in",e),this.keys=RI("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}},FO=class extends vn{constructor(t,e){super(t,"not-in",e),this.keys=RI("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}};function RI(n,t){return(t.arrayValue?.values||[]).map((e=>xt.fromName(e.referenceValue)))}let jO=class extends vn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return O_(e)&&ah(e.arrayValue,this.value)}},zO=class extends vn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&ah(this.value.arrayValue,e)}},qO=class extends vn{constructor(t,e){super(t,"not-in",e)}matches(t){if(ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!ah(this.value.arrayValue,e)}},HO=class extends vn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!O_(e)||!e.arrayValue.values)&&e.arrayValue.values.some((r=>ah(this.value.arrayValue,r)))}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GO=class{constructor(t,e=null,r=[],a=[],u=null,c=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=a,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}};function Y0(n,t=null,e=[],r=[],a=null,u=null,c=null){return new GO(n,t,e,r,a,u,c)}function x_(n){const t=ae(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((r=>Ry(r))).join(","),e+="|ob:",e+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),tm(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((r=>eu(r))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((r=>eu(r))).join(",")),t.Te=e}return t.Te}function M_(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!LO(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!SI(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!K0(n.startAt,t.startAt)&&K0(n.endAt,t.endAt)}function by(n){return xt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh=class{constructor(t,e=null,r=[],a=[],u=null,c="F",m=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=a,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function QO(n,t,e,r,a,u,c,m){return new yh(n,t,e,r,a,u,c,m)}function k_(n){return new yh(n)}function X0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bI(n){return n.collectionGroup!==null}function Fc(n){const t=ae(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),e.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Hn(Li.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(t).forEach((u=>{e.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Id(u,r))})),e.has(Li.keyField().canonicalString())||t.Ie.push(new Id(Li.keyField(),r))}return t.Ie}function Ui(n){const t=ae(n);return t.Ee||(t.Ee=KO(t,Fc(n))),t.Ee}function KO(n,t){if(n.limitType==="F")return Y0(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((a=>{const u=a.dir==="desc"?"asc":"desc";return new Id(a.field,u)}));const e=n.endAt?new Sd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Sd(n.startAt.position,n.startAt.inclusive):null;return Y0(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function Cy(n,t){const e=n.filters.concat([t]);return new yh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Dy(n,t,e){return new yh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function nm(n,t){return M_(Ui(n),Ui(t))&&n.limitType===t.limitType}function CI(n){return`${x_(Ui(n))}|lt:${n.limitType}`}function Cl(n){return`Query(target=${(function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map((a=>II(a))).join(", ")}]`),tm(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((a=>eu(a))).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((a=>eu(a))).join(",")),`Target(${r})`})(Ui(n))}; limitType=${n.limitType})`}function rm(n,t){return t.isFoundDocument()&&(function(r,a){const u=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):xt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(n,t)&&(function(r,a){for(const u of Fc(r))if(!u.field.isKeyField()&&a.data.field(u.field)===null)return!1;return!0})(n,t)&&(function(r,a){for(const u of r.filters)if(!u.matches(a))return!1;return!0})(n,t)&&(function(r,a){return!(r.startAt&&!(function(c,m,g){const y=Q0(c,m,g);return c.inclusive?y<=0:y<0})(r.startAt,Fc(r),a)||r.endAt&&!(function(c,m,g){const y=Q0(c,m,g);return c.inclusive?y>=0:y>0})(r.endAt,Fc(r),a))})(n,t)}function YO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function DI(n){return(t,e)=>{let r=!1;for(const a of Fc(n)){const u=XO(a,t,e);if(u!==0)return u;r=r||a.field.isKeyField()}return 0}}function XO(n,t,e){const r=n.field.isKeyField()?xt.comparator(t.key,e.key):(function(u,c,m){const g=c.data.field(u),y=m.data.field(u);return g!==null&&y!==null?tu(g,y):Lt(42886)})(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Lt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[a,u]of r)if(this.equalsFn(a,t))return u}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],t))return void(a[u]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return r.length===1?delete this.inner[e]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(t){yu(this.inner,((e,r)=>{for(const[a,u]of r)t(a,u)}))}isEmpty(){return cI(this.inner)}size(){return this.innerSize}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=new En(xt.comparator);function Ma(){return WO}const VI=new En(xt.comparator);function Vc(...n){let t=VI;for(const e of n)t=t.insert(e.key,e);return t}function JO(n){let t=VI;return n.forEach(((e,r)=>t=t.insert(e,r.overlayedDocument))),t}function Po(){return jc()}function PI(){return jc()}function jc(){return new Ho((n=>n.toString()),((n,t)=>n.isEqual(t)))}const ZO=new Hn(xt.comparator);function le(...n){let t=ZO;for(const e of n)t=t.add(e);return t}const tx=new Hn(Jt);function ex(){return tx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Td(t)?"-0":t}}function NI(n){return{integerValue:""+n}}function nx(n,t){return DO(t)?NI(t):L_(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let im=class{constructor(){this._=void 0}};function rx(n,t,e){return n instanceof Vy?(function(a,u){const c={fields:{[dI]:{stringValue:fI},[pI]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return u&&N_(u)&&(u=em(u)),u&&(c.fields[mI]=u),{mapValue:c}})(e,t):n instanceof Rd?OI(n,t):n instanceof bd?xI(n,t):(function(a,u){const c=sx(a,u),m=W0(c)+W0(a.Ae);return Sy(c)&&Sy(a.Ae)?NI(m):L_(a.serializer,m)})(n,t)}function ix(n,t,e){return n instanceof Rd?OI(n,t):n instanceof bd?xI(n,t):e}function sx(n,t){return n instanceof Py?(function(r){return Sy(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}let Vy=class extends im{},Rd=class extends im{constructor(t){super(),this.elements=t}};function OI(n,t){const e=MI(t);for(const r of n.elements)e.some((a=>Hi(a,r)))||e.push(r);return{arrayValue:{values:e}}}let bd=class extends im{constructor(t){super(),this.elements=t}};function xI(n,t){let e=MI(t);for(const r of n.elements)e=e.filter((a=>!Hi(a,r)));return{arrayValue:{values:e}}}let Py=class extends im{constructor(t,e){super(),this.serializer=t,this.Ae=e}};function W0(n){return Fe(n.integerValue||n.doubleValue)}function MI(n){return O_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ax(n,t){return n.field.isEqual(t.field)&&(function(r,a){return r instanceof Rd&&a instanceof Rd||r instanceof bd&&a instanceof bd?Zl(r.elements,a.elements,Hi):r instanceof Py&&a instanceof Py?Hi(r.Ae,a.Ae):r instanceof Vy&&a instanceof Vy})(n.transform,t.transform)}let Pg=class Xf{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Xf}static exists(t){return new Xf(void 0,t)}static updateTime(t){return new Xf(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Wf(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}let U_=class{};function kI(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new lx(n.key,Pg.none()):new $_(n.key,n.data,Pg.none());{const e=n.data,r=Vo.empty();let a=new Hn(Li.comparator);for(let u of t.fields)if(!a.has(u)){let c=e.field(u);c===null&&u.length>1&&(u=u.popLast(),c=e.field(u)),c===null?r.delete(u):r.set(u,c),a=a.add(u)}return new sm(n.key,r,new Dc(a.toArray()),Pg.none())}}function ox(n,t,e){n instanceof $_?(function(a,u,c){const m=a.value.clone(),g=Z0(a.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,t,e):n instanceof sm?(function(a,u,c){if(!Wf(a.precondition,u))return void u.convertToUnknownDocument(c.version);const m=Z0(a.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(LI(a)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(n,t,e):(function(a,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function zc(n,t,e,r){return n instanceof $_?(function(u,c,m,g){if(!Wf(u.precondition,c))return m;const y=u.value.clone(),E=tA(u.fieldTransforms,g,c);return y.setAll(E),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(n,t,e,r):n instanceof sm?(function(u,c,m,g){if(!Wf(u.precondition,c))return m;const y=tA(u.fieldTransforms,g,c),E=c.data;return E.setAll(LI(u)),E.setAll(y),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((I=>I.field)))})(n,t,e,r):(function(u,c,m){return Wf(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(n,t,e)}function J0(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Zl(r,a,((u,c)=>ax(u,c)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}let $_=class extends U_{constructor(t,e,r,a=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}},sm=class extends U_{constructor(t,e,r,a,u=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=a,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}};function LI(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}})),t}function Z0(n,t,e){const r=new Map;xe(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let a=0;a<e.length;a++){const u=n[a],c=u.transform,m=t.data.field(u.field);r.set(u.field,ix(c,m,e[a]))}return r}function tA(n,t,e){const r=new Map;for(const a of n){const u=a.transform,c=e.data.field(a.field);r.set(a.field,rx(u,c,t))}return r}let lx=class extends U_{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ux=class{constructor(t,e,r,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const u=this.mutations[a];u.key.isEqual(t.key)&&ox(u,t,r[a])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=zc(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=zc(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=PI();return this.mutations.forEach((a=>{const u=t.get(a.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=e.has(a.key)?null:m;const g=kI(c,m);g!==null&&r.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(jt.min())})),r}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),le())}isEqual(t){return this.batchId===t.batchId&&Zl(this.mutations,t.mutations,((e,r)=>J0(e,r)))&&Zl(this.baseMutations,t.baseMutations,((e,r)=>J0(e,r)))}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cx=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hx=class{constructor(t,e){this.count=t,this.unchangedNames=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,re;function UI(n){if(n===void 0)return Ds("GRPC error has no .code"),ht.UNKNOWN;switch(n){case Je.OK:return ht.OK;case Je.CANCELLED:return ht.CANCELLED;case Je.UNKNOWN:return ht.UNKNOWN;case Je.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case Je.INTERNAL:return ht.INTERNAL;case Je.UNAVAILABLE:return ht.UNAVAILABLE;case Je.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case Je.NOT_FOUND:return ht.NOT_FOUND;case Je.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case Je.ABORTED:return ht.ABORTED;case Je.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case Je.DATA_LOSS:return ht.DATA_LOSS;default:return Lt(39323,{code:n})}}(re=Je||(Je={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=new Ia([4294967295,4294967295],0);function eA(n){const t=fx().encode(n),e=new JS;return e.update(t),new Uint8Array(e.digest())}function nA(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),a=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Ia([e,r],0),new Ia([a,u],0)]}let mx=class $I{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new Pc(`Invalid padding: ${e}`);if(r<0)throw new Pc(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Pc(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new Pc(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Ia.fromNumber(this.ge)}ye(t,e,r){let a=t.add(e.multiply(Ia.fromNumber(r)));return a.compare(dx)===1&&(a=new Ia([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=eA(t),[r,a]=nA(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,a,u);if(!this.we(c))return!1}return!0}static create(t,e,r){const a=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),c=new $I(u,a,e);return r.forEach((m=>c.insert(m))),c}insert(t){if(this.ge===0)return;const e=eA(t),[r,a]=nA(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,a,u);this.Se(c)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}},Pc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BI=class FI{constructor(t,e,r,a,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const a=new Map;return a.set(t,B_.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new FI(jt.min(),a,new En(Jt),Ma(),le())}},B_=class jI{constructor(t,e,r,a,u){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new jI(r,e,le(),le(),le())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jf=class{constructor(t,e,r,a){this.be=t,this.removedTargetIds=e,this.key=r,this.De=a}},zI=class{constructor(t,e){this.targetId=t,this.Ce=e}},qI=class{constructor(t,e,r=mr.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=a}},rA=class{constructor(){this.ve=0,this.Fe=iA(),this.Me=mr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=le(),e=le(),r=le();return this.Fe.forEach(((a,u)=>{switch(u){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:r=r.add(a);break;default:Lt(38017,{changeType:u})}})),new B_(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=iA()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},px=class{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ma(),this.Je=Mf(),this.He=Mf(),this.Ye=new En(Jt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:Lt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((r,a)=>{this.rt(a)&&e(a)}))}st(t){const e=t.targetId,r=t.Ce.count,a=this.ot(e);if(a){const u=a.target;if(by(u))if(r===0){const c=new xt(u.path);this.et(e,c,Vs.newNoDocument(c,jt.min()))}else xe(r===1,20013,{expectedCount:r});else{const c=this._t(e);if(c!==r){const m=this.ut(t),g=m?this.ct(m,t,c):1;if(g!==0){this.it(e);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,y)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:u=0}=e;let c,m;try{c=Oa(r).toUint8Array()}catch(g){if(g instanceof hI)return Jl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new mx(c,a,u)}catch(g){return Jl(g instanceof Pc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let a=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(e,u,null),a++)})),a}Tt(t){const e=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&by(m.target)){const g=new xt(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,Vs.newNoDocument(g,t))}u.Be&&(e.set(c,u.ke()),u.qe())}}));let r=le();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(t)));const a=new BI(t,e,this.Ye,this.je,r);return this.je=Ma(),this.Je=Mf(),this.He=Mf(),this.Ye=new En(Jt),a}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,e)?a.Qe(e,1):a.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new rA,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Hn(Jt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Hn(Jt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||gt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new rA),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}};function Mf(){return new En(xt.comparator)}function iA(){return new En(xt.comparator)}const gx={asc:"ASCENDING",desc:"DESCENDING"},yx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_x={and:"AND",or:"OR"};let vx=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function Ny(n,t){return n.useProto3Json||tm(t)?t:{value:t}}function Oy(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function HI(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function $l(n){return xe(!!n,49232),jt.fromTimestamp((function(e){const r=Na(e);return new Cn(r.seconds,r.nanos)})(n))}function GI(n,t){return xy(n,t).canonicalString()}function xy(n,t){const e=(function(a){return new tn(["projects",a.projectId,"databases",a.database])})(n).child("documents");return t===void 0?e:e.child(t)}function QI(n){const t=tn.fromString(n);return xe(JI(t),10190,{key:t.toString()}),t}function Ng(n,t){const e=QI(t);if(e.get(1)!==n.databaseId.projectId)throw new vt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new vt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new xt(YI(e))}function KI(n,t){return GI(n.databaseId,t)}function Ex(n){const t=QI(n);return t.length===4?tn.emptyPath():YI(t)}function sA(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function YI(n){return xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Tx(n,t){let e;if("targetChange"in t){t.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Lt(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],u=(function(y,E){return y.useProto3Json?(xe(E===void 0||typeof E=="string",58123),mr.fromBase64String(E||"")):(xe(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),mr.fromUint8Array(E||new Uint8Array))})(n,t.targetChange.resumeToken),c=t.targetChange.cause,m=c&&(function(y){const E=y.code===void 0?ht.UNKNOWN:UI(y.code);return new vt(E,y.message||"")})(c);e=new qI(r,a,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const a=Ng(n,r.document.name),u=$l(r.document.updateTime),c=r.document.createTime?$l(r.document.createTime):jt.min(),m=new Vo({mapValue:{fields:r.document.fields}}),g=Vs.newFoundDocument(a,u,c,m),y=r.targetIds||[],E=r.removedTargetIds||[];e=new Jf(y,E,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const a=Ng(n,r.document),u=r.readTime?$l(r.readTime):jt.min(),c=Vs.newNoDocument(a,u),m=r.removedTargetIds||[];e=new Jf([],m,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const a=Ng(n,r.document),u=r.removedTargetIds||[];e=new Jf([],u,a,null)}else{if(!("filter"in t))return Lt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:a=0,unchangedNames:u}=r,c=new hx(a,u),m=r.targetId;e=new zI(m,c)}}return e}function Ax(n,t){return{documents:[KI(n,t.path)]}}function wx(n,t){const e={structuredQuery:{}},r=t.path;let a;t.collectionGroup!==null?(a=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=KI(n,a);const u=(function(y){if(y.length!==0)return WI(Ps.create(y,"and"))})(t.filters);u&&(e.structuredQuery.where=u);const c=(function(y){if(y.length!==0)return y.map((E=>(function(V){return{field:Dl(V.field),direction:Rx(V.dir)}})(E)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const m=Ny(n,t.limit);return m!==null&&(e.structuredQuery.limit=m),t.startAt&&(e.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:e,parent:a}}function Sx(n){let t=Ex(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let a=null;if(r>0){xe(r===1,65062);const E=e.from[0];E.allDescendants?a=E.collectionId:t=t.child(E.collectionId)}let u=[];e.where&&(u=(function(I){const V=XI(I);return V instanceof Ps&&wI(V)?V.getFilters():[V]})(e.where));let c=[];e.orderBy&&(c=(function(I){return I.map((V=>(function(B){return new Id(Vl(B.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(V)))})(e.orderBy));let m=null;e.limit&&(m=(function(I){let V;return V=typeof I=="object"?I.value:I,tm(V)?null:V})(e.limit));let g=null;e.startAt&&(g=(function(I){const V=!!I.before,M=I.values||[];return new Sd(M,V)})(e.startAt));let y=null;return e.endAt&&(y=(function(I){const V=!I.before,M=I.values||[];return new Sd(M,V)})(e.endAt)),QO(t,a,c,u,m,"F",g,y)}function Ix(n,t){const e=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Lt(28987,{purpose:a})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function XI(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Vl(e.unaryFilter.field);return vn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Vl(e.unaryFilter.field);return vn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Vl(e.unaryFilter.field);return vn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Vl(e.unaryFilter.field);return vn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Lt(61313);default:return Lt(60726)}})(n):n.fieldFilter!==void 0?(function(e){return vn.create(Vl(e.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Lt(58110);default:return Lt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return Ps.create(e.compositeFilter.filters.map((r=>XI(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Lt(1026)}})(e.compositeFilter.op))})(n):Lt(30097,{filter:n})}function Rx(n){return gx[n]}function bx(n){return yx[n]}function Cx(n){return _x[n]}function Dl(n){return{fieldPath:n.canonicalString()}}function Vl(n){return Li.fromServerFormat(n.fieldPath)}function WI(n){return n instanceof vn?(function(e){if(e.op==="=="){if(G0(e.value))return{unaryFilter:{field:Dl(e.field),op:"IS_NAN"}};if(H0(e.value))return{unaryFilter:{field:Dl(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(G0(e.value))return{unaryFilter:{field:Dl(e.field),op:"IS_NOT_NAN"}};if(H0(e.value))return{unaryFilter:{field:Dl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dl(e.field),op:bx(e.op),value:e.value}}})(n):n instanceof Ps?(function(e){const r=e.getFilters().map((a=>WI(a)));return r.length===1?r[0]:{compositeFilter:{op:Cx(e.op),filters:r}}})(n):Lt(54877,{filter:n})}function JI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F_=class Nc{constructor(t,e,r,a,u=jt.min(),c=jt.min(),m=mr.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new Nc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Nc(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dx=class{constructor(t){this.yt=t}};function Vx(n){const t=Sx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Dy(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Px=class{constructor(){this.Cn=new Nx}addToCollectionParentIndex(t,e){return this.Cn.add(e),lt.resolve()}getCollectionParents(t,e){return lt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return lt.resolve()}deleteFieldIndex(t,e){return lt.resolve()}deleteAllFieldIndexes(t){return lt.resolve()}createTargetIndexes(t,e){return lt.resolve()}getDocumentsMatchingTarget(t,e){return lt.resolve(null)}getIndexType(t,e){return lt.resolve(0)}getFieldIndexes(t,e){return lt.resolve([])}getNextCollectionGroupToUpdate(t){return lt.resolve(null)}getMinOffset(t,e){return lt.resolve(ih.min())}getMinOffsetFromCollectionGroup(t,e){return lt.resolve(ih.min())}updateCollectionGroup(t,e,r){return lt.resolve()}updateIndexEntries(t,e){return lt.resolve()}},Nx=class{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),a=this.index[e]||new Hn(tn.comparator),u=!a.has(r);return this.index[e]=a.add(r),u}has(t){const e=t.lastSegment(),r=t.popLast(),a=this.index[e];return a&&a.has(r)}getEntries(t){return(this.index[t]||new Hn(tn.comparator)).toArray()}};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZI=41943040;let Ni=class Zf{static withCacheSize(t){return new Zf(t,Zf.DEFAULT_COLLECTION_PERCENTILE,Zf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni.DEFAULT_COLLECTION_PERCENTILE=10,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ni.DEFAULT=new Ni(ZI,Ni.DEFAULT_COLLECTION_PERCENTILE,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ni.DISABLED=new Ni(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let My=class ky{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ky(0)}static cr(){return new ky(-1)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="LruGarbageCollector",Ox=1048576;function lA([n,t],[e,r]){const a=Jt(n,e);return a===0?Jt(t,r):a}let xx=class{constructor(t){this.Ir=t,this.buffer=new Hn(lA),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();lA(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}},Mx=class{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){gt(oA,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){gu(e)?gt(oA,"Ignoring IndexedDB error during garbage collection: ",e):await Jd(e)}await this.Vr(3e5)}))}},kx=class{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((r=>Math.floor(e/100*r)))}nthSequenceNumber(t,e){if(e===0)return lt.resolve(Zd.ce);const r=new xx(e);return this.mr.forEachTarget(t,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(t,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(gt("LruGarbageCollector","Garbage collection skipped; disabled"),lt.resolve(aA)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(gt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aA):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,a,u,c,m,g,y;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(gt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),a=this.params.maximumSequenceNumbersToCollect):a=I,c=Date.now(),this.nthSequenceNumber(t,a)))).next((I=>(r=I,m=Date.now(),this.removeTargets(t,r,e)))).next((I=>(u=I,g=Date.now(),this.removeOrphanedDocuments(t,r)))).next((I=>(y=Date.now(),Rl()<=se.DEBUG&&gt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${a} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${I} documents in `+(y-g)+`ms
Total Duration: ${y-E}ms`),lt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:u,documentsRemoved:I}))))}};function Lx(n,t){return new kx(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ux=class{constructor(){this.changes=new Ho((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Vs.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?lt.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $x=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bx=class{constructor(t,e,r,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=a}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next((a=>(r=a,this.remoteDocumentCache.getEntry(t,e)))).next((a=>(r!==null&&zc(r.mutation,a,Dc.empty(),Cn.now()),a)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.getLocalViewOfDocuments(t,r,le()).next((()=>r))))}getLocalViewOfDocuments(t,e,r=le()){const a=Po();return this.populateOverlays(t,a,e).next((()=>this.computeViews(t,e,a,r).next((u=>{let c=Vc();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const r=Po();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,le())))}populateOverlays(t,e,r){const a=[];return r.forEach((u=>{e.has(u)||a.push(u)})),this.documentOverlayCache.getOverlays(t,a).next((u=>{u.forEach(((c,m)=>{e.set(c,m)}))}))}computeViews(t,e,r,a){let u=Ma();const c=jc(),m=(function(){return jc()})();return e.forEach(((g,y)=>{const E=r.get(y.key);a.has(y.key)&&(E===void 0||E.mutation instanceof sm)?u=u.insert(y.key,y):E!==void 0?(c.set(y.key,E.mutation.getFieldMask()),zc(E.mutation,y,E.mutation.getFieldMask(),Cn.now())):c.set(y.key,Dc.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((y,E)=>c.set(y,E))),e.forEach(((y,E)=>m.set(y,new $x(E,c.get(y)??null)))),m)))}recalculateAndSaveOverlays(t,e){const r=jc();let a=new En(((c,m)=>c-m)),u=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const m of c)m.keys().forEach((g=>{const y=e.get(g);if(y===null)return;let E=r.get(g)||Dc.empty();E=m.applyToLocalView(y,E),r.set(g,E);const I=(a.get(m.batchId)||le()).add(g);a=a.insert(m.batchId,I)}))})).next((()=>{const c=[],m=a.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,E=g.value,I=PI();E.forEach((V=>{if(!u.has(V)){const M=kI(e.get(V),r.get(V));M!==null&&I.set(V,M),u=u.add(V)}})),c.push(this.documentOverlayCache.saveOverlays(t,y,I))}return lt.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,e,r,a){return(function(c){return xt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):bI(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,a):this.getDocumentsMatchingCollectionQuery(t,e,r,a)}getNextDocuments(t,e,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,a).next((u=>{const c=a-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,a-u.size):lt.resolve(Po());let m=rh,g=u;return c.next((y=>lt.forEach(y,((E,I)=>(m<I.largestBatchId&&(m=I.largestBatchId),u.get(E)?lt.resolve():this.remoteDocumentCache.getEntry(t,E).next((V=>{g=g.insert(E,V)}))))).next((()=>this.populateOverlays(t,y,u))).next((()=>this.computeViews(t,g,y,le()))).next((E=>({batchId:m,changes:JO(E)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new xt(e)).next((r=>{let a=Vc();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(t,e,r,a){const u=e.collectionGroup;let c=Vc();return this.indexManager.getCollectionParents(t,u).next((m=>lt.forEach(m,(g=>{const y=(function(I,V){return new yh(V,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(e,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,y,r,a).next((E=>{E.forEach(((I,V)=>{c=c.insert(I,V)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,r,a){let u;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,u,a)))).next((c=>{u.forEach(((g,y)=>{const E=y.getKey();c.get(E)===null&&(c=c.insert(E,Vs.newInvalidDocument(E)))}));let m=Vc();return c.forEach(((g,y)=>{const E=u.get(g);E!==void 0&&zc(E.mutation,y,Dc.empty(),Cn.now()),rm(e,y)&&(m=m.insert(g,y))})),m}))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fx=class{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return lt.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(a){return{id:a.id,version:a.version,createTime:$l(a.createTime)}})(e)),lt.resolve()}getNamedQuery(t,e){return lt.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(a){return{name:a.name,query:Vx(a.bundledQuery),readTime:$l(a.readTime)}})(e)),lt.resolve()}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jx=class{constructor(){this.overlays=new En(xt.comparator),this.qr=new Map}getOverlay(t,e){return lt.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Po();return lt.forEach(e,(a=>this.getOverlay(t,a).next((u=>{u!==null&&r.set(a,u)})))).next((()=>r))}saveOverlays(t,e,r){return r.forEach(((a,u)=>{this.St(t,e,u)})),lt.resolve()}removeOverlaysForBatchId(t,e,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),lt.resolve()}getOverlaysForCollection(t,e,r){const a=Po(),u=e.length+1,c=new xt(e.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!e.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>r&&a.set(g.getKey(),g)}return lt.resolve(a)}getOverlaysForCollectionGroup(t,e,r,a){let u=new En(((y,E)=>y-E));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===e&&y.largestBatchId>r){let E=u.get(y.largestBatchId);E===null&&(E=Po(),u=u.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const m=Po(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,E)=>m.set(y,E))),!(m.size()>=a)););return lt.resolve(m)}St(t,e,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new cx(e,r));let u=this.qr.get(e);u===void 0&&(u=le(),this.qr.set(e,u)),this.qr.set(e,u.add(r.key))}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zx=class{constructor(){this.sessionToken=mr.EMPTY_BYTE_STRING}getSessionToken(t){return lt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,lt.resolve()}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j_=class{constructor(){this.Qr=new Hn(yn.$r),this.Ur=new Hn(yn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new yn(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach((r=>this.addReference(r,e)))}removeReference(t,e){this.Gr(new yn(t,e))}zr(t,e){t.forEach((r=>this.removeReference(r,e)))}jr(t){const e=new xt(new tn([])),r=new yn(e,t),a=new yn(e,t+1),u=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new xt(new tn([])),r=new yn(e,t),a=new yn(e,t+1);let u=le();return this.Ur.forEachInRange([r,a],(c=>{u=u.add(c.key)})),u}containsKey(t){const e=new yn(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}},yn=class{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return xt.comparator(t.key,e.key)||Jt(t.Yr,e.Yr)}static Kr(t,e){return Jt(t.Yr,e.Yr)||xt.comparator(t.key,e.key)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qx=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Hn(yn.$r)}checkEmpty(t){return lt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,a){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new ux(u,e,r,a);this.mutationQueue.push(c);for(const m of a)this.Zr=this.Zr.add(new yn(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return lt.resolve(c)}lookupMutationBatch(t,e){return lt.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,a=this.ei(r),u=a<0?0:a;return lt.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return lt.resolve(this.mutationQueue.length===0?CO:this.tr-1)}getAllMutationBatches(t){return lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new yn(e,0),a=new yn(e,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,a],(c=>{const m=this.Xr(c.Yr);u.push(m)})),lt.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Hn(Jt);return e.forEach((a=>{const u=new yn(a,0),c=new yn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{r=r.add(m.Yr)}))})),lt.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,a=r.length+1;let u=r;xt.isDocumentKey(u)||(u=u.child(""));const c=new yn(new xt(u),0);let m=new Hn(Jt);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===a&&(m=m.add(g.Yr)),!0)}),c),lt.resolve(this.ti(m))}ti(t){const e=[];return t.forEach((r=>{const a=this.Xr(r);a!==null&&e.push(a)})),e}removeMutationBatch(t,e){xe(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return lt.forEach(e.mutations,(a=>{const u=new yn(a.key,e.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,e){const r=new yn(e,0),a=this.Zr.firstAfterOrEqual(r);return lt.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,lt.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hx=class{constructor(t){this.ri=t,this.docs=(function(){return new En(xt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,a=this.docs.get(r),u=a?a.size:0,c=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return lt.resolve(r?r.document.mutableCopy():Vs.newInvalidDocument(e))}getEntries(t,e){let r=Ma();return e.forEach((a=>{const u=this.docs.get(a);r=r.insert(a,u?u.document.mutableCopy():Vs.newInvalidDocument(a))})),lt.resolve(r)}getDocumentsMatchingQuery(t,e,r,a){let u=Ma();const c=e.path,m=new xt(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:E}}=g.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||SO(wO(E),r)<=0||(a.has(E.key)||rm(e,E))&&(u=u.insert(E.key,E.mutableCopy()))}return lt.resolve(u)}getAllFromCollectionGroup(t,e,r,a){Lt(9500)}ii(t,e){return lt.forEach(this.docs,(r=>e(r)))}newChangeBuffer(t){return new Gx(this)}getSize(t){return lt.resolve(this.size)}},Gx=class extends Ux{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?e.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(r)})),lt.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qx=class{constructor(t){this.persistence=t,this.si=new Ho((e=>x_(e)),M_),this.lastRemoteSnapshotVersion=jt.min(),this.highestTargetId=0,this.oi=0,this._i=new j_,this.targetCount=0,this.ai=My.ur()}forEachTarget(t,e){return this.si.forEach(((r,a)=>e(a))),lt.resolve()}getLastRemoteSnapshotVersion(t){return lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return lt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),lt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),lt.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new My(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,lt.resolve()}updateTargetData(t,e){return this.Pr(e),lt.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,lt.resolve()}removeTargets(t,e,r){let a=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=e&&r.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),a++)})),lt.waitFor(u).next((()=>a))}getTargetCount(t){return lt.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return lt.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),lt.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const a=this.persistence.referenceDelegate,u=[];return a&&e.forEach((c=>{u.push(a.markPotentiallyOrphaned(t,c))})),lt.waitFor(u)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),lt.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return lt.resolve(r)}containsKey(t,e){return lt.resolve(this._i.containsKey(e))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tR=class{constructor(t,e){this.ui={},this.overlays={},this.ci=new Zd(0),this.li=!1,this.li=!0,this.hi=new zx,this.referenceDelegate=t(this),this.Pi=new Qx(this),this.indexManager=new Px,this.remoteDocumentCache=(function(a){return new Hx(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Dx(e),this.Ii=new Fx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new jx,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new qx(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){gt("MemoryPersistence","Starting transaction:",t);const a=new Kx(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((u=>this.referenceDelegate.di(a).next((()=>u)))).toPromise().then((u=>(a.raiseOnCommittedEvent(),u)))}Ai(t,e){return lt.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,e))))}},Kx=class extends RO{constructor(t){super(),this.currentSequenceNumber=t}},Yx=class eR{constructor(t){this.persistence=t,this.Ri=new j_,this.Vi=null}static mi(t){return new eR(t)}get fi(){if(this.Vi)return this.Vi;throw Lt(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),lt.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),lt.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),lt.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((a=>{a.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lt.forEach(this.fi,(r=>{const a=xt.fromPath(r);return this.gi(t,a).next((u=>{u||e.removeEntry(a,jt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return lt.or([()=>lt.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}},uA=class nR{constructor(t,e){this.persistence=t,this.pi=new Ho((r=>VO(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=Lx(this,e)}static mi(t,e){return new nR(t,e)}Ei(){}di(t){return lt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>e.next((a=>r+a))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}pr(t,e){return lt.forEach(this.pi,((r,a)=>this.br(t,r,a).next((u=>u?lt.resolve():e(a)))))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const a=this.persistence.getRemoteDocumentCache(),u=a.newChangeBuffer();return a.ii(t,(c=>this.br(t,c,e).next((m=>{m||(r++,u.removeEntry(c,jt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),lt.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),lt.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),lt.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),lt.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Yf(t.data.value)),e}br(t,e,r){return lt.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const a=this.pi.get(e);return lt.resolve(a!==void 0&&a>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xx=class rR{constructor(t,e,r,a){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=a}static As(t,e){let r=le(),a=le();for(const u of e.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}return new rR(t,e.fromCache,r,a)}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wx=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jx=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return HP()?8:bO(jP())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,a){const u={result:null};return this.ys(t,e).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(t,e,a,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new Wx;return this.Ss(t,e,c).next((m=>{if(u.result=m,this.Vs)return this.bs(t,e,c,m.size)}))})).next((()=>u.result))}bs(t,e,r,a){return r.documentReadCount<this.fs?(Rl()<=se.DEBUG&&gt("QueryEngine","SDK will not create cache indexes for query:",Cl(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),lt.resolve()):(Rl()<=se.DEBUG&&gt("QueryEngine","Query:",Cl(e),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(Rl()<=se.DEBUG&&gt("QueryEngine","The SDK decides to create cache indexes for query:",Cl(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ui(e))):lt.resolve())}ys(t,e){if(X0(e))return lt.resolve(null);let r=Ui(e);return this.indexManager.getIndexType(t,r).next((a=>a===0?null:(e.limit!==null&&a===1&&(e=Dy(e,null,"F"),r=Ui(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const c=le(...u);return this.ps.getDocuments(t,c).next((m=>this.indexManager.getMinOffset(t,r).next((g=>{const y=this.Ds(e,m);return this.Cs(e,y,c,g.readTime)?this.ys(t,Dy(e,null,"F")):this.vs(t,y,e,g)}))))})))))}ws(t,e,r,a){return X0(e)||a.isEqual(jt.min())?lt.resolve(null):this.ps.getDocuments(t,r).next((u=>{const c=this.Ds(e,u);return this.Cs(e,c,r,a)?lt.resolve(null):(Rl()<=se.DEBUG&&gt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Cl(e)),this.vs(t,c,e,AO(a,rh)).next((m=>m)))}))}Ds(t,e){let r=new Hn(DI(t));return e.forEach(((a,u)=>{rm(t,u)&&(r=r.add(u))})),r}Cs(t,e,r,a){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const u=t.limitType==="F"?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(a)>0)}Ss(t,e,r){return Rl()<=se.DEBUG&&gt("QueryEngine","Using full collection scan to execute query:",Cl(e)),this.ps.getDocumentsMatchingQuery(t,e,ih.min(),r)}vs(t,e,r,a){return this.ps.getDocumentsMatchingQuery(t,r,a).next((u=>(e.forEach((c=>{u=u.insert(c.key,c)})),u)))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="LocalStore",Zx=3e8;let t4=class{constructor(t,e,r,a){this.persistence=t,this.Fs=e,this.serializer=a,this.Ms=new En(Jt),this.xs=new Ho((u=>x_(u)),M_),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Bx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}};function e4(n,t,e,r){return new t4(n,t,e,r)}async function iR(n,t){const e=ae(n);return await e.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return e.mutationQueue.getAllMutationBatches(r).next((u=>(a=u,e.Bs(t),e.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let g=le();for(const y of a){c.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of u){m.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return e.localDocuments.getDocuments(r,g).next((y=>({Ls:y,removedBatchIds:c,addedBatchIds:m})))}))}))}function sR(n){const t=ae(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function n4(n,t){const e=ae(n),r=t.snapshotVersion;let a=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});a=e.Ms;const m=[];t.targetChanges.forEach(((E,I)=>{const V=a.get(I);if(!V)return;m.push(e.Pi.removeMatchingKeys(u,E.removedDocuments,I).next((()=>e.Pi.addMatchingKeys(u,E.addedDocuments,I))));let M=V.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(I)!==null?M=M.withResumeToken(mr.EMPTY_BYTE_STRING,jt.min()).withLastLimboFreeSnapshotVersion(jt.min()):E.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(E.resumeToken,r)),a=a.insert(I,M),(function(G,U,rt){return G.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=Zx?!0:rt.addedDocuments.size+rt.modifiedDocuments.size+rt.removedDocuments.size>0})(V,M,E)&&m.push(e.Pi.updateTargetData(u,M))}));let g=Ma(),y=le();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(r4(u,c,t.documentUpdates).next((E=>{g=E.ks,y=E.qs}))),!r.isEqual(jt.min())){const E=e.Pi.getLastRemoteSnapshotVersion(u).next((I=>e.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(E)}return lt.waitFor(m).next((()=>c.apply(u))).next((()=>e.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(e.Ms=a,u)))}function r4(n,t,e){let r=le(),a=le();return e.forEach((u=>r=r.add(u))),t.getEntries(n,r).next((u=>{let c=Ma();return e.forEach(((m,g)=>{const y=u.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(m)),g.isNoDocument()&&g.version.isEqual(jt.min())?(t.removeEntry(m,g.readTime),c=c.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(g),c=c.insert(m,g)):gt(z_,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{ks:c,qs:a}}))}function i4(n,t){const e=ae(n);return e.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return e.Pi.getTargetData(r,t).next((u=>u?(a=u,lt.resolve(a)):e.Pi.allocateTargetId(r).next((c=>(a=new F_(t,c,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=e.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r}))}async function Ly(n,t,e){const r=ae(n),a=r.Ms.get(t),u=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!gu(c))throw c;gt(z_,`Failed to update sequence numbers for target ${t}: ${c}`)}r.Ms=r.Ms.remove(t),r.xs.delete(a.target)}function cA(n,t,e){const r=ae(n);let a=jt.min(),u=le();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,y,E){const I=ae(g),V=I.xs.get(E);return V!==void 0?lt.resolve(I.Ms.get(V)):I.Pi.getTargetData(y,E)})(r,c,Ui(t)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,t,e?a:jt.min(),e?u:le()))).next((m=>(s4(r,YO(t),m),{documents:m,Qs:u})))))}function s4(n,t,e){let r=n.Os.get(t)||jt.min();e.forEach(((a,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),n.Os.set(t,r)}let hA=class{constructor(){this.activeTargetIds=ex()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}},a4=class{constructor(){this.Mo=new hA,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new hA,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o4=class{Oo(t){}shutdown(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="ConnectivityMonitor";let dA=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){gt(fA,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){gt(fA,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf=null;function Uy(){return kf===null?kf=(function(){return 268435456+Math.round(2147483648*Math.random())})():kf++,"0x"+kf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="RestConnection",l4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};let u4=class{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===Ad?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(t,e,r,a,u){const c=Uy(),m=this.zo(t,e.toUriEncodedString());gt(Og,`Sending RPC '${t}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,a,u);const{host:y}=new URL(m),E=b_(y);return this.Jo(t,m,g,r,E).then((I=>(gt(Og,`Received RPC '${t}' ${c}: `,I),I)),(I=>{throw Jl(Og,`RPC '${t}' ${c} failed with error: `,I,"url: ",m,"request:",r),I}))}Ho(t,e,r,a,u,c){return this.Go(t,e,r,a,u)}jo(t,e,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pu})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((a,u)=>t[u]=a)),r&&r.headers.forEach(((a,u)=>t[u]=a))}zo(t,e){const r=l4[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c4=class{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="WebChannelConnection";let h4=class extends u4{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,a,u){const c=Uy();return new Promise(((m,g)=>{const y=new ZS;y.setWithCredentials(!0),y.listenOnce(tI.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Hf.NO_ERROR:const I=y.getResponseJson();gt(Un,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(I)),m(I);break;case Hf.TIMEOUT:gt(Un,`RPC '${t}' ${c} timed out`),g(new vt(ht.DEADLINE_EXCEEDED,"Request time out"));break;case Hf.HTTP_ERROR:const V=y.getStatus();if(gt(Un,`RPC '${t}' ${c} failed with status:`,V,"response text:",y.getResponseText()),V>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const B=M?.error;if(B&&B.status&&B.message){const G=(function(rt){const F=rt.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(F)>=0?F:ht.UNKNOWN})(B.status);g(new vt(G,B.message))}else g(new vt(ht.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new vt(ht.UNAVAILABLE,"Connection failed."));break;default:Lt(9055,{l_:t,streamId:c,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{gt(Un,`RPC '${t}' ${c} completed.`)}}));const E=JSON.stringify(a);gt(Un,`RPC '${t}' ${c} sending request:`,a),y.send(e,"POST",E,r,15)}))}T_(t,e,r){const a=Uy(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=rI(),m=nI(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,e,r),g.encodeInitMessageHeaders=!0;const E=u.join("");gt(Un,`Creating RPC '${t}' stream ${a}: ${E}`,g);const I=c.createWebChannel(E,g);this.I_(I);let V=!1,M=!1;const B=new c4({Yo:U=>{M?gt(Un,`Not sending because RPC '${t}' stream ${a} is closed:`,U):(V||(gt(Un,`Opening RPC '${t}' stream ${a} transport.`),I.open(),V=!0),gt(Un,`RPC '${t}' stream ${a} sending:`,U),I.send(U))},Zo:()=>I.close()}),G=(U,rt,F)=>{U.listen(rt,(it=>{try{F(it)}catch(tt){setTimeout((()=>{throw tt}),0)}}))};return G(I,bc.EventType.OPEN,(()=>{M||(gt(Un,`RPC '${t}' stream ${a} transport opened.`),B.o_())})),G(I,bc.EventType.CLOSE,(()=>{M||(M=!0,gt(Un,`RPC '${t}' stream ${a} transport closed`),B.a_(),this.E_(I))})),G(I,bc.EventType.ERROR,(U=>{M||(M=!0,Jl(Un,`RPC '${t}' stream ${a} transport errored. Name:`,U.name,"Message:",U.message),B.a_(new vt(ht.UNAVAILABLE,"The operation could not be completed")))})),G(I,bc.EventType.MESSAGE,(U=>{if(!M){const rt=U.data[0];xe(!!rt,16349);const F=rt,it=F?.error||F[0]?.error;if(it){gt(Un,`RPC '${t}' stream ${a} received error:`,it);const tt=it.status;let W=(function(T){const A=Je[T];if(A!==void 0)return UI(A)})(tt),ct=it.message;W===void 0&&(W=ht.INTERNAL,ct="Unknown error status: "+tt+" with message "+it.message),M=!0,B.a_(new vt(W,ct)),I.close()}else gt(Un,`RPC '${t}' stream ${a} received:`,rt),B.u_(rt)}})),G(m,eI.STAT_EVENT,(U=>{U.stat===py.PROXY?gt(Un,`RPC '${t}' stream ${a} detected buffering proxy`):U.stat===py.NOPROXY&&gt(Un,`RPC '${t}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}};function xg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(n){return new vx(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aR=class{constructor(t,e,r=1e3,a=1.5,u=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=a,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,e-r);a>0&&gt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="PersistentStream";let f4=class{constructor(t,e,r,a,u,c,m,g){this.Mi=t,this.S_=r,this.b_=a,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new aR(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===ht.RESOURCE_EXHAUSTED?(Ds(e.toString()),Ds("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===e&&this.G_(r,a)}),(r=>{t((()=>{const a=new vt(ht.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return gt(mA,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(gt(mA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}},d4=class extends f4{constructor(t,e,r,a,u,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,a,c),this.serializer=u}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=Tx(this.serializer,t),r=(function(u){if(!("targetChange"in u))return jt.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?jt.min():c.readTime?$l(c.readTime):jt.min()})(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=sA(this.serializer),e.addTarget=(function(u,c){let m;const g=c.target;if(m=by(g)?{documents:Ax(u,g)}:{query:wx(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=HI(u,c.resumeToken);const y=Ny(u,c.expectedCount);y!==null&&(m.expectedCount=y)}else if(c.snapshotVersion.compareTo(jt.min())>0){m.readTime=Oy(u,c.snapshotVersion.toTimestamp());const y=Ny(u,c.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,t);const r=Ix(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=sA(this.serializer),e.removeTarget=t,this.q_(e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m4=class{},p4=class extends m4{constructor(t,e,r,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new vt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(t,xy(e,r),a,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new vt(ht.UNKNOWN,u.toString())}))}Ho(t,e,r,a,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(t,xy(e,r),a,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new vt(ht.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}},g4=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ds(e),this.aa=!1):gt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu="RemoteStore";let y4=class{constructor(t,e,r,a,u){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{vh(this)&&(gt(nu,"Restarting streams for network reachability change."),await(async function(g){const y=ae(g);y.Ea.add(4),await _h(y),y.Ra.set("Unknown"),y.Ea.delete(4),await om(y)})(this))}))})),this.Ra=new g4(r,a)}};async function om(n){if(vh(n))for(const t of n.da)await t(!0)}async function _h(n){for(const t of n.da)await t(!1)}function oR(n,t){const e=ae(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Q_(e)?G_(e):_u(e).O_()&&H_(e,t))}function q_(n,t){const e=ae(n),r=_u(e);e.Ia.delete(t),r.O_()&&lR(e,t),e.Ia.size===0&&(r.O_()?r.L_():vh(e)&&e.Ra.set("Unknown"))}function H_(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(jt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}_u(n).Y_(t)}function lR(n,t){n.Va.Ue(t),_u(n).Z_(t)}function G_(n){n.Va=new px({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),_u(n).start(),n.Ra.ua()}function Q_(n){return vh(n)&&!_u(n).x_()&&n.Ia.size>0}function vh(n){return ae(n).Ea.size===0}function uR(n){n.Va=void 0}async function _4(n){n.Ra.set("Online")}async function v4(n){n.Ia.forEach(((t,e)=>{H_(n,t)}))}async function E4(n,t){uR(n),Q_(n)?(n.Ra.ha(t),G_(n)):n.Ra.set("Unknown")}async function T4(n,t,e){if(n.Ra.set("Online"),t instanceof qI&&t.state===2&&t.cause)try{await(async function(a,u){const c=u.cause;for(const m of u.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,c),a.Ia.delete(m),a.Va.removeTarget(m))})(n,t)}catch(r){gt(nu,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await pA(n,r)}else if(t instanceof Jf?n.Va.Ze(t):t instanceof zI?n.Va.st(t):n.Va.tt(t),!e.isEqual(jt.min()))try{const r=await sR(n.localStore);e.compareTo(r)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(y);E&&u.Ia.set(y,E.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,y)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(mr.EMPTY_BYTE_STRING,E.snapshotVersion)),lR(u,g);const I=new F_(E.target,g,y,E.sequenceNumber);H_(u,I)})),u.remoteSyncer.applyRemoteEvent(m)})(n,e)}catch(r){gt(nu,"Failed to raise snapshot:",r),await pA(n,r)}}async function pA(n,t,e){if(!gu(t))throw t;n.Ea.add(1),await _h(n),n.Ra.set("Offline"),e||(e=()=>sR(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{gt(nu,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await om(n)}))}async function gA(n,t){const e=ae(n);e.asyncQueue.verifyOperationInProgress(),gt(nu,"RemoteStore received new credentials");const r=vh(e);e.Ea.add(3),await _h(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await om(e)}async function A4(n,t){const e=ae(n);t?(e.Ea.delete(2),await om(e)):t||(e.Ea.add(2),await _h(e),e.Ra.set("Unknown"))}function _u(n){return n.ma||(n.ma=(function(e,r,a){const u=ae(e);return u.sa(),new d4(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)})(n.datastore,n.asyncQueue,{Xo:_4.bind(null,n),t_:v4.bind(null,n),r_:E4.bind(null,n),H_:T4.bind(null,n)}),n.da.push((async t=>{t?(n.ma.B_(),Q_(n)?G_(n):n.Ra.set("Unknown")):(await n.ma.stop(),uR(n))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w4=class cR{constructor(t,e,r,a,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=a,this.removalCallback=u,this.deferred=new Ul,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,a,u){const c=Date.now()+r,m=new cR(t,e,c,a,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new vt(ht.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function hR(n,t){if(Ds("AsyncQueue",`${t}: ${n}`),gu(n))return new vt(ht.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fR=class td{static emptySet(t){return new td(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||xt.comparator(e.key,r.key):(e,r)=>xt.comparator(e.key,r.key),this.keyedMap=Vc(),this.sortedSet=new En(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,r)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof td)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,u=r.getNext().key;if(!a.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new td;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yA=class{constructor(){this.ga=new En(xt.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):Lt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,r)=>{t.push(r)})),t}},Cd=class dR{constructor(t,e,r,a,u,c,m,g,y){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,e,r,a,u){const c=[];return e.forEach((m=>{c.push({type:0,doc:m})})),new dR(t,e,fR.emptySet(e),c,r,a,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&nm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==r[a].type||!e[a].doc.isEqual(r[a].doc))return!1;return!0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S4=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}},I4=class{constructor(){this.queries=_A(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const a=ae(e),u=a.queries;a.queries=_A(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new vt(ht.ABORTED,"Firestore shutting down"))}};function _A(){return new Ho((n=>CI(n)),nm)}async function R4(n,t){const e=ae(n);let r=3;const a=t.query;let u=e.queries.get(a);u?!u.ba()&&t.Da()&&(r=2):(u=new S4,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await e.onListen(a,!0);break;case 1:u.wa=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(c){const m=hR(c,`Initialization of query '${Cl(t.query)}' failed`);return void t.onError(m)}e.queries.set(a,u),u.Sa.push(t),t.va(e.onlineState),u.wa&&t.Fa(u.wa)&&K_(e)}async function b4(n,t){const e=ae(n),r=t.query;let a=3;const u=e.queries.get(r);if(u){const c=u.Sa.indexOf(t);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?a=t.Da()?0:1:!u.ba()&&t.Da()&&(a=2))}switch(a){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function C4(n,t){const e=ae(n);let r=!1;for(const a of t){const u=a.query,c=e.queries.get(u);if(c){for(const m of c.Sa)m.Fa(a)&&(r=!0);c.wa=a}}r&&K_(e)}function D4(n,t,e){const r=ae(n),a=r.queries.get(t);if(a)for(const u of a.Sa)u.onError(e);r.queries.delete(t)}function K_(n){n.Ca.forEach((t=>{t.next()}))}var $y,vA;(vA=$y||($y={})).Ma="default",vA.Cache="cache";let V4=class{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const a of t.docChanges)a.type!==3&&r.push(a);t=new Cd(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Cd.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==$y.Cache}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mR=class{constructor(t){this.key=t}},pR=class{constructor(t){this.key=t}},P4=class{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=le(),this.mutatedKeys=le(),this.eu=DI(t),this.tu=new fR(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new yA,a=e?e.tu:this.tu;let u=e?e.mutatedKeys:this.mutatedKeys,c=a,m=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal(((E,I)=>{const V=a.get(E),M=rm(this.query,I)?I:null,B=!!V&&this.mutatedKeys.has(V.key),G=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let U=!1;V&&M?V.data.isEqual(M.data)?B!==G&&(r.track({type:3,doc:M}),U=!0):this.su(V,M)||(r.track({type:2,doc:M}),U=!0,(g&&this.eu(M,g)>0||y&&this.eu(M,y)<0)&&(m=!0)):!V&&M?(r.track({type:0,doc:M}),U=!0):V&&!M&&(r.track({type:1,doc:V}),U=!0,(g||y)&&(m=!0)),U&&(M?(c=c.add(M),u=G?u.add(E):u.delete(E)):(c=c.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:c,iu:r,Cs:m,mutatedKeys:u}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,a){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((E,I)=>(function(M,B){const G=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lt(20277,{Rt:U})}};return G(M)-G(B)})(E.type,I.type)||this.eu(E.doc,I.doc))),this.ou(r),a=a??!1;const m=e&&!a?this._u():[],g=this.Xa.size===0&&this.current&&!a?1:0,y=g!==this.Za;return this.Za=g,c.length!==0||y?{snapshot:new Cd(this.query,t.tu,u,c,t.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new yA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=le(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const e=[];return t.forEach((r=>{this.Xa.has(r)||e.push(new pR(r))})),this.Xa.forEach((r=>{t.has(r)||e.push(new mR(r))})),e}cu(t){this.Ya=t.Qs,this.Xa=le();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Cd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}};const Y_="SyncEngine";let N4=class{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}},O4=class{constructor(t){this.key=t,this.hu=!1}},x4=class{constructor(t,e,r,a,u,c){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=a,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ho((m=>CI(m)),nm),this.Iu=new Map,this.Eu=new Set,this.du=new En(xt.comparator),this.Au=new Map,this.Ru=new j_,this.Vu={},this.mu=new Map,this.fu=My.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function M4(n,t,e=!0){const r=ER(n);let a;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),a=u.view.lu()):a=await gR(r,t,e,!0),a}async function k4(n,t){const e=ER(n);await gR(e,t,!0,!1)}async function gR(n,t,e,r){const a=await i4(n.localStore,Ui(t)),u=a.targetId,c=n.sharedClientState.addLocalQueryTarget(u,e);let m;return r&&(m=await L4(n,t,u,c==="current",a.resumeToken)),n.isPrimaryClient&&e&&oR(n.remoteStore,a),m}async function L4(n,t,e,r,a){n.pu=(I,V,M)=>(async function(G,U,rt,F){let it=U.view.ru(rt);it.Cs&&(it=await cA(G.localStore,U.query,!1).then((({documents:R})=>U.view.ru(R,it))));const tt=F&&F.targetChanges.get(U.targetId),W=F&&F.targetMismatches.get(U.targetId)!=null,ct=U.view.applyChanges(it,G.isPrimaryClient,tt,W);return TA(G,U.targetId,ct.au),ct.snapshot})(n,I,V,M);const u=await cA(n.localStore,t,!0),c=new P4(t,u.Qs),m=c.ru(u.documents),g=B_.createSynthesizedTargetChangeForCurrentChange(e,r&&n.onlineState!=="Offline",a),y=c.applyChanges(m,n.isPrimaryClient,g);TA(n,e,y.au);const E=new N4(t,e,c);return n.Tu.set(t,E),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),y.snapshot}async function U4(n,t,e){const r=ae(n),a=r.Tu.get(t),u=r.Iu.get(a.targetId);if(u.length>1)return r.Iu.set(a.targetId,u.filter((c=>!nm(c,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Ly(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),e&&q_(r.remoteStore,a.targetId),By(r,a.targetId)})).catch(Jd)):(By(r,a.targetId),await Ly(r.localStore,a.targetId,!0))}async function $4(n,t){const e=ae(n),r=e.Tu.get(t),a=e.Iu.get(r.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),q_(e.remoteStore,r.targetId))}async function yR(n,t){const e=ae(n);try{const r=await n4(e.localStore,t);t.targetChanges.forEach(((a,u)=>{const c=e.Au.get(u);c&&(xe(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?xe(c.hu,14607):a.removedDocuments.size>0&&(xe(c.hu,42227),c.hu=!1))})),await vR(e,r,t)}catch(r){await Jd(r)}}function EA(n,t,e){const r=ae(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const a=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(t);m.snapshot&&a.push(m.snapshot)})),(function(c,m){const g=ae(c);g.onlineState=m;let y=!1;g.queries.forEach(((E,I)=>{for(const V of I.Sa)V.va(m)&&(y=!0)})),y&&K_(g)})(r.eventManager,t),a.length&&r.Pu.H_(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function B4(n,t,e){const r=ae(n);r.sharedClientState.updateQueryState(t,"rejected",e);const a=r.Au.get(t),u=a&&a.key;if(u){let c=new En(xt.comparator);c=c.insert(u,Vs.newNoDocument(u,jt.min()));const m=le().add(u),g=new BI(jt.min(),new Map,new En(Jt),c,m);await yR(r,g),r.du=r.du.remove(u),r.Au.delete(t),X_(r)}else await Ly(r.localStore,t,!1).then((()=>By(r,t,e))).catch(Jd)}function By(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Iu.get(t))n.Tu.delete(r),e&&n.Pu.yu(r,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach((r=>{n.Ru.containsKey(r)||_R(n,r)}))}function _R(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(q_(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),X_(n))}function TA(n,t,e){for(const r of e)r instanceof mR?(n.Ru.addReference(r.key,t),F4(n,r)):r instanceof pR?(gt(Y_,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,t),n.Ru.containsKey(r.key)||_R(n,r.key)):Lt(19791,{wu:r})}function F4(n,t){const e=t.key,r=e.path.canonicalString();n.du.get(e)||n.Eu.has(r)||(gt(Y_,"New document in limbo: "+e),n.Eu.add(r),X_(n))}function X_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new xt(tn.fromString(t)),r=n.fu.next();n.Au.set(r,new O4(e)),n.du=n.du.insert(e,r),oR(n.remoteStore,new F_(Ui(k_(e.path)),r,"TargetPurposeLimboResolution",Zd.ce))}}async function vR(n,t,e){const r=ae(n),a=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,t,e).then((y=>{if((y||e)&&r.isPrimaryClient){const E=y?!y.fromCache:e?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(y){a.push(y);const E=Xx.As(g.targetId,y);u.push(E)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(g,y){const E=ae(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>lt.forEach(y,(V=>lt.forEach(V.Es,(M=>E.persistence.referenceDelegate.addReference(I,V.targetId,M))).next((()=>lt.forEach(V.ds,(M=>E.persistence.referenceDelegate.removeReference(I,V.targetId,M)))))))))}catch(I){if(!gu(I))throw I;gt(z_,"Failed to update sequence numbers: "+I)}for(const I of y){const V=I.targetId;if(!I.fromCache){const M=E.Ms.get(V),B=M.snapshotVersion,G=M.withLastLimboFreeSnapshotVersion(B);E.Ms=E.Ms.insert(V,G)}}})(r.localStore,u))}async function j4(n,t){const e=ae(n);if(!e.currentUser.isEqual(t)){gt(Y_,"User change. New user:",t.toKey());const r=await iR(e.localStore,t);e.currentUser=t,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new vt(ht.CANCELLED,c))}))})),u.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await vR(e,r.Ls)}}function z4(n,t){const e=ae(n),r=e.Au.get(t);if(r&&r.hu)return le().add(r.key);{let a=le();const u=e.Iu.get(t);if(!u)return a;for(const c of u){const m=e.Tu.get(c);a=a.unionWith(m.view.nu)}return a}}function ER(n){const t=ae(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=yR.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=z4.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=B4.bind(null,t),t.Pu.H_=C4.bind(null,t.eventManager),t.Pu.yu=D4.bind(null,t.eventManager),t}let Dd=class{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=am(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return e4(this.persistence,new Jx,t.initialUser,this.serializer)}Cu(t){return new tR(Yx.mi,this.serializer)}Du(t){return new a4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};Dd.provider={build:()=>new Dd};let q4=class extends Dd{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){xe(this.persistence.referenceDelegate instanceof uA,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Mx(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Ni.withCacheSize(this.cacheSizeBytes):Ni.DEFAULT;return new tR((r=>uA.mi(r,e)),this.serializer)}},Fy=class{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>EA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=j4.bind(null,this.syncEngine),await A4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new I4})()}createDatastore(t){const e=am(t.databaseInfo.databaseId),r=(function(u){return new h4(u)})(t.databaseInfo);return(function(u,c,m,g){return new p4(u,c,m,g)})(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return(function(r,a,u,c,m){return new y4(r,a,u,c,m)})(this.localStore,this.datastore,t.asyncQueue,(e=>EA(this.syncEngine,e,0)),(function(){return dA.v()?new dA:new o4})())}createSyncEngine(t,e){return(function(a,u,c,m,g,y,E){const I=new x4(a,u,c,m,g,y);return E&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const r=ae(e);gt(nu,"RemoteStore shutting down."),r.Ea.add(5),await _h(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};Fy.provider={build:()=>new Fy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H4=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ds("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="FirestoreClient";let G4=class{constructor(t,e,r,a,u){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=a,this.user=Bn.UNAUTHENTICATED,this.clientId=aI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{gt(ka,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(gt(ka,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ul;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=hR(e,"Failed to shutdown persistence");t.reject(r)}})),t.promise}};async function Mg(n,t){n.asyncQueue.verifyOperationInProgress(),gt(ka,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await iR(t.localStore,a),r=a)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function AA(n,t){n.asyncQueue.verifyOperationInProgress();const e=await Q4(n);gt(ka,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((r=>gA(t.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>gA(t.remoteStore,a))),n._onlineComponents=t}async function Q4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){gt(ka,"Using user provided OfflineComponentProvider");try{await Mg(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(a){return a.name==="FirebaseError"?a.code===ht.FAILED_PRECONDITION||a.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(e))throw e;Jl("Error using user provided cache. Falling back to memory cache: "+e),await Mg(n,new Dd)}}else gt(ka,"Using default OfflineComponentProvider"),await Mg(n,new q4(void 0));return n._offlineComponents}async function K4(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(gt(ka,"Using user provided OnlineComponentProvider"),await AA(n,n._uninitializedComponentsProvider._online)):(gt(ka,"Using default OnlineComponentProvider"),await AA(n,new Fy))),n._onlineComponents}async function wA(n){const t=await K4(n),e=t.eventManager;return e.onListen=M4.bind(null,t.syncEngine),e.onUnlisten=U4.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=k4.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=$4.bind(null,t.syncEngine),e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="firestore.googleapis.com",IA=!0;let RA=class{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new vt(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=AR,this.ssl=IA}else this.host=t.host,this.ssl=t.ssl??IA;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=ZI;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Ox)throw new vt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}TO("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TR(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},W_=class{constructor(t,e,r,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new vt(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new vt(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RA(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new cO;switch(r.type){case"firstParty":return new mO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new vt(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const r=SA.get(e);r&&(gt("ComponentProvider","Removing Datastore"),SA.delete(e),r.terminate())})(this),Promise.resolve()}};function Y4(n,t,e,r={}){n=Qf(n,W_);const a=b_(t),u=n._getSettings(),c={...u,emulatorOptions:n._getEmulatorOptions()},m=`${t}:${e}`;a&&(LP(`https://${m}`),FP("Firestore",!0)),u.host!==AR&&u.host!==m&&Jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:a,emulatorOptions:r};if(!vd(g,c)&&(n._setSettings(g),r.mockUserToken)){let y,E;if(typeof r.mockUserToken=="string")y=r.mockUserToken,E=Bn.MOCK_USER;else{y=UP(r.mockUserToken,n._app?.options.projectId);const I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new vt(ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Bn(I)}n._authCredentials=new hO(new sI(y,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lm=class wR{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new wR(this.firestore,t,this._query)}},di=class Oc{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ed(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Oc(this.firestore,t,this._key)}toJSON(){return{type:Oc._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(gh(e,Oc._jsonSchema))return new Oc(t,r||null,new xt(tn.fromString(e.referencePath)))}};di._jsonSchemaVersion="firestore/documentReference/1.0",di._jsonSchema={type:nn("string",di._jsonSchemaVersion),referencePath:nn("string")};let ed=class SR extends lm{constructor(t,e,r){super(t,e,k_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new di(this.firestore,null,new xt(t))}withConverter(t){return new SR(this.firestore,t,this._path)}};function qc(n,t,...e){if(n=Wl(n),EO("collection","path",t),n instanceof W_){const r=tn.fromString(t,...e);return k0(r),new ed(n,null,r)}{if(!(n instanceof di||n instanceof ed))throw new vt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(t,...e));return k0(r),new ed(n.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="AsyncQueue";let CA=class{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new aR(this,"async_queue_retry"),this._c=()=>{const r=xg();r&&gt(bA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=xg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=xg();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new Ul;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!gu(t))throw t;gt(bA,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Ds("INTERNAL UNHANDLED ERROR: ",DA(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const a=w4.createAndSchedule(this,t,e,r,(u=>this.hc(u)));return this.tc.push(a),a}uc(){this.nc&&Lt(47125,{Pc:DA(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,r)=>e.targetTimeMs-r.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}};function DA(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(n){return(function(e,r){if(typeof e!="object"||e===null)return!1;const a=e;for(const u of r)if(u in a&&typeof a[u]=="function")return!0;return!1})(n,["next","error","complete"])}let jy=class extends W_{constructor(t,e,r,a){super(t,e,r,a),this.type="firestore",this._queue=new CA,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new CA(t),this._firestoreClient=void 0,await t}}};function X4(n,t){const e=typeof n=="object"?n:ZN(),r=typeof n=="string"?n:Ad,a=V_(e,"firestore").getImmediate({identifier:r});if(!a._initialized){const u=MP("firestore");u&&Y4(a,...u)}return a}function W4(n){if(n._terminated)throw new vt(ht.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||J4(n),n._firestoreClient}function J4(n){const t=n._freezeSettings(),e=(function(a,u,c,m){return new OO(a,u,c,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,TR(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new G4(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl=class Pl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Pl(mr.fromBase64String(t))}catch(e){throw new vt(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Pl(mr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Pl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(gh(t,Pl._jsonSchema))return Pl.fromBase64String(t.bytes)}};Bl._jsonSchemaVersion="firestore/bytes/1.0",Bl._jsonSchema={type:nn("string",Bl._jsonSchemaVersion),bytes:nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IR=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new vt(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Li(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RR=class{constructor(t){this._methodName=t}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl=class nd{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new vt(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new vt(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Jt(this._lat,t._lat)||Jt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:nd._jsonSchemaVersion}}static fromJSON(t){if(gh(t,nd._jsonSchema))return new nd(t.latitude,t.longitude)}};Fl._jsonSchemaVersion="firestore/geoPoint/1.0",Fl._jsonSchema={type:nn("string",Fl._jsonSchemaVersion),latitude:nn("number"),longitude:nn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jl=class rd{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,a){if(r.length!==a.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==a[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:rd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(gh(t,rd._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new rd(t.vectorValues);throw new vt(ht.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};jl._jsonSchemaVersion="firestore/vectorValue/1.0",jl._jsonSchema={type:nn("string",jl._jsonSchemaVersion),vectorValues:nn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=/^__.*__$/;function bR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lt(40011,{Ac:n})}}let tM=class CR{constructor(t,e,r,a,u,c){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=a,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new CR({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return zy(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(bR(this.Ac)&&Z4.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}},eM=class{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||am(t)}Cc(t,e,r,a=!1){return new tM({Ac:t,methodName:e,Dc:r,path:Li.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function nM(n){const t=n._freezeSettings(),e=am(n._databaseId);return new eM(n._databaseId,!!t.ignoreUndefinedProperties,e)}function rM(n,t,e,r=!1){return J_(e,n.Cc(r?4:3,t))}function J_(n,t){if(DR(n=Wl(n)))return sM("Unsupported field value:",t,n),iM(n,t);if(n instanceof RR)return(function(r,a){if(!bR(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(a);u&&a.fieldTransforms.push(u)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,a){const u=[];let c=0;for(const m of r){let g=J_(m,a.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(n,t)}return(function(r,a){if((r=Wl(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nx(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Cn.fromDate(r);return{timestampValue:Oy(a.serializer,u)}}if(r instanceof Cn){const u=new Cn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oy(a.serializer,u)}}if(r instanceof Fl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bl)return{bytesValue:HI(a.serializer,r._byteString)};if(r instanceof di){const u=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:GI(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof jl)return(function(c,m){return{mapValue:{fields:{[yI]:{stringValue:_I},[wd]:{arrayValue:{values:c.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return L_(m.serializer,y)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${Wd(r)}`)})(n,t)}function iM(n,t){const e={};return cI(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):yu(n,((r,a)=>{const u=J_(a,t.mc(r));u!=null&&(e[r]=u)})),{mapValue:{fields:e}}}function DR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Cn||n instanceof Fl||n instanceof Bl||n instanceof di||n instanceof RR||n instanceof jl)}function sM(n,t,e){if(!DR(e)||!lI(e)){const r=Wd(e);throw r==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+r)}}const aM=new RegExp("[~\\*/\\[\\]]");function oM(n,t,e){if(t.search(aM)>=0)throw zy(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new IR(...t.split("."))._internalPath}catch{throw zy(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function zy(n,t,e,r,a){const u=r&&!r.isEmpty(),c=a!==void 0;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${r}`),c&&(g+=` in document ${a}`),g+=")"),new vt(ht.INVALID_ARGUMENT,m+n+g)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VR=class{constructor(t,e,r,a,u){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=a,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new di(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new lM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Z_("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},lM=class extends VR{data(){return super.data()}};function Z_(n,t){return typeof t=="string"?oM(n,t):t instanceof IR?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new vt(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}let tv=class{},cM=class extends tv{};function qy(n,t,...e){let r=[];t instanceof tv&&r.push(t),r=r.concat(e),(function(u){const c=u.filter((g=>g instanceof hM)).length,m=u.filter((g=>g instanceof PR)).length;if(c>1||c>0&&m>0)throw new vt(ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}let PR=class NR extends cM{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new NR(t,e,r)}_apply(t){const e=this._parse(t);return xR(t._query,e),new lm(t.firestore,t.converter,Cy(t._query,e))}_parse(t){const e=nM(t.firestore);return(function(u,c,m,g,y,E,I){let V;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new vt(ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){NA(I,E);const B=[];for(const G of I)B.push(PA(g,u,G));V={arrayValue:{values:B}}}else V=PA(g,u,I)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||NA(I,E),V=rM(m,c,I,E==="in"||E==="not-in");return vn.create(y,E,V)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}};function id(n,t,e){const r=t,a=Z_("where",n);return PR._create(a,r,e)}let hM=class OR extends tv{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new OR(t,e)}_parse(t){const e=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return e.length===1?e[0]:Ps.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(a,u){let c=a;const m=u.getFlattenedFilters();for(const g of m)xR(c,g),c=Cy(c,g)})(t._query,e),new lm(t.firestore,t.converter,Cy(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function PA(n,t,e){if(typeof(e=Wl(e))=="string"){if(e==="")throw new vt(ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bI(t)&&e.indexOf("/")!==-1)throw new vt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(tn.fromString(e));if(!xt.isDocumentKey(r))throw new vt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return q0(n,new xt(r))}if(e instanceof di)return q0(n,e._key);throw new vt(ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wd(e)}.`)}function NA(n,t){if(!Array.isArray(n)||n.length===0)throw new vt(ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function xR(n,t){const e=(function(a,u){for(const c of a)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new vt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new vt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}let fM=class{convertValue(t,e="none"){switch(xa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Fe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Oa(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Lt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return yu(t,((a,u)=>{r[a]=this.convertValue(u,e)})),r}convertVectorValue(t){const e=t.fields?.[wd].arrayValue?.values?.map((r=>Fe(r.doubleValue)));return new jl(e)}convertGeoPoint(t){return new Fl(Fe(t.latitude),Fe(t.longitude))}convertArray(t,e){return(t.values||[]).map((r=>this.convertValue(r,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const r=em(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(sh(t));default:return null}}convertTimestamp(t){const e=Na(t);return new Cn(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=tn.fromString(t);xe(JI(r),9688,{name:t});const a=new gI(r.get(1),r.get(3)),u=new xt(r.popFirst(5));return a.isEqual(e)||Ds(`Document ${u} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),u}},xc=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},Hc=class MR extends VR{constructor(t,e,r,a,u,c){super(t,e,r,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new sd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(Z_("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new vt(ht.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=MR._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}};Hc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hc._jsonSchema={type:nn("string",Hc._jsonSchemaVersion),bundleSource:nn("string","DocumentSnapshot"),bundleName:nn("string"),bundle:nn("string")};let sd=class extends Hc{data(t={}){return super.data(t)}},ad=class kR{constructor(t,e,r,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new xc(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((r=>{t.call(e,new sd(this._firestore,this._userDataWriter,r.key,r,new xc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new vt(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(a,u){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((m=>{const g=new sd(a._firestore,a._userDataWriter,m.doc.key,m.doc,new xc(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new sd(a._firestore,a._userDataWriter,m.doc.key,m.doc,new xc(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,E=-1;return m.type!==0&&(y=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),E=c.indexOf(m.doc.key)),{type:dM(m.type),doc:g,oldIndex:y,newIndex:E}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new vt(ht.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=kR._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=aI.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],a=[];return this.docs.forEach((u=>{u._document!==null&&(e.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),a.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}};function dM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Lt(61501,{type:n})}}ad._jsonSchemaVersion="firestore/querySnapshot/1.0",ad._jsonSchema={type:nn("string",ad._jsonSchemaVersion),bundleSource:nn("string","QuerySnapshot"),bundleName:nn("string"),bundle:nn("string")};let LR=class extends fM{constructor(t){super(),this.firestore=t}convertBytes(t){return new Bl(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new di(this.firestore,null,e)}};function Gc(n,...t){n=Wl(n);let e={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||VA(t[r])||(e=t[r++]);const a={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(VA(t[r])){const g=t[r];t[r]=g.next?.bind(g),t[r+1]=g.error?.bind(g),t[r+2]=g.complete?.bind(g)}let u,c,m;if(n instanceof di)c=Qf(n.firestore,jy),m=k_(n._key.path),u={next:g=>{t[r]&&t[r](mM(c,n,g))},error:t[r+1],complete:t[r+2]};else{const g=Qf(n,lm);c=Qf(g.firestore,jy),m=g._query;const y=new LR(c);u={next:E=>{t[r]&&t[r](new ad(c,y,g,E))},error:t[r+1],complete:t[r+2]},uM(n._query)}return(function(y,E,I,V){const M=new H4(V),B=new V4(E,M,I);return y.asyncQueue.enqueueAndForget((async()=>R4(await wA(y),B))),()=>{M.Nu(),y.asyncQueue.enqueueAndForget((async()=>b4(await wA(y),B)))}})(W4(c),m,a,u)}function mM(n,t,e){const r=e.docs.get(t._key),a=new LR(n);return new Hc(n,a,t._key,r,new xc(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(a){pu=a})(JN),Pa(new bs("firestore",((r,{instanceIdentifier:a,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new jy(new fO(r.getProvider("auth-internal")),new pO(c,r.getProvider("app-check-internal")),(function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new vt(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gI(y.options.projectId,E)})(c,a),c);return u={useFetchStreams:e,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),ki(N0,O0,t),ki(N0,O0,"esm2020")})();var pM="firebase",gM="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ki(pM,gM,"app");const UR="@firebase/installations",ev="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=1e4,BR=`w:${ev}`,FR="FIS_v2",yM="https://firebaseinstallations.googleapis.com/v1",_M=3600*1e3,vM="installations",EM="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Uo=new Xd(vM,EM,TM);function jR(n){return n instanceof mu&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR({projectId:n}){return`${yM}/projects/${n}/installations`}function qR(n){return{token:n.token,requestStatus:2,expiresIn:wM(n.expiresIn),creationTime:Date.now()}}async function HR(n,t){const r=(await t.json()).error;return Uo.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function GR({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function AM(n,{refreshToken:t}){const e=GR(n);return e.append("Authorization",SM(t)),e}async function QR(n){const t=await n();return t.status>=500&&t.status<600?n():t}function wM(n){return Number(n.replace("s","000"))}function SM(n){return`${FR} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IM({appConfig:n,heartbeatServiceProvider:t},{fid:e}){const r=zR(n),a=GR(n),u=t.getImmediate({optional:!0});if(u){const y=await u.getHeartbeatsHeader();y&&a.append("x-firebase-client",y)}const c={fid:e,authVersion:FR,appId:n.appId,sdkVersion:BR},m={method:"POST",headers:a,body:JSON.stringify(c)},g=await QR(()=>fetch(r,m));if(g.ok){const y=await g.json();return{fid:y.fid||e,registrationStatus:2,refreshToken:y.refreshToken,authToken:qR(y.authToken)}}else throw await HR("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(n){return new Promise(t=>{setTimeout(t,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=/^[cdef][\w-]{21}$/,Hy="";function CM(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const e=DM(n);return bM.test(e)?e:Hy}catch{return Hy}}function DM(n){return RM(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=new Map;function XR(n,t){const e=um(n);WR(e,t),VM(e,t)}function WR(n,t){const e=YR.get(n);if(e)for(const r of e)r(t)}function VM(n,t){const e=PM();e&&e.postMessage({key:n,fid:t}),NM()}let No=null;function PM(){return!No&&"BroadcastChannel"in self&&(No=new BroadcastChannel("[Firebase] FID Change"),No.onmessage=n=>{WR(n.data.key,n.data.fid)}),No}function NM(){YR.size===0&&No&&(No.close(),No=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM="firebase-installations-database",xM=1,$o="firebase-installations-store";let kg=null;function nv(){return kg||(kg=KS(OM,xM,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore($o)}}})),kg}async function Vd(n,t){const e=um(n),a=(await nv()).transaction($o,"readwrite"),u=a.objectStore($o),c=await u.get(e);return await u.put(t,e),await a.done,(!c||c.fid!==t.fid)&&XR(n,t.fid),t}async function JR(n){const t=um(n),r=(await nv()).transaction($o,"readwrite");await r.objectStore($o).delete(t),await r.done}async function cm(n,t){const e=um(n),a=(await nv()).transaction($o,"readwrite"),u=a.objectStore($o),c=await u.get(e),m=t(c);return m===void 0?await u.delete(e):await u.put(m,e),await a.done,m&&(!c||c.fid!==m.fid)&&XR(n,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rv(n){let t;const e=await cm(n.appConfig,r=>{const a=MM(r),u=kM(n,a);return t=u.registrationPromise,u.installationEntry});return e.fid===Hy?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function MM(n){const t=n||{fid:CM(),registrationStatus:0};return ZR(t)}function kM(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Uo.create("app-offline"));return{installationEntry:t,registrationPromise:a}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=LM(n,e);return{installationEntry:e,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:UM(n)}:{installationEntry:t}}async function LM(n,t){try{const e=await IM(n,t);return Vd(n.appConfig,e)}catch(e){throw jR(e)&&e.customData.serverCode===409?await JR(n.appConfig):await Vd(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function UM(n){let t=await OA(n.appConfig);for(;t.registrationStatus===1;)await KR(100),t=await OA(n.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:r}=await rv(n);return r||e}return t}function OA(n){return cm(n,t=>{if(!t)throw Uo.create("installation-not-found");return ZR(t)})}function ZR(n){return $M(n)?{fid:n.fid,registrationStatus:0}:n}function $M(n){return n.registrationStatus===1&&n.registrationTime+$R<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BM({appConfig:n,heartbeatServiceProvider:t},e){const r=FM(n,e),a=AM(n,e),u=t.getImmediate({optional:!0});if(u){const y=await u.getHeartbeatsHeader();y&&a.append("x-firebase-client",y)}const c={installation:{sdkVersion:BR,appId:n.appId}},m={method:"POST",headers:a,body:JSON.stringify(c)},g=await QR(()=>fetch(r,m));if(g.ok){const y=await g.json();return qR(y)}else throw await HR("Generate Auth Token",g)}function FM(n,{fid:t}){return`${zR(n)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iv(n,t=!1){let e;const r=await cm(n.appConfig,u=>{if(!tb(u))throw Uo.create("not-registered");const c=u.authToken;if(!t&&qM(c))return u;if(c.requestStatus===1)return e=jM(n,t),u;{if(!navigator.onLine)throw Uo.create("app-offline");const m=GM(u);return e=zM(n,m),m}});return e?await e:r.authToken}async function jM(n,t){let e=await xA(n.appConfig);for(;e.authToken.requestStatus===1;)await KR(100),e=await xA(n.appConfig);const r=e.authToken;return r.requestStatus===0?iv(n,t):r}function xA(n){return cm(n,t=>{if(!tb(t))throw Uo.create("not-registered");const e=t.authToken;return QM(e)?{...t,authToken:{requestStatus:0}}:t})}async function zM(n,t){try{const e=await BM(n,t),r={...t,authToken:e};return await Vd(n.appConfig,r),e}catch(e){if(jR(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await JR(n.appConfig);else{const r={...t,authToken:{requestStatus:0}};await Vd(n.appConfig,r)}throw e}}function tb(n){return n!==void 0&&n.registrationStatus===2}function qM(n){return n.requestStatus===2&&!HM(n)}function HM(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+_M}function GM(n){const t={requestStatus:1,requestTime:Date.now()};return{...n,authToken:t}}function QM(n){return n.requestStatus===1&&n.requestTime+$R<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(n){const t=n,{installationEntry:e,registrationPromise:r}=await rv(t);return r?r.catch(console.error):iv(t).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YM(n,t=!1){const e=n;return await XM(e),(await iv(e,t)).token}async function XM(n){const{registrationPromise:t}=await rv(n);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(n){if(!n||!n.options)throw Lg("App Configuration");if(!n.name)throw Lg("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!n.options[e])throw Lg(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Lg(n){return Uo.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="installations",JM="installations-internal",ZM=n=>{const t=n.getProvider("app").getImmediate(),e=WM(t),r=V_(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},t6=n=>{const t=n.getProvider("app").getImmediate(),e=V_(t,eb).getImmediate();return{getId:()=>KM(e),getToken:a=>YM(e,a)}};function e6(){Pa(new bs(eb,ZM,"PUBLIC")),Pa(new bs(JM,t6,"PRIVATE"))}e6();ki(UR,ev);ki(UR,ev,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="analytics",n6="firebase_id",r6="origin",i6=60*1e3,s6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",sv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new C_("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Qr=new Xd("analytics","Analytics",a6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(n){if(!n.startsWith(sv)){const t=Qr.create("invalid-gtag-resource",{gtagURL:n});return dr.warn(t.message),""}return n}function nb(n){return Promise.all(n.map(t=>t.catch(e=>e)))}function l6(n,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(n,t)),e}function u6(n,t){const e=l6("firebase-js-sdk-policy",{createScriptURL:o6}),r=document.createElement("script"),a=`${sv}?l=${n}&id=${t}`;r.src=e?e?.createScriptURL(a):a,r.async=!0,document.head.appendChild(r)}function c6(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}async function h6(n,t,e,r,a,u){const c=r[a];try{if(c)await t[c];else{const g=(await nb(e)).find(y=>y.measurementId===a);g&&await t[g.appId]}}catch(m){dr.error(m)}n("config",a,u)}async function f6(n,t,e,r,a){try{let u=[];if(a&&a.send_to){let c=a.send_to;Array.isArray(c)||(c=[c]);const m=await nb(e);for(const g of c){const y=m.find(I=>I.measurementId===g),E=y&&t[y.appId];if(E)u.push(E);else{u=[];break}}}u.length===0&&(u=Object.values(t)),await Promise.all(u),n("event",r,a||{})}catch(u){dr.error(u)}}function d6(n,t,e,r){async function a(u,...c){try{if(u==="event"){const[m,g]=c;await f6(n,t,e,m,g)}else if(u==="config"){const[m,g]=c;await h6(n,t,e,r,m,g)}else if(u==="consent"){const[m,g]=c;n("consent",m,g)}else if(u==="get"){const[m,g,y]=c;n("get",m,g,y)}else if(u==="set"){const[m]=c;n("set",m)}else n(u,...c)}catch(m){dr.error(m)}}return a}function m6(n,t,e,r,a){let u=function(...c){window[r].push(arguments)};return window[a]&&typeof window[a]=="function"&&(u=window[a]),window[a]=d6(u,n,t,e),{gtagCore:u,wrappedGtag:window[a]}}function p6(n){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(sv)&&e.src.includes(n))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6=30,y6=1e3;class _6{constructor(t={},e=y6){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const rb=new _6;function v6(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function E6(n){const{appId:t,apiKey:e}=n,r={method:"GET",headers:v6(e)},a=s6.replace("{app-id}",t),u=await fetch(a,r);if(u.status!==200&&u.status!==304){let c="";try{const m=await u.json();m.error?.message&&(c=m.error.message)}catch{}throw Qr.create("config-fetch-failed",{httpStatus:u.status,responseMessage:c})}return u.json()}async function T6(n,t=rb,e){const{appId:r,apiKey:a,measurementId:u}=n.options;if(!r)throw Qr.create("no-app-id");if(!a){if(u)return{measurementId:u,appId:r};throw Qr.create("no-api-key")}const c=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new S6;return setTimeout(async()=>{m.abort()},i6),ib({appId:r,apiKey:a,measurementId:u},c,m,t)}async function ib(n,{throttleEndTimeMillis:t,backoffCount:e},r,a=rb){const{appId:u,measurementId:c}=n;try{await A6(r,t)}catch(m){if(c)return dr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:u,measurementId:c};throw m}try{const m=await E6(n);return a.deleteThrottleMetadata(u),m}catch(m){const g=m;if(!w6(g)){if(a.deleteThrottleMetadata(u),c)return dr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:u,measurementId:c};throw m}const y=Number(g?.customData?.httpStatus)===503?A0(e,a.intervalMillis,g6):A0(e,a.intervalMillis),E={throttleEndTimeMillis:Date.now()+y,backoffCount:e+1};return a.setThrottleMetadata(u,E),dr.debug(`Calling attemptFetch again in ${y} millis`),ib(n,E,r,a)}}function A6(n,t){return new Promise((e,r)=>{const a=Math.max(t-Date.now(),0),u=setTimeout(e,a);n.addEventListener(()=>{clearTimeout(u),r(Qr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function w6(n){if(!(n instanceof mu)||!n.customData)return!1;const t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}class S6{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function I6(n,t,e,r,a){if(a&&a.global){n("event",e,r);return}else{const u=await t,c={...r,send_to:u};n("event",e,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R6(){if(zS())try{await qS()}catch(n){return dr.warn(Qr.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return dr.warn(Qr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function b6(n,t,e,r,a,u,c){const m=T6(n);m.then(V=>{e[V.measurementId]=V.appId,n.options.measurementId&&V.measurementId!==n.options.measurementId&&dr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${V.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(V=>dr.error(V)),t.push(m);const g=R6().then(V=>{if(V)return r.getId()}),[y,E]=await Promise.all([m,g]);p6(u)||u6(u,y.measurementId),a("js",new Date);const I=c?.config??{};return I[r6]="firebase",I.update=!0,E!=null&&(I[n6]=E),a("config",y.measurementId,I),y.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(t){this.app=t}_delete(){return delete Qc[this.app.options.appId],Promise.resolve()}}let Qc={},kA=[];const LA={};let Ug="dataLayer",D6="gtag",UA,sb,$A=!1;function V6(){const n=[];if(qP()&&n.push("This is a browser extension environment."),GP()||n.push("Cookies are not available."),n.length>0){const t=n.map((r,a)=>`(${a+1}) ${r}`).join(" "),e=Qr.create("invalid-analytics-context",{errorInfo:t});dr.warn(e.message)}}function P6(n,t,e){V6();const r=n.options.appId;if(!r)throw Qr.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)dr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Qr.create("no-api-key");if(Qc[r]!=null)throw Qr.create("already-exists",{id:r});if(!$A){c6(Ug);const{wrappedGtag:u,gtagCore:c}=m6(Qc,kA,LA,Ug,D6);sb=u,UA=c,$A=!0}return Qc[r]=b6(n,kA,LA,t,UA,Ug,e),new C6(n)}function N6(n,t,e,r){n=Wl(n),I6(sb,Qc[n.app.options.appId],t,e,r).catch(a=>dr.error(a))}const BA="@firebase/analytics",FA="0.10.18";function O6(){Pa(new bs(MA,(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),a=t.getProvider("installations-internal").getImmediate();return P6(r,a,e)},"PUBLIC")),Pa(new bs("analytics-internal",n,"PRIVATE")),ki(BA,FA),ki(BA,FA,"esm2020");function n(t){try{const e=t.getProvider(MA).getImmediate();return{logEvent:(r,a,u)=>N6(e,r,a,u)}}catch(e){throw Qr.create("interop-component-reg-failed",{reason:e})}}}O6();console.log("Current host:",window.location.hostname);const x6={apiKey:"AIzaSyBICnJmNNRDHRe12kab44SGVyGRGmPMJS8",authDomain:"smas-website-ec8a9.firebaseapp.com",projectId:"smas-website-ec8a9",storageBucket:"smas-website-ec8a9.firebasestorage.app",messagingSenderId:"15458764016",appId:"1:15458764016:web:4c4f6312905cc6de4a6e35",measurementId:"G-THN2RTVTW2"},M6=YS(x6),Kc=X4(M6);console.log("Questions.jsx is being rendered");const $g="sams_authenticated",k6="WeLoveSAMS";function ab(){const[n,t]=Y.useState([]),[e,r]=Y.useState(""),[a,u]=Y.useState([]),[c,m]=Y.useState(null),[g,y]=Y.useState({}),[E,I]=Y.useState({}),[V,M]=Y.useState(""),[B,G]=Y.useState(!1);Y.useEffect(()=>{localStorage.getItem($g)==="true"&&G(!0)},[]);const U=tt=>{tt&&tt.preventDefault(),V.trim()===k6?(G(!0),localStorage.setItem($g,"true")):alert("Incorrect password. Try again!")},rt=()=>{G(!1),M(""),localStorage.removeItem($g),t([]),r(""),u([]),m(null),y({}),I({})};Y.useEffect(()=>{if(!B)return;const tt=qc(Kc,"questions"),W=Gc(tt,ct=>{const R=new Set;ct.forEach(T=>{const A=T.data()||{};A.topic&&R.add(A.topic)}),t(Array.from(R))},ct=>{console.error("Failed to fetch topics:",ct)});return()=>W()},[B]),Y.useEffect(()=>{if(!B||!e)return;const tt=qy(qc(Kc,"questions"),id("topic","==",e)),W=Gc(tt,ct=>{const R=[];ct.forEach(T=>{R.push({id:T.id,...T.data()})}),u(R),m(null),y({}),I({})},ct=>{console.error("Failed to fetch questions:",ct)});return()=>W()},[e,B]);const F=tt=>{m(c===tt?null:tt),y(W=>({...W,[tt]:!W[tt]}))},it=(tt,W)=>{E[tt]===void 0&&(I(ct=>({...ct,[tt]:W})),y(ct=>({...ct,[tt]:!0})))};return B?st.jsx("div",{className:"bg-gradient-to-b from-orange-100 to-orange-50 min-h-screen py-12 px-6 md:px-12",children:st.jsxs("div",{className:"max-w-4xl mx-auto",children:[st.jsxs("div",{className:"flex items-center justify-between mb-6",children:[st.jsx("h1",{className:"text-3xl font-bold text-orange-800",children:"Questions"}),st.jsx("div",{children:st.jsx("button",{onClick:rt,className:"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Logout"})})]}),st.jsxs("div",{className:"mb-8",children:[st.jsx("label",{htmlFor:"topic-select",className:"block text-lg font-medium text-orange-700 mb-2",children:"Select a Topic:"}),st.jsxs("select",{id:"topic-select",value:e,onChange:tt=>r(tt.target.value),className:"w-full p-3 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[st.jsx("option",{value:"",children:"-- Select a topic --"}),n.map(tt=>st.jsx("option",{value:tt,children:tt},tt))]})]}),a.length>0?st.jsx("div",{className:"space-y-6",children:a.map(tt=>{const W=tt.questionImageUrl||tt.questionImage||tt.imageUrl||null,ct=tt.explanationImageUrl||tt.explanationImage||null,R=tt.correctAnswer??tt.answer;return st.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[st.jsx("h2",{className:"text-xl font-semibold text-orange-800 mb-4",children:tt.title||tt.question||"Untitled"}),W&&st.jsx("div",{className:"mb-4",children:st.jsx("img",{src:W,alt:"Question illustration",className:"max-w-full h-auto rounded-md"})}),st.jsx("div",{className:"space-y-2 mb-4",children:tt.options&&tt.options.map((T,A)=>{const D=typeof T=="string"?T:T.text??"",b=E[tt.id]===A,N=R===A,w=E[tt.id]!==void 0;let Ot="w-full text-left p-3 border rounded-md transition-colors cursor-pointer ";return w?b&&N?Ot+="border-green-500 bg-green-100":b&&!N?Ot+="border-red-500 bg-red-100":N?Ot+="border-green-300 bg-green-50":Ot+="border-gray-200":Ot+="border-gray-200 hover:bg-orange-50",st.jsxs("button",{onClick:()=>it(tt.id,A),className:Ot,children:[String.fromCharCode(65+A),". ",D]},A)})}),st.jsx("button",{onClick:()=>F(tt.id),className:"mt-2 px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-colors",children:c===tt.id?"Hide Explanation":"Show Explanation"}),c===tt.id&&st.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-md",children:[st.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Explanation:"}),st.jsx("p",{className:"text-gray-700 mb-3",children:tt.explanation}),ct&&st.jsx("img",{src:ct,alt:"Explanation illustration",className:"max-w-full h-auto rounded-md"})]})]},tt.id)})}):e?st.jsx("p",{className:"text-center text-gray-600",children:"No questions found for this topic."}):st.jsx("p",{className:"text-center text-gray-600",children:"Please select a topic to view questions."})]})}):st.jsx("div",{className:"flex items-center justify-center min-h-screen bg-orange-50",children:st.jsxs("div",{className:"p-6 bg-white rounded-2xl shadow-lg w-80",children:[st.jsx("h1",{className:"text-xl font-bold mb-4 text-center text-orange-700",children:"Enter Password"}),st.jsxs("form",{onSubmit:U,className:"flex flex-col gap-4",children:[st.jsx("input",{type:"password",value:V,onChange:tt=>M(tt.target.value),placeholder:"Password",className:"border rounded-lg px-3 py-2 focus:outline-none focus:ring focus:border-orange-400"}),st.jsx("button",{type:"submit",className:"bg-orange-600 hover:bg-orange-700 text-white font-semibold rounded-lg py-2",children:"Unlock"})]}),st.jsx("p",{className:"text-xs text-center mt-3 text-gray-500",children:"Enter the shared access password."})]})})}var Bg={exports:{}},Rc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jA;function L6(){if(jA)return Rc;jA=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,a,u){var c=null;if(u!==void 0&&(c=""+u),a.key!==void 0&&(c=""+a.key),"key"in a){u={};for(var m in a)m!=="key"&&(u[m]=a[m])}else u=a;return a=u.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:u}}return Rc.Fragment=t,Rc.jsx=e,Rc.jsxs=e,Rc}var zA;function U6(){return zA||(zA=1,Bg.exports=L6()),Bg.exports}var ge=U6(),Fg={exports:{}},Bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qA;function $6(){if(qA)return Bt;qA=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.iterator;function V(C){return C===null||typeof C!="object"?null:(C=I&&C[I]||C["@@iterator"],typeof C=="function"?C:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,G={};function U(C,$,et){this.props=C,this.context=$,this.refs=G,this.updater=et||M}U.prototype.isReactComponent={},U.prototype.setState=function(C,$){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,$,"setState")},U.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function rt(){}rt.prototype=U.prototype;function F(C,$,et){this.props=C,this.context=$,this.refs=G,this.updater=et||M}var it=F.prototype=new rt;it.constructor=F,B(it,U.prototype),it.isPureReactComponent=!0;var tt=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},ct=Object.prototype.hasOwnProperty;function R(C,$,et,J,ut,At){return et=At.ref,{$$typeof:n,type:C,key:$,ref:et!==void 0?et:null,props:At}}function T(C,$){return R(C.type,$,void 0,void 0,void 0,C.props)}function A(C){return typeof C=="object"&&C!==null&&C.$$typeof===n}function D(C){var $={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(et){return $[et]})}var b=/\/+/g;function N(C,$){return typeof C=="object"&&C!==null&&C.key!=null?D(""+C.key):$.toString(36)}function w(){}function Ot(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(w,w):(C.status="pending",C.then(function($){C.status==="pending"&&(C.status="fulfilled",C.value=$)},function($){C.status==="pending"&&(C.status="rejected",C.reason=$)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function zt(C,$,et,J,ut){var At=typeof C;(At==="undefined"||At==="boolean")&&(C=null);var dt=!1;if(C===null)dt=!0;else switch(At){case"bigint":case"string":case"number":dt=!0;break;case"object":switch(C.$$typeof){case n:case t:dt=!0;break;case E:return dt=C._init,zt(dt(C._payload),$,et,J,ut)}}if(dt)return ut=ut(C),dt=J===""?"."+N(C,0):J,tt(ut)?(et="",dt!=null&&(et=dt.replace(b,"$&/")+"/"),zt(ut,$,et,"",function(Vn){return Vn})):ut!=null&&(A(ut)&&(ut=T(ut,et+(ut.key==null||C&&C.key===ut.key?"":(""+ut.key).replace(b,"$&/")+"/")+dt)),$.push(ut)),1;dt=0;var fe=J===""?".":J+":";if(tt(C))for(var Rt=0;Rt<C.length;Rt++)J=C[Rt],At=fe+N(J,Rt),dt+=zt(J,$,et,At,ut);else if(Rt=V(C),typeof Rt=="function")for(C=Rt.call(C),Rt=0;!(J=C.next()).done;)J=J.value,At=fe+N(J,Rt++),dt+=zt(J,$,et,At,ut);else if(At==="object"){if(typeof C.then=="function")return zt(Ot(C),$,et,J,ut);throw $=String(C),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return dt}function X(C,$,et){if(C==null)return C;var J=[],ut=0;return zt(C,J,"","",function(At){return $.call(et,At,ut++)}),J}function pt(C){if(C._status===-1){var $=C._result;$=$(),$.then(function(et){(C._status===0||C._status===-1)&&(C._status=1,C._result=et)},function(et){(C._status===0||C._status===-1)&&(C._status=2,C._result=et)}),C._status===-1&&(C._status=0,C._result=$)}if(C._status===1)return C._result.default;throw C._result}var Tt=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function qt(){}return Bt.Children={map:X,forEach:function(C,$,et){X(C,function(){$.apply(this,arguments)},et)},count:function(C){var $=0;return X(C,function(){$++}),$},toArray:function(C){return X(C,function($){return $})||[]},only:function(C){if(!A(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Bt.Component=U,Bt.Fragment=e,Bt.Profiler=a,Bt.PureComponent=F,Bt.StrictMode=r,Bt.Suspense=g,Bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Bt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return W.H.useMemoCache(C)}},Bt.cache=function(C){return function(){return C.apply(null,arguments)}},Bt.cloneElement=function(C,$,et){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var J=B({},C.props),ut=C.key,At=void 0;if($!=null)for(dt in $.ref!==void 0&&(At=void 0),$.key!==void 0&&(ut=""+$.key),$)!ct.call($,dt)||dt==="key"||dt==="__self"||dt==="__source"||dt==="ref"&&$.ref===void 0||(J[dt]=$[dt]);var dt=arguments.length-2;if(dt===1)J.children=et;else if(1<dt){for(var fe=Array(dt),Rt=0;Rt<dt;Rt++)fe[Rt]=arguments[Rt+2];J.children=fe}return R(C.type,ut,void 0,void 0,At,J)},Bt.createContext=function(C){return C={$$typeof:c,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:u,_context:C},C},Bt.createElement=function(C,$,et){var J,ut={},At=null;if($!=null)for(J in $.key!==void 0&&(At=""+$.key),$)ct.call($,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ut[J]=$[J]);var dt=arguments.length-2;if(dt===1)ut.children=et;else if(1<dt){for(var fe=Array(dt),Rt=0;Rt<dt;Rt++)fe[Rt]=arguments[Rt+2];ut.children=fe}if(C&&C.defaultProps)for(J in dt=C.defaultProps,dt)ut[J]===void 0&&(ut[J]=dt[J]);return R(C,At,void 0,void 0,null,ut)},Bt.createRef=function(){return{current:null}},Bt.forwardRef=function(C){return{$$typeof:m,render:C}},Bt.isValidElement=A,Bt.lazy=function(C){return{$$typeof:E,_payload:{_status:-1,_result:C},_init:pt}},Bt.memo=function(C,$){return{$$typeof:y,type:C,compare:$===void 0?null:$}},Bt.startTransition=function(C){var $=W.T,et={};W.T=et;try{var J=C(),ut=W.S;ut!==null&&ut(et,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(qt,Tt)}catch(At){Tt(At)}finally{W.T=$}},Bt.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Bt.use=function(C){return W.H.use(C)},Bt.useActionState=function(C,$,et){return W.H.useActionState(C,$,et)},Bt.useCallback=function(C,$){return W.H.useCallback(C,$)},Bt.useContext=function(C){return W.H.useContext(C)},Bt.useDebugValue=function(){},Bt.useDeferredValue=function(C,$){return W.H.useDeferredValue(C,$)},Bt.useEffect=function(C,$,et){var J=W.H;if(typeof et=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(C,$)},Bt.useId=function(){return W.H.useId()},Bt.useImperativeHandle=function(C,$,et){return W.H.useImperativeHandle(C,$,et)},Bt.useInsertionEffect=function(C,$){return W.H.useInsertionEffect(C,$)},Bt.useLayoutEffect=function(C,$){return W.H.useLayoutEffect(C,$)},Bt.useMemo=function(C,$){return W.H.useMemo(C,$)},Bt.useOptimistic=function(C,$){return W.H.useOptimistic(C,$)},Bt.useReducer=function(C,$,et){return W.H.useReducer(C,$,et)},Bt.useRef=function(C){return W.H.useRef(C)},Bt.useState=function(C){return W.H.useState(C)},Bt.useSyncExternalStore=function(C,$,et){return W.H.useSyncExternalStore(C,$,et)},Bt.useTransition=function(){return W.H.useTransition()},Bt.version="19.1.1",Bt}var HA;function B6(){return HA||(HA=1,Fg.exports=$6()),Fg.exports}var Hr=B6();const F6=()=>{};var GA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=function(n){const t=[];let e=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},j6=function(n){const t=[];let e=0,r=0;for(;e<n.length;){const a=n[e++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const u=n[e++];t[r++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=n[e++],c=n[e++],m=n[e++],g=((a&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=n[e++],c=n[e++];t[r++]=String.fromCharCode((a&15)<<12|(u&63)<<6|c&63)}}return t.join("")},lb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const u=n[a],c=a+1<n.length,m=c?n[a+1]:0,g=a+2<n.length,y=g?n[a+2]:0,E=u>>2,I=(u&3)<<4|m>>4;let V=(m&15)<<2|y>>6,M=y&63;g||(M=64,c||(V=64)),r.push(e[E],e[I],e[V],e[M])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(ob(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):j6(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const u=e[n.charAt(a++)],m=a<n.length?e[n.charAt(a)]:0;++a;const y=a<n.length?e[n.charAt(a)]:64;++a;const I=a<n.length?e[n.charAt(a)]:64;if(++a,u==null||m==null||y==null||I==null)throw new z6;const V=u<<2|m>>4;if(r.push(V),y!==64){const M=m<<4&240|y>>2;if(r.push(M),I!==64){const B=y<<6&192|I;r.push(B)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class z6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const q6=function(n){const t=ob(n);return lb.encodeByteArray(t,!0)},Pd=function(n){return q6(n).replace(/\./g,"")},ub=function(n){try{return lb.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=()=>H6().__FIREBASE_DEFAULTS__,Q6=()=>{if(typeof process>"u"||typeof GA>"u")return;const n=GA.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},K6=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&ub(n[1]);return t&&JSON.parse(t)},hm=()=>{try{return F6()||G6()||Q6()||K6()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cb=n=>hm()?.emulatorHosts?.[n],Y6=n=>{const t=cb(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},hb=()=>hm()?.config,fb=n=>hm()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function db(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",a=n.iat||0,u=n.sub||n.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Pd(JSON.stringify(e)),Pd(JSON.stringify(c)),""].join(".")}const Yc={};function J6(){const n={prod:[],emulator:[]};for(const t of Object.keys(Yc))Yc[t]?n.emulator.push(t):n.prod.push(t);return n}function Z6(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let QA=!1;function mb(n,t){if(typeof window>"u"||typeof document>"u"||!vu(window.location.host)||Yc[n]===t||Yc[n]||QA)return;Yc[n]=t;function e(V){return`__firebase__banner__${V}`}const r="__firebase__banner",u=J6().prod.length>0;function c(){const V=document.getElementById(r);V&&V.remove()}function m(V){V.style.display="flex",V.style.background="#7faaf0",V.style.position="fixed",V.style.bottom="5px",V.style.left="5px",V.style.padding=".5em",V.style.borderRadius="5px",V.style.alignItems="center"}function g(V,M){V.setAttribute("width","24"),V.setAttribute("id",M),V.setAttribute("height","24"),V.setAttribute("viewBox","0 0 24 24"),V.setAttribute("fill","none"),V.style.marginLeft="-6px"}function y(){const V=document.createElement("span");return V.style.cursor="pointer",V.style.marginLeft="16px",V.style.fontSize="24px",V.innerHTML=" &times;",V.onclick=()=>{QA=!0,c()},V}function E(V,M){V.setAttribute("id",M),V.innerText="Learn more",V.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",V.setAttribute("target","__blank"),V.style.paddingLeft="5px",V.style.textDecoration="underline"}function I(){const V=Z6(r),M=e("text"),B=document.getElementById(M)||document.createElement("span"),G=e("learnmore"),U=document.getElementById(G)||document.createElement("a"),rt=e("preprendIcon"),F=document.getElementById(rt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(V.created){const it=V.element;m(it),E(U,G);const tt=y();g(F,rt),it.append(F,B,U,tt),document.body.appendChild(it)}u?(B.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gn())}function ek(){const n=hm()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ik(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sk(){const n=Gn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ak(){return!ek()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ok(){try{return typeof indexedDB=="object"}catch{return!1}}function lk(){return new Promise((n,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{t(a.error?.message||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk="FirebaseError";class Ls extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=uk,Object.setPrototypeOf(this,Ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Eh.prototype.create)}}class Eh{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},a=`${this.service}/${t}`,u=this.errors[t],c=u?ck(u,r):"Error",m=`${this.serviceName}: ${c} (${a}).`;return new Ls(a,m,r)}}function ck(n,t){return n.replace(hk,(e,r)=>{const a=t[r];return a!=null?String(a):`<${r}?>`})}const hk=/\{\$([^}]+)}/g;function fk(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Bo(n,t){if(n===t)return!0;const e=Object.keys(n),r=Object.keys(t);for(const a of e){if(!r.includes(a))return!1;const u=n[a],c=t[a];if(KA(u)&&KA(c)){if(!Bo(u,c))return!1}else if(u!==c)return!1}for(const a of r)if(!e.includes(a))return!1;return!0}function KA(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(n){const t=[];for(const[e,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function dk(n,t){const e=new mk(n,t);return e.subscribe.bind(e)}class mk{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let a;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");pk(t,["next","error","complete"])?a=t:a={next:t,error:e,complete:r},a.next===void 0&&(a.next=jg),a.error===void 0&&(a.error=jg),a.complete===void 0&&(a.complete=jg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pk(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function jg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(n){return n&&n._delegate?n._delegate:n}class Fo{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new X6;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(_k(t))try{this.getOrInitializeService({instanceIdentifier:Do})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:a});r.resolve(u)}catch{}}}}clearInstance(t=Do){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Do){return this.instances.has(t)}getOptions(t=Do){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(a)}return a}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),a=this.onInitCallbacks.get(r)??new Set;a.add(t),this.onInitCallbacks.set(r,a);const u=this.instances.get(r);return u&&t(u,r),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const a of r)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yk(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Do){return this.component?this.component.multipleInstances?t:Do:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yk(n){return n===Do?void 0:n}function _k(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new gk(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Wt||(Wt={}));const Ek={debug:Wt.DEBUG,verbose:Wt.VERBOSE,info:Wt.INFO,warn:Wt.WARN,error:Wt.ERROR,silent:Wt.SILENT},Tk=Wt.INFO,Ak={[Wt.DEBUG]:"log",[Wt.VERBOSE]:"log",[Wt.INFO]:"info",[Wt.WARN]:"warn",[Wt.ERROR]:"error"},wk=(n,t,...e)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),a=Ak[t];if(a)console[a](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class av{constructor(t){this.name=t,this._logLevel=Tk,this._logHandler=wk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Wt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Ek[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Wt.DEBUG,...t),this._logHandler(this,Wt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Wt.VERBOSE,...t),this._logHandler(this,Wt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Wt.INFO,...t),this._logHandler(this,Wt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Wt.WARN,...t),this._logHandler(this,Wt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Wt.ERROR,...t),this._logHandler(this,Wt.ERROR,...t)}}const Sk=(n,t)=>t.some(e=>n instanceof e);let YA,XA;function Ik(){return YA||(YA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rk(){return XA||(XA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pb=new WeakMap,Gy=new WeakMap,gb=new WeakMap,zg=new WeakMap,ov=new WeakMap;function bk(n){const t=new Promise((e,r)=>{const a=()=>{n.removeEventListener("success",u),n.removeEventListener("error",c)},u=()=>{e(ba(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",u),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&pb.set(e,n)}).catch(()=>{}),ov.set(t,n),t}function Ck(n){if(Gy.has(n))return;const t=new Promise((e,r)=>{const a=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",c),n.removeEventListener("abort",c)},u=()=>{e(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",u),n.addEventListener("error",c),n.addEventListener("abort",c)});Gy.set(n,t)}let Qy={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Gy.get(n);if(t==="objectStoreNames")return n.objectStoreNames||gb.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return ba(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function Dk(n){Qy=n(Qy)}function Vk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(qg(this),t,...e);return gb.set(r,t.sort?t.sort():[t]),ba(r)}:Rk().includes(n)?function(...t){return n.apply(qg(this),t),ba(pb.get(this))}:function(...t){return ba(n.apply(qg(this),t))}}function Pk(n){return typeof n=="function"?Vk(n):(n instanceof IDBTransaction&&Ck(n),Sk(n,Ik())?new Proxy(n,Qy):n)}function ba(n){if(n instanceof IDBRequest)return bk(n);if(zg.has(n))return zg.get(n);const t=Pk(n);return t!==n&&(zg.set(n,t),ov.set(t,n)),t}const qg=n=>ov.get(n);function Nk(n,t,{blocked:e,upgrade:r,blocking:a,terminated:u}={}){const c=indexedDB.open(n,t),m=ba(c);return r&&c.addEventListener("upgradeneeded",g=>{r(ba(c.result),g.oldVersion,g.newVersion,ba(c.transaction),g)}),e&&c.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),a&&g.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const Ok=["get","getKey","getAll","getAllKeys","count"],xk=["put","add","delete","clear"],Hg=new Map;function WA(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Hg.get(t))return Hg.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,a=xk.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(a||Ok.includes(e)))return;const u=async function(c,...m){const g=this.transaction(c,a?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[e](...m),a&&g.done]))[0]};return Hg.set(t,u),u}Dk(n=>({...n,get:(t,e,r)=>WA(t,e)||n.get(t,e,r),has:(t,e)=>!!WA(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(kk(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function kk(n){return n.getComponent()?.type==="VERSION"}const Ky="@firebase/app",JA="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new av("@firebase/app"),Lk="@firebase/app-compat",Uk="@firebase/analytics-compat",$k="@firebase/analytics",Bk="@firebase/app-check-compat",Fk="@firebase/app-check",jk="@firebase/auth",zk="@firebase/auth-compat",qk="@firebase/database",Hk="@firebase/data-connect",Gk="@firebase/database-compat",Qk="@firebase/functions",Kk="@firebase/functions-compat",Yk="@firebase/installations",Xk="@firebase/installations-compat",Wk="@firebase/messaging",Jk="@firebase/messaging-compat",Zk="@firebase/performance",t9="@firebase/performance-compat",e9="@firebase/remote-config",n9="@firebase/remote-config-compat",r9="@firebase/storage",i9="@firebase/storage-compat",s9="@firebase/firestore",a9="@firebase/ai",o9="@firebase/firestore-compat",l9="firebase",u9="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="[DEFAULT]",c9={[Ky]:"fire-core",[Lk]:"fire-core-compat",[$k]:"fire-analytics",[Uk]:"fire-analytics-compat",[Fk]:"fire-app-check",[Bk]:"fire-app-check-compat",[jk]:"fire-auth",[zk]:"fire-auth-compat",[qk]:"fire-rtdb",[Hk]:"fire-data-connect",[Gk]:"fire-rtdb-compat",[Qk]:"fire-fn",[Kk]:"fire-fn-compat",[Yk]:"fire-iid",[Xk]:"fire-iid-compat",[Wk]:"fire-fcm",[Jk]:"fire-fcm-compat",[Zk]:"fire-perf",[t9]:"fire-perf-compat",[e9]:"fire-rc",[n9]:"fire-rc-compat",[r9]:"fire-gcs",[i9]:"fire-gcs-compat",[s9]:"fire-fst",[o9]:"fire-fst-compat",[a9]:"fire-vertex","fire-js":"fire-js",[l9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new Map,h9=new Map,Xy=new Map;function ZA(n,t){try{n.container.addComponent(t)}catch(e){Ns.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function ru(n){const t=n.name;if(Xy.has(t))return Ns.debug(`There were multiple attempts to register component ${t}.`),!1;Xy.set(t,n);for(const e of Nd.values())ZA(e,n);for(const e of h9.values())ZA(e,n);return!0}function lv(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function xi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ca=new Eh("app","Firebase",f9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ca.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=u9;function yb(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const r={name:Yy,automaticDataCollectionEnabled:!0,...t},a=r.name;if(typeof a!="string"||!a)throw Ca.create("bad-app-name",{appName:String(a)});if(e||(e=hb()),!e)throw Ca.create("no-options");const u=Nd.get(a);if(u){if(Bo(e,u.options)&&Bo(r,u.config))return u;throw Ca.create("duplicate-app",{appName:a})}const c=new vk(a);for(const g of Xy.values())c.addComponent(g);const m=new d9(e,r,c);return Nd.set(a,m),m}function _b(n=Yy){const t=Nd.get(n);if(!t&&n===Yy&&hb())return yb();if(!t)throw Ca.create("no-app",{appName:n});return t}function Da(n,t,e){let r=c9[n]??n;e&&(r+=`-${e}`);const a=r.match(/\s|\//),u=t.match(/\s|\//);if(a||u){const c=[`Unable to register library "${r}" with version "${t}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&u&&c.push("and"),u&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ns.warn(c.join(" "));return}ru(new Fo(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9="firebase-heartbeat-database",p9=1,oh="firebase-heartbeat-store";let Gg=null;function vb(){return Gg||(Gg=Nk(m9,p9,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(oh)}catch(e){console.warn(e)}}}}).catch(n=>{throw Ca.create("idb-open",{originalErrorMessage:n.message})})),Gg}async function g9(n){try{const e=(await vb()).transaction(oh),r=await e.objectStore(oh).get(Eb(n));return await e.done,r}catch(t){if(t instanceof Ls)Ns.warn(t.message);else{const e=Ca.create("idb-get",{originalErrorMessage:t?.message});Ns.warn(e.message)}}}async function tw(n,t){try{const r=(await vb()).transaction(oh,"readwrite");await r.objectStore(oh).put(t,Eb(n)),await r.done}catch(e){if(e instanceof Ls)Ns.warn(e.message);else{const r=Ca.create("idb-set",{originalErrorMessage:e?.message});Ns.warn(r.message)}}}function Eb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=1024,_9=30;class v9{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new T9(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ew();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:e}),this._heartbeatsCache.heartbeats.length>_9){const a=A9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Ns.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ew(),{heartbeatsToSend:e,unsentEntries:r}=E9(this._heartbeatsCache.heartbeats),a=Pd(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ns.warn(t),""}}}function ew(){return new Date().toISOString().substring(0,10)}function E9(n,t=y9){const e=[];let r=n.slice();for(const a of n){const u=e.find(c=>c.agent===a.agent);if(u){if(u.dates.push(a.date),nw(e)>t){u.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),nw(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class T9{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ok()?lk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await g9(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return tw(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return tw(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function nw(n){return Pd(JSON.stringify({version:2,heartbeats:n})).length}function A9(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(n){ru(new Fo("platform-logger",t=>new Mk(t),"PRIVATE")),ru(new Fo("heartbeat",t=>new v9(t),"PRIVATE")),Da(Ky,JA,n),Da(Ky,JA,"esm2020"),Da("fire-js","")}w9("");var rw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Va,Tb;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(R,T){function A(){}A.prototype=T.prototype,R.F=T.prototype,R.prototype=new A,R.prototype.constructor=R,R.D=function(D,b,N){for(var w=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)w[Ot-2]=arguments[Ot];return T.prototype[b].apply(D,w)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,e),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,T,A){A||(A=0);const D=Array(16);if(typeof T=="string")for(var b=0;b<16;++b)D[b]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(b=0;b<16;++b)D[b]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=R.g[0],A=R.g[1],b=R.g[2];let N=R.g[3],w;w=T+(N^A&(b^N))+D[0]+3614090360&4294967295,T=A+(w<<7&4294967295|w>>>25),w=N+(b^T&(A^b))+D[1]+3905402710&4294967295,N=T+(w<<12&4294967295|w>>>20),w=b+(A^N&(T^A))+D[2]+606105819&4294967295,b=N+(w<<17&4294967295|w>>>15),w=A+(T^b&(N^T))+D[3]+3250441966&4294967295,A=b+(w<<22&4294967295|w>>>10),w=T+(N^A&(b^N))+D[4]+4118548399&4294967295,T=A+(w<<7&4294967295|w>>>25),w=N+(b^T&(A^b))+D[5]+1200080426&4294967295,N=T+(w<<12&4294967295|w>>>20),w=b+(A^N&(T^A))+D[6]+2821735955&4294967295,b=N+(w<<17&4294967295|w>>>15),w=A+(T^b&(N^T))+D[7]+4249261313&4294967295,A=b+(w<<22&4294967295|w>>>10),w=T+(N^A&(b^N))+D[8]+1770035416&4294967295,T=A+(w<<7&4294967295|w>>>25),w=N+(b^T&(A^b))+D[9]+2336552879&4294967295,N=T+(w<<12&4294967295|w>>>20),w=b+(A^N&(T^A))+D[10]+4294925233&4294967295,b=N+(w<<17&4294967295|w>>>15),w=A+(T^b&(N^T))+D[11]+2304563134&4294967295,A=b+(w<<22&4294967295|w>>>10),w=T+(N^A&(b^N))+D[12]+1804603682&4294967295,T=A+(w<<7&4294967295|w>>>25),w=N+(b^T&(A^b))+D[13]+4254626195&4294967295,N=T+(w<<12&4294967295|w>>>20),w=b+(A^N&(T^A))+D[14]+2792965006&4294967295,b=N+(w<<17&4294967295|w>>>15),w=A+(T^b&(N^T))+D[15]+1236535329&4294967295,A=b+(w<<22&4294967295|w>>>10),w=T+(b^N&(A^b))+D[1]+4129170786&4294967295,T=A+(w<<5&4294967295|w>>>27),w=N+(A^b&(T^A))+D[6]+3225465664&4294967295,N=T+(w<<9&4294967295|w>>>23),w=b+(T^A&(N^T))+D[11]+643717713&4294967295,b=N+(w<<14&4294967295|w>>>18),w=A+(N^T&(b^N))+D[0]+3921069994&4294967295,A=b+(w<<20&4294967295|w>>>12),w=T+(b^N&(A^b))+D[5]+3593408605&4294967295,T=A+(w<<5&4294967295|w>>>27),w=N+(A^b&(T^A))+D[10]+38016083&4294967295,N=T+(w<<9&4294967295|w>>>23),w=b+(T^A&(N^T))+D[15]+3634488961&4294967295,b=N+(w<<14&4294967295|w>>>18),w=A+(N^T&(b^N))+D[4]+3889429448&4294967295,A=b+(w<<20&4294967295|w>>>12),w=T+(b^N&(A^b))+D[9]+568446438&4294967295,T=A+(w<<5&4294967295|w>>>27),w=N+(A^b&(T^A))+D[14]+3275163606&4294967295,N=T+(w<<9&4294967295|w>>>23),w=b+(T^A&(N^T))+D[3]+4107603335&4294967295,b=N+(w<<14&4294967295|w>>>18),w=A+(N^T&(b^N))+D[8]+1163531501&4294967295,A=b+(w<<20&4294967295|w>>>12),w=T+(b^N&(A^b))+D[13]+2850285829&4294967295,T=A+(w<<5&4294967295|w>>>27),w=N+(A^b&(T^A))+D[2]+4243563512&4294967295,N=T+(w<<9&4294967295|w>>>23),w=b+(T^A&(N^T))+D[7]+1735328473&4294967295,b=N+(w<<14&4294967295|w>>>18),w=A+(N^T&(b^N))+D[12]+2368359562&4294967295,A=b+(w<<20&4294967295|w>>>12),w=T+(A^b^N)+D[5]+4294588738&4294967295,T=A+(w<<4&4294967295|w>>>28),w=N+(T^A^b)+D[8]+2272392833&4294967295,N=T+(w<<11&4294967295|w>>>21),w=b+(N^T^A)+D[11]+1839030562&4294967295,b=N+(w<<16&4294967295|w>>>16),w=A+(b^N^T)+D[14]+4259657740&4294967295,A=b+(w<<23&4294967295|w>>>9),w=T+(A^b^N)+D[1]+2763975236&4294967295,T=A+(w<<4&4294967295|w>>>28),w=N+(T^A^b)+D[4]+1272893353&4294967295,N=T+(w<<11&4294967295|w>>>21),w=b+(N^T^A)+D[7]+4139469664&4294967295,b=N+(w<<16&4294967295|w>>>16),w=A+(b^N^T)+D[10]+3200236656&4294967295,A=b+(w<<23&4294967295|w>>>9),w=T+(A^b^N)+D[13]+681279174&4294967295,T=A+(w<<4&4294967295|w>>>28),w=N+(T^A^b)+D[0]+3936430074&4294967295,N=T+(w<<11&4294967295|w>>>21),w=b+(N^T^A)+D[3]+3572445317&4294967295,b=N+(w<<16&4294967295|w>>>16),w=A+(b^N^T)+D[6]+76029189&4294967295,A=b+(w<<23&4294967295|w>>>9),w=T+(A^b^N)+D[9]+3654602809&4294967295,T=A+(w<<4&4294967295|w>>>28),w=N+(T^A^b)+D[12]+3873151461&4294967295,N=T+(w<<11&4294967295|w>>>21),w=b+(N^T^A)+D[15]+530742520&4294967295,b=N+(w<<16&4294967295|w>>>16),w=A+(b^N^T)+D[2]+3299628645&4294967295,A=b+(w<<23&4294967295|w>>>9),w=T+(b^(A|~N))+D[0]+4096336452&4294967295,T=A+(w<<6&4294967295|w>>>26),w=N+(A^(T|~b))+D[7]+1126891415&4294967295,N=T+(w<<10&4294967295|w>>>22),w=b+(T^(N|~A))+D[14]+2878612391&4294967295,b=N+(w<<15&4294967295|w>>>17),w=A+(N^(b|~T))+D[5]+4237533241&4294967295,A=b+(w<<21&4294967295|w>>>11),w=T+(b^(A|~N))+D[12]+1700485571&4294967295,T=A+(w<<6&4294967295|w>>>26),w=N+(A^(T|~b))+D[3]+2399980690&4294967295,N=T+(w<<10&4294967295|w>>>22),w=b+(T^(N|~A))+D[10]+4293915773&4294967295,b=N+(w<<15&4294967295|w>>>17),w=A+(N^(b|~T))+D[1]+2240044497&4294967295,A=b+(w<<21&4294967295|w>>>11),w=T+(b^(A|~N))+D[8]+1873313359&4294967295,T=A+(w<<6&4294967295|w>>>26),w=N+(A^(T|~b))+D[15]+4264355552&4294967295,N=T+(w<<10&4294967295|w>>>22),w=b+(T^(N|~A))+D[6]+2734768916&4294967295,b=N+(w<<15&4294967295|w>>>17),w=A+(N^(b|~T))+D[13]+1309151649&4294967295,A=b+(w<<21&4294967295|w>>>11),w=T+(b^(A|~N))+D[4]+4149444226&4294967295,T=A+(w<<6&4294967295|w>>>26),w=N+(A^(T|~b))+D[11]+3174756917&4294967295,N=T+(w<<10&4294967295|w>>>22),w=b+(T^(N|~A))+D[2]+718787259&4294967295,b=N+(w<<15&4294967295|w>>>17),w=A+(N^(b|~T))+D[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,R.g[2]=R.g[2]+b&4294967295,R.g[3]=R.g[3]+N&4294967295}r.prototype.v=function(R,T){T===void 0&&(T=R.length);const A=T-this.blockSize,D=this.C;let b=this.h,N=0;for(;N<T;){if(b==0)for(;N<=A;)a(this,R,N),N+=this.blockSize;if(typeof R=="string"){for(;N<T;)if(D[b++]=R.charCodeAt(N++),b==this.blockSize){a(this,D),b=0;break}}else for(;N<T;)if(D[b++]=R[N++],b==this.blockSize){a(this,D),b=0;break}}this.h=b,this.o+=T},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;T=this.o*8;for(var A=R.length-8;A<R.length;++A)R[A]=T&255,T/=256;for(this.v(R),R=Array(16),T=0,A=0;A<4;++A)for(let D=0;D<32;D+=8)R[T++]=this.g[A]>>>D&255;return R};function u(R,T){var A=m;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=T(R)}function c(R,T){this.h=T;const A=[];let D=!0;for(let b=R.length-1;b>=0;b--){const N=R[b]|0;D&&N==T||(A[b]=N,D=!1)}this.g=A}var m={};function g(R){return-128<=R&&R<128?u(R,function(T){return new c([T|0],T<0?-1:0)}):new c([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return I;if(R<0)return U(y(-R));const T=[];let A=1;for(let D=0;R>=A;D++)T[D]=R/A|0,A*=4294967296;return new c(T,0)}function E(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return U(E(R.substring(1),T));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=y(Math.pow(T,8));let D=I;for(let N=0;N<R.length;N+=8){var b=Math.min(8,R.length-N);const w=parseInt(R.substring(N,N+b),T);b<8?(b=y(Math.pow(T,b)),D=D.j(b).add(y(w))):(D=D.j(A),D=D.add(y(w)))}return D}var I=g(0),V=g(1),M=g(16777216);n=c.prototype,n.m=function(){if(G(this))return-U(this).m();let R=0,T=1;for(let A=0;A<this.g.length;A++){const D=this.i(A);R+=(D>=0?D:4294967296+D)*T,T*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(B(this))return"0";if(G(this))return"-"+U(this).toString(R);const T=y(Math.pow(R,6));var A=this;let D="";for(;;){const b=tt(A,T).g;A=rt(A,b.j(T));let N=((A.g.length>0?A.g[0]:A.h)>>>0).toString(R);if(A=b,B(A))return N+D;for(;N.length<6;)N="0"+N;D=N+D}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function B(R){if(R.h!=0)return!1;for(let T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function G(R){return R.h==-1}n.l=function(R){return R=rt(this,R),G(R)?-1:B(R)?0:1};function U(R){const T=R.g.length,A=[];for(let D=0;D<T;D++)A[D]=~R.g[D];return new c(A,~R.h).add(V)}n.abs=function(){return G(this)?U(this):this},n.add=function(R){const T=Math.max(this.g.length,R.g.length),A=[];let D=0;for(let b=0;b<=T;b++){let N=D+(this.i(b)&65535)+(R.i(b)&65535),w=(N>>>16)+(this.i(b)>>>16)+(R.i(b)>>>16);D=w>>>16,N&=65535,w&=65535,A[b]=w<<16|N}return new c(A,A[A.length-1]&-2147483648?-1:0)};function rt(R,T){return R.add(U(T))}n.j=function(R){if(B(this)||B(R))return I;if(G(this))return G(R)?U(this).j(U(R)):U(U(this).j(R));if(G(R))return U(this.j(U(R)));if(this.l(M)<0&&R.l(M)<0)return y(this.m()*R.m());const T=this.g.length+R.g.length,A=[];for(var D=0;D<2*T;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(let b=0;b<R.g.length;b++){const N=this.i(D)>>>16,w=this.i(D)&65535,Ot=R.i(b)>>>16,zt=R.i(b)&65535;A[2*D+2*b]+=w*zt,F(A,2*D+2*b),A[2*D+2*b+1]+=N*zt,F(A,2*D+2*b+1),A[2*D+2*b+1]+=w*Ot,F(A,2*D+2*b+1),A[2*D+2*b+2]+=N*Ot,F(A,2*D+2*b+2)}for(R=0;R<T;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=T;R<2*T;R++)A[R]=0;return new c(A,0)};function F(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function it(R,T){this.g=R,this.h=T}function tt(R,T){if(B(T))throw Error("division by zero");if(B(R))return new it(I,I);if(G(R))return T=tt(U(R),T),new it(U(T.g),U(T.h));if(G(T))return T=tt(R,U(T)),new it(U(T.g),T.h);if(R.g.length>30){if(G(R)||G(T))throw Error("slowDivide_ only works with positive integers.");for(var A=V,D=T;D.l(R)<=0;)A=W(A),D=W(D);var b=ct(A,1),N=ct(D,1);for(D=ct(D,2),A=ct(A,2);!B(D);){var w=N.add(D);w.l(R)<=0&&(b=b.add(A),N=w),D=ct(D,1),A=ct(A,1)}return T=rt(R,b.j(T)),new it(b,T)}for(b=I;R.l(T)>=0;){for(A=Math.max(1,Math.floor(R.m()/T.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),N=y(A),w=N.j(T);G(w)||w.l(R)>0;)A-=D,N=y(A),w=N.j(T);B(N)&&(N=V),b=b.add(N),R=rt(R,w)}return new it(b,R)}n.B=function(R){return tt(this,R).h},n.and=function(R){const T=Math.max(this.g.length,R.g.length),A=[];for(let D=0;D<T;D++)A[D]=this.i(D)&R.i(D);return new c(A,this.h&R.h)},n.or=function(R){const T=Math.max(this.g.length,R.g.length),A=[];for(let D=0;D<T;D++)A[D]=this.i(D)|R.i(D);return new c(A,this.h|R.h)},n.xor=function(R){const T=Math.max(this.g.length,R.g.length),A=[];for(let D=0;D<T;D++)A[D]=this.i(D)^R.i(D);return new c(A,this.h^R.h)};function W(R){const T=R.g.length+1,A=[];for(let D=0;D<T;D++)A[D]=R.i(D)<<1|R.i(D-1)>>>31;return new c(A,R.h)}function ct(R,T){const A=T>>5;T%=32;const D=R.g.length-A,b=[];for(let N=0;N<D;N++)b[N]=T>0?R.i(N+A)>>>T|R.i(N+A+1)<<32-T:R.i(N+A);return new c(b,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Tb=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=E,Va=c}).apply(typeof rw<"u"?rw:typeof self<"u"?self:typeof window<"u"?window:{});var Lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ab,Mc,wb,od,Wy,Sb,Ib,Rb;(function(){var n,t=Object.defineProperty;function e(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lf=="object"&&Lf];for(var f=0;f<o.length;++f){var p=o[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=e(this);function a(o,f){if(f)t:{var p=r;o=o.split(".");for(var v=0;v<o.length-1;v++){var O=o[v];if(!(O in p))break t;p=p[O]}o=o[o.length-1],v=p[o],f=f(v),f!=v&&f!=null&&t(p,o,{configurable:!0,writable:!0,value:f})}}a("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(o){return o||function(f){var p=[],v;for(v in f)Object.prototype.hasOwnProperty.call(f,v)&&p.push([v,f[v]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function m(o){var f=typeof o;return f=="object"&&o!=null||f=="function"}function g(o,f,p){return o.call.apply(o.bind,arguments)}function y(o,f,p){return y=g,y.apply(null,arguments)}function E(o,f){var p=Array.prototype.slice.call(arguments,1);return function(){var v=p.slice();return v.push.apply(v,arguments),o.apply(this,v)}}function I(o,f){function p(){}p.prototype=f.prototype,o.Z=f.prototype,o.prototype=new p,o.prototype.constructor=o,o.Ob=function(v,O,x){for(var z=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)z[mt-2]=arguments[mt];return f.prototype[O].apply(v,z)}}var V=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function M(o){const f=o.length;if(f>0){const p=Array(f);for(let v=0;v<f;v++)p[v]=o[v];return p}return[]}function B(o,f){for(let v=1;v<arguments.length;v++){const O=arguments[v];var p=typeof O;if(p=p!="object"?p:O?Array.isArray(O)?"array":p:"null",p=="array"||p=="object"&&typeof O.length=="number"){p=o.length||0;const x=O.length||0;o.length=p+x;for(let z=0;z<x;z++)o[p+z]=O[z]}else o.push(O)}}class G{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function U(o){c.setTimeout(()=>{throw o},0)}function rt(){var o=R;let f=null;return o.g&&(f=o.g,o.g=o.g.next,o.g||(o.h=null),f.next=null),f}class F{constructor(){this.h=this.g=null}add(f,p){const v=it.get();v.set(f,p),this.h?this.h.next=v:this.g=v,this.h=v}}var it=new G(()=>new tt,o=>o.reset());class tt{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let W,ct=!1,R=new F,T=()=>{const o=Promise.resolve(void 0);W=()=>{o.then(A)}};function A(){for(var o;o=rt();){try{o.h.call(o.g)}catch(p){U(p)}var f=it;f.j(o),f.h<100&&(f.h++,o.next=f.g,f.g=o)}ct=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(o,f){this.type=o,this.g=this.target=f,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var N=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,f=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const p=()=>{};c.addEventListener("test",p,f),c.removeEventListener("test",p,f)}catch{}return o})();function w(o){return/^[\s\xa0]*$/.test(o)}function Ot(o,f){b.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,f)}I(Ot,b),Ot.prototype.init=function(o,f){const p=this.type=o.type,v=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=f,f=o.relatedTarget,f||(p=="mouseover"?f=o.fromElement:p=="mouseout"&&(f=o.toElement)),this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Ot.Z.h.call(this)},Ot.prototype.h=function(){Ot.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var zt="closure_listenable_"+(Math.random()*1e6|0),X=0;function pt(o,f,p,v,O){this.listener=o,this.proxy=null,this.src=f,this.type=p,this.capture=!!v,this.ha=O,this.key=++X,this.da=this.fa=!1}function Tt(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function qt(o,f,p){for(const v in o)f.call(p,o[v],v,o)}function C(o,f){for(const p in o)f.call(void 0,o[p],p,o)}function $(o){const f={};for(const p in o)f[p]=o[p];return f}const et="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(o,f){let p,v;for(let O=1;O<arguments.length;O++){v=arguments[O];for(p in v)o[p]=v[p];for(let x=0;x<et.length;x++)p=et[x],Object.prototype.hasOwnProperty.call(v,p)&&(o[p]=v[p])}}function ut(o){this.src=o,this.g={},this.h=0}ut.prototype.add=function(o,f,p,v,O){const x=o.toString();o=this.g[x],o||(o=this.g[x]=[],this.h++);const z=dt(o,f,v,O);return z>-1?(f=o[z],p||(f.fa=!1)):(f=new pt(f,this.src,x,!!v,O),f.fa=p,o.push(f)),f};function At(o,f){const p=f.type;if(p in o.g){var v=o.g[p],O=Array.prototype.indexOf.call(v,f,void 0),x;(x=O>=0)&&Array.prototype.splice.call(v,O,1),x&&(Tt(f),o.g[p].length==0&&(delete o.g[p],o.h--))}}function dt(o,f,p,v){for(let O=0;O<o.length;++O){const x=o[O];if(!x.da&&x.listener==f&&x.capture==!!p&&x.ha==v)return O}return-1}var fe="closure_lm_"+(Math.random()*1e6|0),Rt={};function Vn(o,f,p,v,O){if(Array.isArray(f)){for(let x=0;x<f.length;x++)Vn(o,f[x],p,v,O);return null}return p=qa(p),o&&o[zt]?o.J(f,p,m(v)?!!v.capture:!1,O):za(o,f,p,!1,v,O)}function za(o,f,p,v,O,x){if(!f)throw Error("Invalid event type");const z=m(O)?!!O.capture:!!O;let mt=Xi(o);if(mt||(o[fe]=mt=new ut(o)),p=mt.add(f,p,v,z,x),p.proxy)return p;if(v=Us(),p.proxy=v,v.src=o,v.listener=p,o.addEventListener)N||(O=z),O===void 0&&(O=!1),o.addEventListener(f.toString(),v,O);else if(o.attachEvent)o.attachEvent(Yi(f.toString()),v);else if(o.addListener&&o.removeListener)o.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Us(){function o(p){return f.call(o.src,o.listener,p)}const f=bu;return o}function Ki(o,f,p,v,O){if(Array.isArray(f))for(var x=0;x<f.length;x++)Ki(o,f[x],p,v,O);else v=m(v)?!!v.capture:!!v,p=qa(p),o&&o[zt]?(o=o.i,x=String(f).toString(),x in o.g&&(f=o.g[x],p=dt(f,p,v,O),p>-1&&(Tt(f[p]),Array.prototype.splice.call(f,p,1),f.length==0&&(delete o.g[x],o.h--)))):o&&(o=Xi(o))&&(f=o.g[f.toString()],o=-1,f&&(o=dt(f,p,v,O)),(p=o>-1?f[o]:null)&&Kr(p))}function Kr(o){if(typeof o!="number"&&o&&!o.da){var f=o.src;if(f&&f[zt])At(f.i,o);else{var p=o.type,v=o.proxy;f.removeEventListener?f.removeEventListener(p,v,o.capture):f.detachEvent?f.detachEvent(Yi(p),v):f.addListener&&f.removeListener&&f.removeListener(v),(p=Xi(f))?(At(p,o),p.h==0&&(p.src=null,f[fe]=null)):Tt(o)}}}function Yi(o){return o in Rt?Rt[o]:Rt[o]="on"+o}function bu(o,f){if(o.da)o=!0;else{f=new Ot(f,this);const p=o.listener,v=o.ha||o.src;o.fa&&Kr(o),o=p.call(v,f)}return o}function Xi(o){return o=o[fe],o instanceof ut?o:null}var un="__closure_events_fn_"+(Math.random()*1e9>>>0);function qa(o){return typeof o=="function"?o:(o[un]||(o[un]=function(f){return o.handleEvent(f)}),o[un])}function Xt(){D.call(this),this.i=new ut(this),this.M=this,this.G=null}I(Xt,D),Xt.prototype[zt]=!0,Xt.prototype.removeEventListener=function(o,f,p,v){Ki(this,o,f,p,v)};function te(o,f){var p,v=o.G;if(v)for(p=[];v;v=v.G)p.push(v);if(o=o.M,v=f.type||f,typeof f=="string")f=new b(f,o);else if(f instanceof b)f.target=f.target||o;else{var O=f;f=new b(v,o),J(f,O)}O=!0;let x,z;if(p)for(z=p.length-1;z>=0;z--)x=f.g=p[z],O=Zn(x,v,!0,f)&&O;if(x=f.g=o,O=Zn(x,v,!0,f)&&O,O=Zn(x,v,!1,f)&&O,p)for(z=0;z<p.length;z++)x=f.g=p[z],O=Zn(x,v,!1,f)&&O}Xt.prototype.N=function(){if(Xt.Z.N.call(this),this.i){var o=this.i;for(const f in o.g){const p=o.g[f];for(let v=0;v<p.length;v++)Tt(p[v]);delete o.g[f],o.h--}}this.G=null},Xt.prototype.J=function(o,f,p,v){return this.i.add(String(o),f,!1,p,v)},Xt.prototype.K=function(o,f,p,v){return this.i.add(String(o),f,!0,p,v)};function Zn(o,f,p,v){if(f=o.i.g[String(f)],!f)return!0;f=f.concat();let O=!0;for(let x=0;x<f.length;++x){const z=f[x];if(z&&!z.da&&z.capture==p){const mt=z.listener,Mt=z.ha||z.src;z.fa&&At(o.i,z),O=mt.call(Mt,v)!==!1&&O}}return O&&!v.defaultPrevented}function Cu(o,f){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=y(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:c.setTimeout(o,f||0)}function $s(o){o.g=Cu(()=>{o.g=null,o.i&&(o.i=!1,$s(o))},o.l);const f=o.h;o.h=null,o.m.apply(null,f)}class Du extends D{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:$s(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pr(o){D.call(this),this.h=o,this.g={}}I(pr,D);var Yr=[];function sn(o){qt(o.g,function(f,p){this.g.hasOwnProperty(p)&&Kr(f)},o),o.g={}}pr.prototype.N=function(){pr.Z.N.call(this),sn(this)},pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pn=c.JSON.stringify,Tn=c.JSON.parse,Vu=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function Ha(){}function Ga(){}var Nn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vr(){b.call(this,"d")}I(Vr,b);function Qn(){b.call(this,"c")}I(Qn,b);var qe={},Xr=null;function Wr(){return Xr=Xr||new Xt}qe.Ia="serverreachability";function Bs(o){b.call(this,qe.Ia,o)}I(Bs,b);function tr(o){const f=Wr();te(f,new Bs(f))}qe.STAT_EVENT="statevent";function Wi(o,f){b.call(this,qe.STAT_EVENT,o),this.stat=f}I(Wi,b);function Qt(o){const f=Wr();te(f,new Wi(f,o))}qe.Ja="timingevent";function Qa(o,f){b.call(this,qe.Ja,o),this.size=f}I(Qa,b);function er(o,f){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},f)}function nr(){this.g=!0}nr.prototype.ua=function(){this.g=!1};function Ka(o,f,p,v,O,x){o.info(function(){if(o.g)if(x){var z="",mt=x.split("&");for(let wt=0;wt<mt.length;wt++){var Mt=mt[wt].split("=");if(Mt.length>1){const Ft=Mt[0];Mt=Mt[1];const Ce=Ft.split("_");z=Ce.length>=2&&Ce[1]=="type"?z+(Ft+"="+Mt+"&"):z+(Ft+"=redacted&")}}}else z=null;else z=x;return"XMLHTTP REQ ("+v+") [attempt "+O+"]: "+f+`
`+p+`
`+z})}function Ya(o,f,p,v,O,x,z){o.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+O+"]: "+f+`
`+p+`
`+x+" "+z})}function On(o,f,p,v){o.info(function(){return"XMLHTTP TEXT ("+f+"): "+Pr(o,p)+(v?" "+v:"")})}function Pu(o,f){o.info(function(){return"TIMEOUT: "+f})}nr.prototype.info=function(){};function Pr(o,f){if(!o.g)return f;if(!f)return null;try{const x=JSON.parse(f);if(x){for(o=0;o<x.length;o++)if(Array.isArray(x[o])){var p=x[o];if(!(p.length<2)){var v=p[1];if(Array.isArray(v)&&!(v.length<1)){var O=v[0];if(O!="noop"&&O!="stop"&&O!="close")for(let z=1;z<v.length;z++)v[z]=""}}}}return Pn(x)}catch{return f}}var Te={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},He={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nr;function Jr(){}I(Jr,Ha),Jr.prototype.g=function(){return new XMLHttpRequest},Nr=new Jr;function gr(o){return encodeURIComponent(String(o))}function Nu(o){var f=1;o=o.split(":");const p=[];for(;f>0&&o.length;)p.push(o.shift()),f--;return o.length&&p.push(o.join(":")),p}function Ge(o,f,p,v){this.j=o,this.i=f,this.l=p,this.S=v||1,this.V=new pr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zr}function Zr(){this.i=null,this.g="",this.h=!1}var Ji={},rr={};function ir(o,f,p){o.M=1,o.A=or(ee(f)),o.u=p,o.R=!0,ti(o,null)}function ti(o,f){o.F=Date.now(),Or(o),o.B=ee(o.A);var p=o.B,v=o.S;Array.isArray(v)||(v=[String(v)]),Ja(p.i,"t",v),o.C=0,p=o.j.L,o.h=new Zr,o.g=os(o.j,p?f:null,!o.u),o.P>0&&(o.O=new Du(y(o.Y,o,o.g),o.P)),f=o.V,p=o.g,v=o.ba;var O="readystatechange";Array.isArray(O)||(O&&(Yr[0]=O.toString()),O=Yr);for(let x=0;x<O.length;x++){const z=Vn(p,O[x],v||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=o.J?$(o.J):{},o.u?(o.v||(o.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,f)):(o.v="GET",o.g.ea(o.B,o.v,null,f)),tr(),Ka(o.i,o.v,o.B,o.l,o.S,o.u)}Ge.prototype.ba=function(o){o=o.target;const f=this.O;f&&we(o)==3?f.j():this.Y(o)},Ge.prototype.Y=function(o){try{if(o==this.g)t:{const mt=we(this.g),Mt=this.g.ya(),wt=this.g.ca();if(!(mt<3)&&(mt!=3||this.g&&(this.h.h||this.g.la()||Ii(this.g)))){this.K||mt!=4||Mt==7||(Mt==8||wt<=0?tr(3):tr(2)),sr(this);var f=this.g.ca();this.X=f;var p=gi(this);if(this.o=f==200,Ya(this.i,this.v,this.B,this.l,this.S,mt,f),this.o){if(this.U&&!this.L){e:{if(this.g){var v,O=this.g;if((v=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(v)){var x=v;break e}}x=null}if(o=x)On(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yi(this,o);else{this.o=!1,this.m=3,Qt(12),cn(this),_r(this);break t}}if(this.R){o=!0;let Ft;for(;!this.K&&this.C<p.length;)if(Ft=Qo(this,p),Ft==rr){mt==4&&(this.m=4,Qt(14),o=!1),On(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==Ji){this.m=4,Qt(15),On(this.i,this.l,p,"[Invalid Chunk]"),o=!1;break}else On(this.i,this.l,Ft,null),yi(this,Ft);if(Se(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||p.length!=0||this.h.h||(this.m=1,Qt(16),o=!1),this.o=this.o&&o,!o)On(this.i,this.l,p,"[Invalid Chunked Response]"),cn(this),_r(this);else if(p.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),as(z),z.P=!0,Qt(11))}}else On(this.i,this.l,p,null),yi(this,p);mt==4&&cn(this),this.o&&!this.K&&(mt==4?Gs(this.j,this):(this.o=!1,Or(this)))}else ns(this.g),f==400&&p.indexOf("Unknown SID")>0?(this.m=3,Qt(12)):(this.m=0,Qt(13)),cn(this),_r(this)}}}catch{}finally{}};function gi(o){if(!Se(o))return o.g.la();const f=Ii(o.g);if(f==="")return"";let p="";const v=f.length,O=we(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return cn(o),_r(o),"";o.h.i=new c.TextDecoder}for(let x=0;x<v;x++)o.h.h=!0,p+=o.h.i.decode(f[x],{stream:!(O&&x==v-1)});return f.length=0,o.h.g+=p,o.C=0,o.h.g}function Se(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function Qo(o,f){var p=o.C,v=f.indexOf(`
`,p);return v==-1?rr:(p=Number(f.substring(p,v)),isNaN(p)?Ji:(v+=1,v+p>f.length?rr:(f=f.slice(v,v+p),o.C=v+p,f)))}Ge.prototype.cancel=function(){this.K=!0,cn(this)};function Or(o){o.T=Date.now()+o.H,yr(o,o.H)}function yr(o,f){if(o.D!=null)throw Error("WatchDog timer not null");o.D=er(y(o.aa,o),f)}function sr(o){o.D&&(c.clearTimeout(o.D),o.D=null)}Ge.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(Pu(this.i,this.B),this.M!=2&&(tr(),Qt(17)),cn(this),this.m=2,_r(this)):yr(this,this.T-o)};function _r(o){o.j.I==0||o.K||Gs(o.j,o)}function cn(o){sr(o);var f=o.O;f&&typeof f.dispose=="function"&&f.dispose(),o.O=null,sn(o.V),o.g&&(f=o.g,o.g=null,f.abort(),f.dispose())}function yi(o,f){try{var p=o.j;if(p.I!=0&&(p.g==o||ei(p.h,o))){if(!o.L&&ei(p.h,o)&&p.I==3){try{var v=p.Ba.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var O=v;if(O[0]==0){t:if(!p.v){if(p.g)if(p.g.F+3e3<o.F)ai(p),Xn(p);else break t;ss(p),Qt(18)}}else p.xa=O[1],0<p.xa-p.K&&O[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=er(y(p.Va,p),6e3));Kn(p.h)<=1&&p.ta&&(p.ta=void 0)}else wn(p,11)}else if((o.L||p.g==o)&&ai(p),!w(f))for(O=p.Ba.g.parse(f),f=0;f<O.length;f++){let wt=O[f];const Ft=wt[0];if(!(Ft<=p.K))if(p.K=Ft,wt=wt[1],p.I==2)if(wt[0]=="c"){p.M=wt[1],p.ba=wt[2];const Ce=wt[3];Ce!=null&&(p.ka=Ce,p.j.info("VER="+p.ka));const dn=wt[4];dn!=null&&(p.za=dn,p.j.info("SVER="+p.za));const Ke=wt[5];Ke!=null&&typeof Ke=="number"&&Ke>0&&(v=1.5*Ke,p.O=v,p.j.info("backChannelRequestTimeoutMs_="+v)),v=p;const Ye=o.g;if(Ye){const Mn=Ye.g?Ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mn){var x=v.h;x.g||Mn.indexOf("spdy")==-1&&Mn.indexOf("quic")==-1&&Mn.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Ei(x,x.h),x.h=null))}if(v.G){const ls=Ye.g?Ye.g.getResponseHeader("X-HTTP-Session-Id"):null;ls&&(v.wa=ls,It(v.J,v.G,ls))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-o.F,p.j.info("Handshake RTT: "+p.T+"ms")),v=p;var z=o;if(v.na=oo(v,v.L?v.ba:null,v.W),z.L){xr(v.h,z);var mt=z,Mt=v.O;Mt&&(mt.H=Mt),mt.D&&(sr(mt),Or(mt)),v.g=z}else ro(v);p.i.length>0&&Lr(p)}else wt[0]!="stop"&&wt[0]!="close"||wn(p,7);else p.I==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?wn(p,7):si(p):wt[0]!="noop"&&p.l&&p.l.qa(wt),p.A=0)}}tr(4)}catch{}}var Ou=class{constructor(o,f){this.g=o,this.map=f}};function _i(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vi(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Kn(o){return o.h?1:o.g?o.g.size:0}function ei(o,f){return o.h?o.h==f:o.g?o.g.has(f):!1}function Ei(o,f){o.g?o.g.add(f):o.h=f}function xr(o,f){o.h&&o.h==f?o.h=null:o.g&&o.g.has(f)&&o.g.delete(f)}_i.prototype.cancel=function(){if(this.i=Zi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Zi(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let f=o.i;for(const p of o.g.values())f=f.concat(p.G);return f}return M(o.i)}var ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xu(o,f){if(o){o=o.split("&");for(let p=0;p<o.length;p++){const v=o[p].indexOf("=");let O,x=null;v>=0?(O=o[p].substring(0,v),x=o[p].substring(v+1)):O=o[p],f(O,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Qe(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;o instanceof Qe?(this.l=o.l,ar(this,o.j),this.o=o.o,this.g=o.g,vr(this,o.u),this.h=o.h,Mr(this,Za(o.i)),this.m=o.m):o&&(f=String(o).match(ts))?(this.l=!1,ar(this,f[1]||"",!0),this.o=Er(f[2]||""),this.g=Er(f[3]||"",!0),vr(this,f[4]),this.h=Er(f[5]||"",!0),Mr(this,f[6]||"",!0),this.m=Er(f[7]||"")):(this.l=!1,this.i=new hn(null,this.l))}Qe.prototype.toString=function(){const o=[];var f=this.j;f&&o.push(Ie(f,Fs,!0),":");var p=this.g;return(p||f=="file")&&(o.push("//"),(f=this.o)&&o.push(Ie(f,Fs,!0),"@"),o.push(gr(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&o.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&o.push("/"),o.push(Ie(p,p.charAt(0)=="/"?Ti:Wa,!0))),(p=this.i.toString())&&o.push("?",p),(p=this.m)&&o.push("#",Ie(p,Yo)),o.join("")},Qe.prototype.resolve=function(o){const f=ee(this);let p=!!o.j;p?ar(f,o.j):p=!!o.o,p?f.o=o.o:p=!!o.g,p?f.g=o.g:p=o.u!=null;var v=o.h;if(p)vr(f,o.u);else if(p=!!o.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var O=f.h.lastIndexOf("/");O!=-1&&(v=f.h.slice(0,O+1)+v)}if(O=v,O==".."||O==".")v="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){v=O.lastIndexOf("/",0)==0,O=O.split("/");const x=[];for(let z=0;z<O.length;){const mt=O[z++];mt=="."?v&&z==O.length&&x.push(""):mt==".."?((x.length>1||x.length==1&&x[0]!="")&&x.pop(),v&&z==O.length&&x.push("")):(x.push(mt),v=!0)}v=x.join("/")}else v=O}return p?f.h=v:p=o.i.toString()!=="",p?Mr(f,Za(o.i)):p=!!o.m,p&&(f.m=o.m),f};function ee(o){return new Qe(o)}function ar(o,f,p){o.j=p?Er(f,!0):f,o.j&&(o.j=o.j.replace(/:$/,""))}function vr(o,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);o.u=f}else o.u=null}function Mr(o,f,p){f instanceof hn?(o.i=f,to(o.i,o.l)):(p||(f=Ie(f,Ko)),o.i=new hn(f,o.l))}function It(o,f,p){o.i.set(f,p)}function or(o){return It(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function Er(o,f){return o?f?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ie(o,f,p){return typeof o=="string"?(o=encodeURI(o).replace(f,Xa),p&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Xa(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Fs=/[#\/\?@]/g,Wa=/[#\?:]/g,Ti=/[#\?]/g,Ko=/[#\?@]/g,Yo=/#/g;function hn(o,f){this.h=this.g=null,this.i=o||null,this.j=!!f}function An(o){o.g||(o.g=new Map,o.h=0,o.i&&xu(o.i,function(f,p){o.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}n=hn.prototype,n.add=function(o,f){An(this),this.i=null,o=fn(this,o);let p=this.g.get(o);return p||this.g.set(o,p=[]),p.push(f),this.h+=1,this};function js(o,f){An(o),f=fn(o,f),o.g.has(f)&&(o.i=null,o.h-=o.g.get(f).length,o.g.delete(f))}function zs(o,f){return An(o),f=fn(o,f),o.g.has(f)}n.forEach=function(o,f){An(this),this.g.forEach(function(p,v){p.forEach(function(O){o.call(f,O,v,this)},this)},this)};function es(o,f){An(o);let p=[];if(typeof f=="string")zs(o,f)&&(p=p.concat(o.g.get(fn(o,f))));else for(o=Array.from(o.g.values()),f=0;f<o.length;f++)p=p.concat(o[f]);return p}n.set=function(o,f){return An(this),this.i=null,o=fn(this,o),zs(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[f]),this.h+=1,this},n.get=function(o,f){return o?(o=es(this,o),o.length>0?String(o[0]):f):f};function Ja(o,f,p){js(o,f),p.length>0&&(o.i=null,o.g.set(fn(o,f),M(p)),o.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],f=Array.from(this.g.keys());for(let v=0;v<f.length;v++){var p=f[v];const O=gr(p);p=es(this,p);for(let x=0;x<p.length;x++){let z=O;p[x]!==""&&(z+="="+gr(p[x])),o.push(z)}}return this.i=o.join("&")};function Za(o){const f=new hn;return f.i=o.i,o.g&&(f.g=new Map(o.g),f.h=o.h),f}function fn(o,f){return f=String(f),o.j&&(f=f.toLowerCase()),f}function to(o,f){f&&!o.j&&(An(o),o.i=null,o.g.forEach(function(p,v){const O=v.toLowerCase();v!=O&&(js(this,v),Ja(this,O,p))},o)),o.j=f}function eo(o,f){const p=new nr;if(c.Image){const v=new Image;v.onload=E(Re,p,"TestLoadImage: loaded",!0,f,v),v.onerror=E(Re,p,"TestLoadImage: error",!1,f,v),v.onabort=E(Re,p,"TestLoadImage: abort",!1,f,v),v.ontimeout=E(Re,p,"TestLoadImage: timeout",!1,f,v),c.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=o}else f(!1)}function Ai(o,f){const p=new nr,v=new AbortController,O=setTimeout(()=>{v.abort(),Re(p,"TestPingServer: timeout",!1,f)},1e4);fetch(o,{signal:v.signal}).then(x=>{clearTimeout(O),x.ok?Re(p,"TestPingServer: ok",!0,f):Re(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),Re(p,"TestPingServer: error",!1,f)})}function Re(o,f,p,v,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),v(p)}catch{}}function Xo(){this.g=new Vu}function ni(o){this.i=o.Sb||null,this.h=o.ab||!1}I(ni,Ha),ni.prototype.g=function(){return new kr(this.i,this.h)};function kr(o,f){Xt.call(this),this.H=o,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(kr,Xt),n=kr.prototype,n.open=function(o,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=f,this.readyState=1,Yn(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(f.body=o),(this.H||c).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ue(this)),this.readyState=0},n.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Yn(this)),this.g&&(this.readyState=3,Yn(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ri(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function ri(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}n.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var f=o.value?o.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!o.done}))&&(this.response=this.responseText+=f)}o.done?Ue(this):Yn(this),this.readyState==3&&ri(this)}},n.Oa=function(o){this.g&&(this.response=this.responseText=o,Ue(this))},n.Na=function(o){this.g&&(this.response=o,Ue(this))},n.ga=function(){this.g&&Ue(this)};function Ue(o){o.readyState=4,o.l=null,o.j=null,o.B=null,Yn(o)}n.setRequestHeader=function(o,f){this.A.append(o,f)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,o.push(p[0]+": "+p[1]),p=f.next();return o.join(`\r
`)};function Yn(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(kr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function ii(o){let f="";return qt(o,function(p,v){f+=v,f+=":",f+=p,f+=`\r
`}),f}function xn(o,f,p){t:{for(v in p){var v=!1;break t}v=!0}v||(p=ii(p),typeof o=="string"?p!=null&&gr(p):It(o,f,p))}function Vt(o){Xt.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(Vt,Xt);var qs=/^https?$/i,Wo=["POST","PUT"];n=Vt.prototype,n.Fa=function(o){this.H=o},n.ea=function(o,f,p,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);f=f?f.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nr.g(),this.g.onreadystatechange=V(y(this.Ca,this));try{this.B=!0,this.g.open(f,String(o),!0),this.B=!1}catch(x){wi(this,x);return}if(o=p||"",p=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var O in v)p.set(O,v[O]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const x of v.keys())p.set(x,v.get(x));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(p.keys()).find(x=>x.toLowerCase()=="content-type"),O=c.FormData&&o instanceof c.FormData,!(Array.prototype.indexOf.call(Wo,f,void 0)>=0)||v||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[x,z]of p)this.g.setRequestHeader(x,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(x){wi(this,x)}};function wi(o,f){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=f,o.o=5,Si(o),be(o)}function Si(o){o.A||(o.A=!0,te(o,"complete"),te(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,te(this,"complete"),te(this,"abort"),be(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),be(this,!0)),Vt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Hs(this):this.Xa())},n.Xa=function(){Hs(this)};function Hs(o){if(o.h&&typeof u<"u"){if(o.v&&we(o)==4)setTimeout(o.Ca.bind(o),0);else if(te(o,"readystatechange"),we(o)==4){o.h=!1;try{const x=o.ca();t:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var p;if(!(p=f)){var v;if(v=x===0){let z=String(o.D).match(ts)[1]||null;!z&&c.self&&c.self.location&&(z=c.self.location.protocol.slice(0,-1)),v=!qs.test(z?z.toLowerCase():"")}p=v}if(p)te(o,"complete"),te(o,"success");else{o.o=6;try{var O=we(o)>2?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.ca()+"]",Si(o)}}finally{be(o)}}}}function be(o,f){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const p=o.g;o.g=null,f||te(o,"ready");try{p.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function we(o){return o.g?o.g.readyState:0}n.ca=function(){try{return we(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(o){if(this.g){var f=this.g.responseText;return o&&f.indexOf(o)==0&&(f=f.substring(o.length)),Tn(f)}};function Ii(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function ns(o){const f={};o=(o.g&&we(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<o.length;v++){if(w(o[v]))continue;var p=Nu(o[v]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const x=f[O]||[];f[O]=x,x.push(p)}C(f,function(v){return v.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tr(o,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[o]||f}function rs(o){this.za=0,this.i=[],this.j=new nr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Tr("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Tr("baseRetryDelayMs",5e3,o),this.Za=Tr("retryDelaySeedMs",1e4,o),this.Ta=Tr("forwardChannelMaxRetries",2,o),this.va=Tr("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new _i(o&&o.concurrentRequestLimit),this.Ba=new Xo,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=rs.prototype,n.ka=8,n.I=1,n.connect=function(o,f,p,v){Qt(0),this.W=o,this.H=f||{},p&&v!==void 0&&(this.H.OSID=p,this.H.OAID=v),this.F=this.X,this.J=oo(this,null,this.W),Lr(this)};function si(o){if(Ri(o),o.I==3){var f=o.V++,p=ee(o.J);if(It(p,"SID",o.M),It(p,"RID",f),It(p,"TYPE","terminate"),Ar(o,p),f=new Ge(o,o.j,f),f.M=2,f.A=or(ee(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(f.A.toString(),"")}catch{}!p&&c.Image&&(new Image().src=f.A,p=!0),p||(f.g=os(f.j,null),f.g.ea(f.A)),f.F=Date.now(),Or(f)}ao(o)}function Xn(o){o.g&&(as(o),o.g.cancel(),o.g=null)}function Ri(o){Xn(o),o.v&&(c.clearTimeout(o.v),o.v=null),ai(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&c.clearTimeout(o.m),o.m=null)}function Lr(o){if(!vi(o.h)&&!o.m){o.m=!0;var f=o.Ea;W||T(),ct||(W(),ct=!0),R.add(f,o),o.D=0}}function Mu(o,f){return Kn(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=f.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=er(y(o.Ea,o,f),so(o,o.D)),o.D++,!0)}n.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const O=new Ge(this,this.j,o);let x=this.o;if(this.U&&(x?(x=$(x),J(x,this.U)):x=this.U),this.u!==null||this.R||(O.J=x,x=null),this.S)t:{for(var f=0,p=0;p<this.i.length;p++){e:{var v=this.i[p];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break e}v=void 0}if(v===void 0)break;if(f+=v,f>4096){f=p;break t}if(f===4096||p===this.i.length-1){f=p+1;break t}}f=1e3}else f=1e3;f=is(this,O,f),p=ee(this.J),It(p,"RID",o),It(p,"CVER",22),this.G&&It(p,"X-HTTP-Session-Id",this.G),Ar(this,p),x&&(this.R?f="headers="+gr(ii(x))+"&"+f:this.u&&xn(p,this.u,x)),Ei(this.h,O),this.Ra&&It(p,"TYPE","init"),this.S?(It(p,"$req",f),It(p,"SID","null"),O.U=!0,ir(O,p,null)):ir(O,p,f),this.I=2}}else this.I==3&&(o?no(this,o):this.i.length==0||vi(this.h)||no(this))};function no(o,f){var p;f?p=f.l:p=o.V++;const v=ee(o.J);It(v,"SID",o.M),It(v,"RID",p),It(v,"AID",o.K),Ar(o,v),o.u&&o.o&&xn(v,o.u,o.o),p=new Ge(o,o.j,p,o.D+1),o.u===null&&(p.J=o.o),f&&(o.i=f.G.concat(o.i)),f=is(o,p,1e3),p.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Ei(o.h,p),ir(p,v,f)}function Ar(o,f){o.H&&qt(o.H,function(p,v){It(f,v,p)}),o.l&&qt({},function(p,v){It(f,v,p)})}function is(o,f,p){p=Math.min(o.i.length,p);const v=o.l?y(o.l.Ka,o.l,o):null;t:{var O=o.i;let mt=-1;for(;;){const Mt=["count="+p];mt==-1?p>0?(mt=O[0].g,Mt.push("ofs="+mt)):mt=0:Mt.push("ofs="+mt);let wt=!0;for(let Ft=0;Ft<p;Ft++){var x=O[Ft].g;const Ce=O[Ft].map;if(x-=mt,x<0)mt=Math.max(0,O[Ft].g-100),wt=!1;else try{x="req"+x+"_"||"";try{var z=Ce instanceof Map?Ce:Object.entries(Ce);for(const[dn,Ke]of z){let Ye=Ke;m(Ke)&&(Ye=Pn(Ke)),Mt.push(x+dn+"="+encodeURIComponent(Ye))}}catch(dn){throw Mt.push(x+"type="+encodeURIComponent("_badmap")),dn}}catch{v&&v(Ce)}}if(wt){z=Mt.join("&");break t}}z=void 0}return o=o.i.splice(0,p),f.G=o,z}function ro(o){if(!o.g&&!o.v){o.Y=1;var f=o.Da;W||T(),ct||(W(),ct=!0),R.add(f,o),o.A=0}}function ss(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=er(y(o.Da,o),so(o,o.A)),o.A++,!0)}n.Da=function(){if(this.v=null,io(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=er(y(this.Wa,this),o)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Qt(10),Xn(this),io(this))};function as(o){o.B!=null&&(c.clearTimeout(o.B),o.B=null)}function io(o){o.g=new Ge(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var f=ee(o.na);It(f,"RID","rpc"),It(f,"SID",o.M),It(f,"AID",o.K),It(f,"CI",o.F?"0":"1"),!o.F&&o.ia&&It(f,"TO",o.ia),It(f,"TYPE","xmlhttp"),Ar(o,f),o.u&&o.o&&xn(f,o.u,o.o),o.O&&(o.g.H=o.O);var p=o.g;o=o.ba,p.M=1,p.A=or(ee(f)),p.u=null,p.R=!0,ti(p,o)}n.Va=function(){this.C!=null&&(this.C=null,Xn(this),ss(this),Qt(19))};function ai(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function Gs(o,f){var p=null;if(o.g==f){ai(o),as(o),o.g=null;var v=2}else if(ei(o.h,f))p=f.G,xr(o.h,f),v=1;else return;if(o.I!=0){if(f.o)if(v==1){p=f.u?f.u.length:0,f=Date.now()-f.F;var O=o.D;v=Wr(),te(v,new Qa(v,p)),Lr(o)}else ro(o);else if(O=f.m,O==3||O==0&&f.X>0||!(v==1&&Mu(o,f)||v==2&&ss(o)))switch(p&&p.length>0&&(f=o.h,f.i=f.i.concat(p)),O){case 1:wn(o,5);break;case 4:wn(o,10);break;case 3:wn(o,6);break;default:wn(o,2)}}}function so(o,f){let p=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(p*=2),p*f}function wn(o,f){if(o.j.info("Error code "+f),f==2){var p=y(o.bb,o),v=o.Ua;const O=!v;v=new Qe(v||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ar(v,"https"),or(v),O?eo(v.toString(),p):Ai(v.toString(),p)}else Qt(2);o.I=0,o.l&&o.l.pa(f),ao(o),Ri(o)}n.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function ao(o){if(o.I=0,o.ja=[],o.l){const f=Zi(o.h);(f.length!=0||o.i.length!=0)&&(B(o.ja,f),B(o.ja,o.i),o.h.i.length=0,M(o.i),o.i.length=0),o.l.oa()}}function oo(o,f,p){var v=p instanceof Qe?ee(p):new Qe(p);if(v.g!="")f&&(v.g=f+"."+v.g),vr(v,v.u);else{var O=c.location;v=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;const x=new Qe(null);v&&ar(x,v),f&&(x.g=f),O&&vr(x,O),p&&(x.h=p),v=x}return p=o.G,f=o.wa,p&&f&&It(v,p,f),It(v,"VER",o.ka),Ar(o,v),v}function os(o,f,p){if(f&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=o.Aa&&!o.ma?new Vt(new ni({ab:p})):new Vt(o.ma),f.Fa(o.L),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function lo(){}n=lo.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function oi(){}oi.prototype.g=function(o,f){return new de(o,f)};function de(o,f){Xt.call(this),this.g=new rs(f),this.l=o,this.h=f&&f.messageUrlParams||null,o=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(o?o["X-WebChannel-Content-Type"]=f.messageContentType:o={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(o?o["X-WebChannel-Client-Profile"]=f.sa:o={"X-WebChannel-Client-Profile":f.sa}),this.g.U=o,(o=f&&f.Qb)&&!w(o)&&(this.g.u=o),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!w(f)&&(this.g.G=f,o=this.h,o!==null&&f in o&&(o=this.h,f in o&&delete o[f])),this.j=new Wn(this)}I(de,Xt),de.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},de.prototype.close=function(){si(this.g)},de.prototype.o=function(o){var f=this.g;if(typeof o=="string"){var p={};p.__data__=o,o=p}else this.v&&(p={},p.__data__=Pn(o),o=p);f.i.push(new Ou(f.Ya++,o)),f.I==3&&Lr(f)},de.prototype.N=function(){this.g.l=null,delete this.j,si(this.g),delete this.g,de.Z.N.call(this)};function Qs(o){Vr.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var f=o.__sm__;if(f){t:{for(const p in f){o=p;break t}o=void 0}(this.i=o)&&(o=this.i,f=f!==null&&o in f?f[o]:void 0),this.data=f}else this.data=o}I(Qs,Vr);function uo(){Qn.call(this),this.status=1}I(uo,Qn);function Wn(o){this.g=o}I(Wn,lo),Wn.prototype.ra=function(){te(this.g,"a")},Wn.prototype.qa=function(o){te(this.g,new Qs(o))},Wn.prototype.pa=function(o){te(this.g,new uo)},Wn.prototype.oa=function(){te(this.g,"b")},oi.prototype.createWebChannel=oi.prototype.g,de.prototype.send=de.prototype.o,de.prototype.open=de.prototype.m,de.prototype.close=de.prototype.close,Rb=function(){return new oi},Ib=function(){return Wr()},Sb=qe,Wy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Te.NO_ERROR=0,Te.TIMEOUT=8,Te.HTTP_ERROR=6,od=Te,He.COMPLETE="complete",wb=He,Ga.EventType=Nn,Nn.OPEN="a",Nn.CLOSE="b",Nn.ERROR="c",Nn.MESSAGE="d",Xt.prototype.listen=Xt.prototype.J,Mc=Ga,Vt.prototype.listenOnce=Vt.prototype.K,Vt.prototype.getLastError=Vt.prototype.Ha,Vt.prototype.getLastErrorCode=Vt.prototype.ya,Vt.prototype.getStatus=Vt.prototype.ca,Vt.prototype.getResponseJson=Vt.prototype.La,Vt.prototype.getResponseText=Vt.prototype.la,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Fa,Ab=Vt}).apply(typeof Lf<"u"?Lf:typeof self<"u"?self:typeof window<"u"?window:{});const iw="@firebase/firestore",sw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Fn.UNAUTHENTICATED=new Fn(null),Fn.GOOGLE_CREDENTIALS=new Fn("google-credentials-uid"),Fn.FIRST_PARTY=new Fn("first-party-uid"),Fn.MOCK_USER=new Fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=new av("@firebase/firestore");function Nl(){return jo.logLevel}function yt(n,...t){if(jo.logLevel<=Wt.DEBUG){const e=t.map(uv);jo.debug(`Firestore (${Tu}): ${n}`,...e)}}function Os(n,...t){if(jo.logLevel<=Wt.ERROR){const e=t.map(uv);jo.error(`Firestore (${Tu}): ${n}`,...e)}}function iu(n,...t){if(jo.logLevel<=Wt.WARN){const e=t.map(uv);jo.warn(`Firestore (${Tu}): ${n}`,...e)}}function uv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(n,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,bb(n,r,e)}function bb(n,t,e){let r=`FIRESTORE (${Tu}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw Os(r),new Error(r)}function Me(n,t,e,r){let a="Unexpected state";typeof e=="string"?a=e:r=e,n||bb(t,a,r)}function oe(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends Ls{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class S9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Fn.UNAUTHENTICATED)))}shutdown(){}}class I9{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class R9{constructor(t){this.t=t,this.currentUser=Fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Me(this.o===void 0,42304);let r=this.i;const a=g=>this.i!==r?(r=this.i,e(g)):Promise.resolve();let u=new zl;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new zl,t.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},m=g=>{yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new zl)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((r=>this.i!==t?(yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Me(typeof r.accessToken=="string",31837,{l:r}),new Cb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Me(t===null||typeof t=="string",2055,{h:t}),new Fn(t)}}class b9{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=Fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class C9{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new b9(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(Fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class aw{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class D9{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xi(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Me(this.o===void 0,3512);const r=u=>{u.error!=null&&yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,yt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const a=u=>{yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>a(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?a(u):yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new aw(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(Me(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new aw(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V9(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=V9(40);for(let u=0;u<a.length;++u)r.length<20&&a[u]<e&&(r+=t.charAt(a[u]%62))}return r}}function Zt(n,t){return n<t?-1:n>t?1:0}function Jy(n,t){const e=Math.min(n.length,t.length);for(let r=0;r<e;r++){const a=n.charAt(r),u=t.charAt(r);if(a!==u)return Qg(a)===Qg(u)?Zt(a,u):Qg(a)?1:-1}return Zt(n.length,t.length)}const P9=55296,N9=57343;function Qg(n){const t=n.charCodeAt(0);return t>=P9&&t<=N9}function su(n,t,e){return n.length===t.length&&n.every(((r,a)=>e(r,t[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="__name__";class Oi{constructor(t,e,r){e===void 0?e=0:e>t.length&&Ut(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&Ut(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return Oi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Oi?t.forEach((r=>{e.push(r)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let a=0;a<r;a++){const u=Oi.compareSegments(t.get(a),e.get(a));if(u!==0)return u}return Zt(t.length,e.length)}static compareSegments(t,e){const r=Oi.isNumericId(t),a=Oi.isNumericId(e);return r&&!a?-1:!r&&a?1:r&&a?Oi.extractNumericId(t).compare(Oi.extractNumericId(e)):Jy(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Va.fromString(t.substring(4,t.length-2))}}class Ve extends Oi{construct(t,e,r){return new Ve(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new Et(ft.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter((a=>a.length>0)))}return new Ve(e)}static emptyPath(){return new Ve([])}}const O9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends Oi{construct(t,e,r){return new zn(t,e,r)}static isValidIdentifier(t){return O9.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ow}static keyField(){return new zn([ow])}static fromServerFormat(t){const e=[];let r="",a=0;const u=()=>{if(r.length===0)throw new Et(ft.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;a<t.length;){const m=t[a];if(m==="\\"){if(a+1===t.length)throw new Et(ft.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Et(ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,a+=2}else m==="`"?(c=!c,a++):m!=="."||c?(r+=m,a++):(u(),a++)}if(u(),c)throw new Et(ft.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new zn(e)}static emptyPath(){return new zn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(t){this.path=t}static fromPath(t){return new Ct(Ve.fromString(t))}static fromName(t){return new Ct(Ve.fromString(t).popFirst(5))}static empty(){return new Ct(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ve.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Ve.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ct(new Ve(t.slice()))}}function x9(n,t,e,r){if(t===!0&&r===!0)throw new Et(ft.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function lw(n){if(Ct.isDocumentKey(n))throw new Et(ft.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Vb(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function fm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Ut(12329,{type:typeof n})}function ld(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Et(ft.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=fm(n);throw new Et(ft.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(n,t){const e={typeString:n};return t&&(e.value=t),e}function Ah(n,t){if(!Vb(n))throw new Et(ft.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const a=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in n)){e=`JSON missing required field: '${r}'`;break}const c=n[r];if(a&&typeof c!==a){e=`JSON field '${r}' must be a ${a}.`;break}if(u!==void 0&&c!==u.value){e=`Expected '${r}' field to equal '${u.value}'`;break}}if(e)throw new Et(ft.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=-62135596800,cw=1e6;class Pe{static now(){return Pe.fromMillis(Date.now())}static fromDate(t){return Pe.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*cw);return new Pe(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Et(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Et(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<uw)throw new Et(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Et(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cw}_compareTo(t){return this.seconds===t.seconds?Zt(this.nanoseconds,t.nanoseconds):Zt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ah(t,Pe._jsonSchema))return new Pe(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-uw;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pe._jsonSchemaVersion="firestore/timestamp/1.0",Pe._jsonSchema={type:rn("string",Pe._jsonSchemaVersion),seconds:rn("number"),nanoseconds:rn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{static fromTimestamp(t){return new kt(t)}static min(){return new kt(new Pe(0,0))}static max(){return new kt(new Pe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=-1;function M9(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=kt.fromTimestamp(r===1e9?new Pe(e+1,0):new Pe(e,r));return new La(a,Ct.empty(),t)}function k9(n){return new La(n.readTime,n.key,lh)}class La{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new La(kt.min(),Ct.empty(),lh)}static max(){return new La(kt.max(),Ct.empty(),lh)}}function L9(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Ct.comparator(n.documentKey,t.documentKey),e!==0?e:Zt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dm(n){if(n.code!==ft.FAILED_PRECONDITION||n.message!==U9)throw n;yt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Ut(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ot(((r,a)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,a)},this.catchCallback=u=>{this.wrapFailure(e,u).next(r,a)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof ot?e:ot.resolve(e)}catch(e){return ot.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):ot.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):ot.reject(e)}static resolve(t){return new ot(((e,r)=>{e(t)}))}static reject(t){return new ot(((e,r)=>{r(t)}))}static waitFor(t){return new ot(((e,r)=>{let a=0,u=0,c=!1;t.forEach((m=>{++a,m.next((()=>{++u,c&&u===a&&e()}),(g=>r(g)))})),c=!0,u===a&&e()}))}static or(t){let e=ot.resolve(!1);for(const r of t)e=e.next((a=>a?ot.resolve(a):r()));return e}static forEach(t,e){const r=[];return t.forEach(((a,u)=>{r.push(e.call(this,a,u))})),this.waitFor(r)}static mapArray(t,e){return new ot(((r,a)=>{const u=t.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const y=g;e(t[y]).next((E=>{c[y]=E,++m,m===u&&r(c)}),(E=>a(E)))}}))}static doWhile(t,e){return new ot(((r,a)=>{const u=()=>{t()===!0?e().next((()=>{u()}),a):r()};u()}))}}function B9(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Au(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}mm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9=-1;function pm(n){return n==null}function Od(n){return n===0&&1/n==-1/0}function j9(n){return typeof n=="number"&&Number.isInteger(n)&&!Od(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="";function z9(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=hw(t)),t=q9(n.get(e),t);return hw(t)}function q9(n,t){let e=t;const r=n.length;for(let a=0;a<r;a++){const u=n.charAt(a);switch(u){case"\0":e+="";break;case Pb:e+="";break;default:e+=u}}return e}function hw(n){return n+Pb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function wu(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Nb(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(t,e){this.comparator=t,this.root=e||bn.EMPTY}insert(t,e){return new ze(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(t){return new ze(this.comparator,this.root.remove(t,this.comparator).copy(null,null,bn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return e+r.left.size;a<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,r)=>(t(e,r),!1)))}toString(){const t=[];return this.inorderTraversal(((e,r)=>(t.push(`${e}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Uf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Uf(this.root,t,this.comparator,!1)}getReverseIterator(){return new Uf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Uf(this.root,t,this.comparator,!0)}}class Uf{constructor(t,e,r,a){this.isReverse=a,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=e?r(t.key,e):1,e&&a&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class bn{constructor(t,e,r,a,u){this.key=t,this.value=e,this.color=r??bn.RED,this.left=a??bn.EMPTY,this.right=u??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,a,u){return new bn(t??this.key,e??this.value,r??this.color,a??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let a=this;const u=r(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,e,r),null):u===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return bn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ut(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ut(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ut(27949);return t+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ut(57766)}get value(){throw Ut(16141)}get color(){throw Ut(16727)}get left(){throw Ut(29726)}get right(){throw Ut(36894)}copy(t,e,r,a,u){return this}insert(t,e,r){return new bn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.comparator=t,this.data=new ze(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,r)=>(t(e),!1)))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new dw(this.data.getIterator())}getIteratorFrom(t){return new dw(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((r=>{e=e.add(r)})),e}isEqual(t){if(!(t instanceof ln)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,u=r.getNext().key;if(this.comparator(a,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new ln(this.comparator);return e.data=t,e}}class dw{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(t){this.fields=t,t.sort(zn.comparator)}static empty(){return new Ta([])}unionWith(t){let e=new ln(zn.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new Ta(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return su(this.fields,t.fields,((e,r)=>e.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(a){try{return atob(a)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Ob("Invalid base64 string: "+u):u}})(t);return new Dn(e)}static fromUint8Array(t){const e=(function(a){let u="";for(let c=0;c<a.length;++c)u+=String.fromCharCode(a[c]);return u})(t);return new Dn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const r=new Uint8Array(e.length);for(let a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Zt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Dn.EMPTY_BYTE_STRING=new Dn("");const H9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ua(n){if(Me(!!n,39018),typeof n=="string"){let t=0;const e=H9.exec(n);if(Me(!!e,46558,{timestamp:n}),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:je(n.seconds),nanos:je(n.nanos)}}function je(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function $a(n){return typeof n=="string"?Dn.fromBase64String(n):Dn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="server_timestamp",Mb="__type__",kb="__previous_value__",Lb="__local_write_time__";function cv(n){return(n?.mapValue?.fields||{})[Mb]?.stringValue===xb}function gm(n){const t=n.mapValue.fields[kb];return cv(t)?gm(t):t}function uh(n){const t=Ua(n.mapValue.fields[Lb].timestampValue);return new Pe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(t,e,r,a,u,c,m,g,y,E){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=a,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=E}}const xd="(default)";class ch{constructor(t,e){this.projectId=t,this.database=e||xd}static empty(){return new ch("","")}get isDefaultDatabase(){return this.database===xd}isEqual(t){return t instanceof ch&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="__type__",Q9="__max__",$f={mapValue:{}},$b="__vector__",Md="value";function Ba(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cv(n)?4:Y9(n)?9007199254740991:K9(n)?10:11:Ut(28295,{value:n})}function Gi(n,t){if(n===t)return!0;const e=Ba(n);if(e!==Ba(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return uh(n).isEqual(uh(t));case 3:return(function(a,u){if(typeof a.timestampValue=="string"&&typeof u.timestampValue=="string"&&a.timestampValue.length===u.timestampValue.length)return a.timestampValue===u.timestampValue;const c=Ua(a.timestampValue),m=Ua(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(a,u){return $a(a.bytesValue).isEqual($a(u.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(a,u){return je(a.geoPointValue.latitude)===je(u.geoPointValue.latitude)&&je(a.geoPointValue.longitude)===je(u.geoPointValue.longitude)})(n,t);case 2:return(function(a,u){if("integerValue"in a&&"integerValue"in u)return je(a.integerValue)===je(u.integerValue);if("doubleValue"in a&&"doubleValue"in u){const c=je(a.doubleValue),m=je(u.doubleValue);return c===m?Od(c)===Od(m):isNaN(c)&&isNaN(m)}return!1})(n,t);case 9:return su(n.arrayValue.values||[],t.arrayValue.values||[],Gi);case 10:case 11:return(function(a,u){const c=a.mapValue.fields||{},m=u.mapValue.fields||{};if(fw(c)!==fw(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!Gi(c[g],m[g])))return!1;return!0})(n,t);default:return Ut(52216,{left:n})}}function hh(n,t){return(n.values||[]).find((e=>Gi(e,t)))!==void 0}function au(n,t){if(n===t)return 0;const e=Ba(n),r=Ba(t);if(e!==r)return Zt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Zt(n.booleanValue,t.booleanValue);case 2:return(function(u,c){const m=je(u.integerValue||u.doubleValue),g=je(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(n,t);case 3:return mw(n.timestampValue,t.timestampValue);case 4:return mw(uh(n),uh(t));case 5:return Jy(n.stringValue,t.stringValue);case 6:return(function(u,c){const m=$a(u),g=$a(c);return m.compareTo(g)})(n.bytesValue,t.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let y=0;y<m.length&&y<g.length;y++){const E=Zt(m[y],g[y]);if(E!==0)return E}return Zt(m.length,g.length)})(n.referenceValue,t.referenceValue);case 8:return(function(u,c){const m=Zt(je(u.latitude),je(c.latitude));return m!==0?m:Zt(je(u.longitude),je(c.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return pw(n.arrayValue,t.arrayValue);case 10:return(function(u,c){const m=u.fields||{},g=c.fields||{},y=m[Md]?.arrayValue,E=g[Md]?.arrayValue,I=Zt(y?.values?.length||0,E?.values?.length||0);return I!==0?I:pw(y,E)})(n.mapValue,t.mapValue);case 11:return(function(u,c){if(u===$f.mapValue&&c===$f.mapValue)return 0;if(u===$f.mapValue)return 1;if(c===$f.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),y=c.fields||{},E=Object.keys(y);g.sort(),E.sort();for(let I=0;I<g.length&&I<E.length;++I){const V=Jy(g[I],E[I]);if(V!==0)return V;const M=au(m[g[I]],y[E[I]]);if(M!==0)return M}return Zt(g.length,E.length)})(n.mapValue,t.mapValue);default:throw Ut(23264,{he:e})}}function mw(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Zt(n,t);const e=Ua(n),r=Ua(t),a=Zt(e.seconds,r.seconds);return a!==0?a:Zt(e.nanos,r.nanos)}function pw(n,t){const e=n.values||[],r=t.values||[];for(let a=0;a<e.length&&a<r.length;++a){const u=au(e[a],r[a]);if(u)return u}return Zt(e.length,r.length)}function ou(n){return Zy(n)}function Zy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const r=Ua(e);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return $a(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return Ct.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let r="[",a=!0;for(const u of e.values||[])a?a=!1:r+=",",r+=Zy(u);return r+"]"})(n.arrayValue):"mapValue"in n?(function(e){const r=Object.keys(e.fields||{}).sort();let a="{",u=!0;for(const c of r)u?u=!1:a+=",",a+=`${c}:${Zy(e.fields[c])}`;return a+"}"})(n.mapValue):Ut(61005,{value:n})}function ud(n){switch(Ba(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=gm(n);return t?16+ud(t):16;case 5:return 2*n.stringValue.length;case 6:return $a(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,u)=>a+ud(u)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return wu(r.fields,((u,c)=>{a+=u.length+ud(c)})),a})(n.mapValue);default:throw Ut(13486,{value:n})}}function gw(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function t_(n){return!!n&&"integerValue"in n}function hv(n){return!!n&&"arrayValue"in n}function yw(n){return!!n&&"nullValue"in n}function _w(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Kg(n){return!!n&&"mapValue"in n}function K9(n){return(n?.mapValue?.fields||{})[Ub]?.stringValue===$b}function Xc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return wu(n.mapValue.fields,((e,r)=>t.mapValue.fields[e]=Xc(r))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Xc(n.arrayValue.values[e]);return t}return{...n}}function Y9(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Q9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(t){this.value=t}static empty(){return new Mi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!Kg(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Xc(e)}setAll(t){let e=zn.emptyPath(),r={},a=[];t.forEach(((c,m)=>{if(!e.isImmediateParentOf(m)){const g=this.getFieldsMap(e);this.applyChanges(g,r,a),r={},a=[],e=m.popLast()}c?r[m.lastSegment()]=Xc(c):a.push(m.lastSegment())}));const u=this.getFieldsMap(e);this.applyChanges(u,r,a)}delete(t){const e=this.field(t.popLast());Kg(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Gi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let a=e.mapValue.fields[t.get(r)];Kg(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,r){wu(e,((a,u)=>t[a]=u));for(const a of r)delete t[a]}clone(){return new Mi(Xc(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(t,e,r,a,u,c,m){this.key=t,this.documentType=e,this.version=r,this.readTime=a,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(t){return new jn(t,0,kt.min(),kt.min(),kt.min(),Mi.empty(),0)}static newFoundDocument(t,e,r,a){return new jn(t,1,e,kt.min(),r,a,0)}static newNoDocument(t,e){return new jn(t,2,e,kt.min(),kt.min(),Mi.empty(),0)}static newUnknownDocument(t,e){return new jn(t,3,e,kt.min(),kt.min(),Mi.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Mi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Mi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof jn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(t,e){this.position=t,this.inclusive=e}}function vw(n,t,e){let r=0;for(let a=0;a<n.position.length;a++){const u=t[a],c=n.position[a];if(u.field.isKeyField()?r=Ct.comparator(Ct.fromName(c.referenceValue),e.key):r=au(c,e.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ew(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Gi(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(t,e="asc"){this.field=t,this.dir=e}}function X9(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{}class en extends Bb{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new J9(t,e,r):e==="array-contains"?new eL(t,r):e==="in"?new nL(t,r):e==="not-in"?new rL(t,r):e==="array-contains-any"?new iL(t,r):new en(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new Z9(t,r):new tL(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(au(e,this.value)):e!==null&&Ba(this.value)===Ba(e)&&this.matchesComparison(au(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ut(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pi extends Bb{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new pi(t,e)}matches(t){return Fb(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Fb(n){return n.op==="and"}function jb(n){return W9(n)&&Fb(n)}function W9(n){for(const t of n.filters)if(t instanceof pi)return!1;return!0}function e_(n){if(n instanceof en)return n.field.canonicalString()+n.op.toString()+ou(n.value);if(jb(n))return n.filters.map((t=>e_(t))).join(",");{const t=n.filters.map((e=>e_(e))).join(",");return`${n.op}(${t})`}}function zb(n,t){return n instanceof en?(function(r,a){return a instanceof en&&r.op===a.op&&r.field.isEqual(a.field)&&Gi(r.value,a.value)})(n,t):n instanceof pi?(function(r,a){return a instanceof pi&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((u,c,m)=>u&&zb(c,a.filters[m])),!0):!1})(n,t):void Ut(19439)}function qb(n){return n instanceof en?(function(e){return`${e.field.canonicalString()} ${e.op} ${ou(e.value)}`})(n):n instanceof pi?(function(e){return e.op.toString()+" {"+e.getFilters().map(qb).join(" ,")+"}"})(n):"Filter"}class J9 extends en{constructor(t,e,r){super(t,e,r),this.key=Ct.fromName(r.referenceValue)}matches(t){const e=Ct.comparator(t.key,this.key);return this.matchesComparison(e)}}class Z9 extends en{constructor(t,e){super(t,"in",e),this.keys=Hb("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class tL extends en{constructor(t,e){super(t,"not-in",e),this.keys=Hb("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Hb(n,t){return(t.arrayValue?.values||[]).map((e=>Ct.fromName(e.referenceValue)))}class eL extends en{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return hv(e)&&hh(e.arrayValue,this.value)}}class nL extends en{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&hh(this.value.arrayValue,e)}}class rL extends en{constructor(t,e){super(t,"not-in",e)}matches(t){if(hh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!hh(this.value.arrayValue,e)}}class iL extends en{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!hv(e)||!e.arrayValue.values)&&e.arrayValue.values.some((r=>hh(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(t,e=null,r=[],a=[],u=null,c=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=a,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function Tw(n,t=null,e=[],r=[],a=null,u=null,c=null){return new sL(n,t,e,r,a,u,c)}function fv(n){const t=oe(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((r=>e_(r))).join(","),e+="|ob:",e+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),pm(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((r=>ou(r))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((r=>ou(r))).join(",")),t.Te=e}return t.Te}function dv(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!X9(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!zb(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Ew(n.startAt,t.startAt)&&Ew(n.endAt,t.endAt)}function n_(n){return Ct.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(t,e=null,r=[],a=[],u=null,c="F",m=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=a,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aL(n,t,e,r,a,u,c,m){return new wh(n,t,e,r,a,u,c,m)}function mv(n){return new wh(n)}function Aw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Gb(n){return n.collectionGroup!==null}function Wc(n){const t=oe(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),e.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new ln(zn.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(t).forEach((u=>{e.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Ld(u,r))})),e.has(zn.keyField().canonicalString())||t.Ie.push(new Ld(zn.keyField(),r))}return t.Ie}function $i(n){const t=oe(n);return t.Ee||(t.Ee=oL(t,Wc(n))),t.Ee}function oL(n,t){if(n.limitType==="F")return Tw(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((a=>{const u=a.dir==="desc"?"asc":"desc";return new Ld(a.field,u)}));const e=n.endAt?new kd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new kd(n.startAt.position,n.startAt.inclusive):null;return Tw(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function r_(n,t){const e=n.filters.concat([t]);return new wh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function i_(n,t,e){return new wh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function ym(n,t){return dv($i(n),$i(t))&&n.limitType===t.limitType}function Qb(n){return`${fv($i(n))}|lt:${n.limitType}`}function Ol(n){return`Query(target=${(function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map((a=>qb(a))).join(", ")}]`),pm(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((a=>ou(a))).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((a=>ou(a))).join(",")),`Target(${r})`})($i(n))}; limitType=${n.limitType})`}function _m(n,t){return t.isFoundDocument()&&(function(r,a){const u=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Ct.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(n,t)&&(function(r,a){for(const u of Wc(r))if(!u.field.isKeyField()&&a.data.field(u.field)===null)return!1;return!0})(n,t)&&(function(r,a){for(const u of r.filters)if(!u.matches(a))return!1;return!0})(n,t)&&(function(r,a){return!(r.startAt&&!(function(c,m,g){const y=vw(c,m,g);return c.inclusive?y<=0:y<0})(r.startAt,Wc(r),a)||r.endAt&&!(function(c,m,g){const y=vw(c,m,g);return c.inclusive?y>=0:y>0})(r.endAt,Wc(r),a))})(n,t)}function lL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Kb(n){return(t,e)=>{let r=!1;for(const a of Wc(n)){const u=uL(a,t,e);if(u!==0)return u;r=r||a.field.isKeyField()}return 0}}function uL(n,t,e){const r=n.field.isKeyField()?Ct.comparator(t.key,e.key):(function(u,c,m){const g=c.data.field(u),y=m.data.field(u);return g!==null&&y!==null?au(g,y):Ut(42886)})(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ut(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[a,u]of r)if(this.equalsFn(a,t))return u}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],t))return void(a[u]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return r.length===1?delete this.inner[e]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(t){wu(this.inner,((e,r)=>{for(const[a,u]of r)t(a,u)}))}isEmpty(){return Nb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=new ze(Ct.comparator);function Fa(){return cL}const Yb=new ze(Ct.comparator);function kc(...n){let t=Yb;for(const e of n)t=t.insert(e.key,e);return t}function hL(n){let t=Yb;return n.forEach(((e,r)=>t=t.insert(e,r.overlayedDocument))),t}function Oo(){return Jc()}function Xb(){return Jc()}function Jc(){return new Go((n=>n.toString()),((n,t)=>n.isEqual(t)))}const fL=new ln(Ct.comparator);function ue(...n){let t=fL;for(const e of n)t=t.add(e);return t}const dL=new ln(Zt);function mL(){return dL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Od(t)?"-0":t}}function Wb(n){return{integerValue:""+n}}function pL(n,t){return j9(t)?Wb(t):pv(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(){this._=void 0}}function gL(n,t,e){return n instanceof s_?(function(a,u){const c={fields:{[Mb]:{stringValue:xb},[Lb]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return u&&cv(u)&&(u=gm(u)),u&&(c.fields[kb]=u),{mapValue:c}})(e,t):n instanceof Ud?Jb(n,t):n instanceof $d?Zb(n,t):(function(a,u){const c=_L(a,u),m=ww(c)+ww(a.Ae);return t_(c)&&t_(a.Ae)?Wb(m):pv(a.serializer,m)})(n,t)}function yL(n,t,e){return n instanceof Ud?Jb(n,t):n instanceof $d?Zb(n,t):e}function _L(n,t){return n instanceof a_?(function(r){return t_(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class s_ extends vm{}class Ud extends vm{constructor(t){super(),this.elements=t}}function Jb(n,t){const e=tC(t);for(const r of n.elements)e.some((a=>Gi(a,r)))||e.push(r);return{arrayValue:{values:e}}}class $d extends vm{constructor(t){super(),this.elements=t}}function Zb(n,t){let e=tC(t);for(const r of n.elements)e=e.filter((a=>!Gi(a,r)));return{arrayValue:{values:e}}}class a_ extends vm{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function ww(n){return je(n.integerValue||n.doubleValue)}function tC(n){return hv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function vL(n,t){return n.field.isEqual(t.field)&&(function(r,a){return r instanceof Ud&&a instanceof Ud||r instanceof $d&&a instanceof $d?su(r.elements,a.elements,Gi):r instanceof a_&&a instanceof a_?Gi(r.Ae,a.Ae):r instanceof s_&&a instanceof s_})(n.transform,t.transform)}class xo{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new xo}static exists(t){return new xo(void 0,t)}static updateTime(t){return new xo(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function cd(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class gv{}function eC(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new TL(n.key,xo.none()):new yv(n.key,n.data,xo.none());{const e=n.data,r=Mi.empty();let a=new ln(zn.comparator);for(let u of t.fields)if(!a.has(u)){let c=e.field(u);c===null&&u.length>1&&(u=u.popLast(),c=e.field(u)),c===null?r.delete(u):r.set(u,c),a=a.add(u)}return new Em(n.key,r,new Ta(a.toArray()),xo.none())}}function EL(n,t,e){n instanceof yv?(function(a,u,c){const m=a.value.clone(),g=Iw(a.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,t,e):n instanceof Em?(function(a,u,c){if(!cd(a.precondition,u))return void u.convertToUnknownDocument(c.version);const m=Iw(a.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(nC(a)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(n,t,e):(function(a,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function Zc(n,t,e,r){return n instanceof yv?(function(u,c,m,g){if(!cd(u.precondition,c))return m;const y=u.value.clone(),E=Rw(u.fieldTransforms,g,c);return y.setAll(E),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(n,t,e,r):n instanceof Em?(function(u,c,m,g){if(!cd(u.precondition,c))return m;const y=Rw(u.fieldTransforms,g,c),E=c.data;return E.setAll(nC(u)),E.setAll(y),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((I=>I.field)))})(n,t,e,r):(function(u,c,m){return cd(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(n,t,e)}function Sw(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&su(r,a,((u,c)=>vL(u,c)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class yv extends gv{constructor(t,e,r,a=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Em extends gv{constructor(t,e,r,a,u=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=a,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function nC(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}})),t}function Iw(n,t,e){const r=new Map;Me(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let a=0;a<e.length;a++){const u=n[a],c=u.transform,m=t.data.field(u.field);r.set(u.field,yL(c,m,e[a]))}return r}function Rw(n,t,e){const r=new Map;for(const a of n){const u=a.transform,c=e.data.field(a.field);r.set(a.field,gL(u,c,t))}return r}class TL extends gv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(t,e,r,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const u=this.mutations[a];u.key.isEqual(t.key)&&EL(u,t,r[a])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=Zc(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=Zc(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=Xb();return this.mutations.forEach((a=>{const u=t.get(a.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=e.has(a.key)?null:m;const g=eC(c,m);g!==null&&r.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(kt.min())})),r}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),ue())}isEqual(t){return this.batchId===t.batchId&&su(this.mutations,t.mutations,((e,r)=>Sw(e,r)))&&su(this.baseMutations,t.baseMutations,((e,r)=>Sw(e,r)))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,ie;function rC(n){if(n===void 0)return Os("GRPC error has no .code"),ft.UNKNOWN;switch(n){case Ze.OK:return ft.OK;case Ze.CANCELLED:return ft.CANCELLED;case Ze.UNKNOWN:return ft.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return ft.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return ft.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return ft.INTERNAL;case Ze.UNAVAILABLE:return ft.UNAVAILABLE;case Ze.UNAUTHENTICATED:return ft.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return ft.INVALID_ARGUMENT;case Ze.NOT_FOUND:return ft.NOT_FOUND;case Ze.ALREADY_EXISTS:return ft.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return ft.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return ft.FAILED_PRECONDITION;case Ze.ABORTED:return ft.ABORTED;case Ze.OUT_OF_RANGE:return ft.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return ft.UNIMPLEMENTED;case Ze.DATA_LOSS:return ft.DATA_LOSS;default:return Ut(39323,{code:n})}}(ie=Ze||(Ze={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=new Va([4294967295,4294967295],0);function bw(n){const t=IL().encode(n),e=new Tb;return e.update(t),new Uint8Array(e.digest())}function Cw(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),a=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Va([e,r],0),new Va([a,u],0)]}class _v{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new Lc(`Invalid padding: ${e}`);if(r<0)throw new Lc(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Lc(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new Lc(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Va.fromNumber(this.ge)}ye(t,e,r){let a=t.add(e.multiply(Va.fromNumber(r)));return a.compare(RL)===1&&(a=new Va([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=bw(t),[r,a]=Cw(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,a,u);if(!this.we(c))return!1}return!0}static create(t,e,r){const a=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),c=new _v(u,a,e);return r.forEach((m=>c.insert(m))),c}insert(t){if(this.ge===0)return;const e=bw(t),[r,a]=Cw(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,a,u);this.Se(c)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class Lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(t,e,r,a,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const a=new Map;return a.set(t,Sh.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new Tm(kt.min(),a,new ze(Zt),Fa(),ue())}}class Sh{constructor(t,e,r,a,u){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new Sh(r,e,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(t,e,r,a){this.be=t,this.removedTargetIds=e,this.key=r,this.De=a}}class iC{constructor(t,e){this.targetId=t,this.Ce=e}}class sC{constructor(t,e,r=Dn.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=a}}class Dw{constructor(){this.ve=0,this.Fe=Vw(),this.Me=Dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ue(),e=ue(),r=ue();return this.Fe.forEach(((a,u)=>{switch(u){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:r=r.add(a);break;default:Ut(38017,{changeType:u})}})),new Sh(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=Vw()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Me(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class bL{constructor(t){this.Ge=t,this.ze=new Map,this.je=Fa(),this.Je=Bf(),this.He=Bf(),this.Ye=new ze(Zt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:Ut(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((r,a)=>{this.rt(a)&&e(a)}))}st(t){const e=t.targetId,r=t.Ce.count,a=this.ot(e);if(a){const u=a.target;if(n_(u))if(r===0){const c=new Ct(u.path);this.et(e,c,jn.newNoDocument(c,kt.min()))}else Me(r===1,20013,{expectedCount:r});else{const c=this._t(e);if(c!==r){const m=this.ut(t),g=m?this.ct(m,t,c):1;if(g!==0){this.it(e);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,y)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:u=0}=e;let c,m;try{c=$a(r).toUint8Array()}catch(g){if(g instanceof Ob)return iu("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new _v(c,a,u)}catch(g){return iu(g instanceof Lc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let a=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(e,u,null),a++)})),a}Tt(t){const e=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&n_(m.target)){const g=new Ct(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,jn.newNoDocument(g,t))}u.Be&&(e.set(c,u.ke()),u.qe())}}));let r=ue();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(t)));const a=new Tm(t,e,this.Ye,this.je,r);return this.je=Fa(),this.Je=Bf(),this.He=Bf(),this.Ye=new ze(Zt),a}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,e)?a.Qe(e,1):a.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new Dw,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new ln(Zt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new ln(Zt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||yt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Dw),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Bf(){return new ze(Ct.comparator)}function Vw(){return new ze(Ct.comparator)}const CL={asc:"ASCENDING",desc:"DESCENDING"},DL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VL={and:"AND",or:"OR"};class PL{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function o_(n,t){return n.useProto3Json||pm(t)?t:{value:t}}function l_(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function aC(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function ql(n){return Me(!!n,49232),kt.fromTimestamp((function(e){const r=Ua(e);return new Pe(r.seconds,r.nanos)})(n))}function oC(n,t){return u_(n,t).canonicalString()}function u_(n,t){const e=(function(a){return new Ve(["projects",a.projectId,"databases",a.database])})(n).child("documents");return t===void 0?e:e.child(t)}function lC(n){const t=Ve.fromString(n);return Me(dC(t),10190,{key:t.toString()}),t}function Yg(n,t){const e=lC(t);if(e.get(1)!==n.databaseId.projectId)throw new Et(ft.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Et(ft.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Ct(cC(e))}function uC(n,t){return oC(n.databaseId,t)}function NL(n){const t=lC(n);return t.length===4?Ve.emptyPath():cC(t)}function Pw(n){return new Ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cC(n){return Me(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function OL(n,t){let e;if("targetChange"in t){t.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ut(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],u=(function(y,E){return y.useProto3Json?(Me(E===void 0||typeof E=="string",58123),Dn.fromBase64String(E||"")):(Me(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Dn.fromUint8Array(E||new Uint8Array))})(n,t.targetChange.resumeToken),c=t.targetChange.cause,m=c&&(function(y){const E=y.code===void 0?ft.UNKNOWN:rC(y.code);return new Et(E,y.message||"")})(c);e=new sC(r,a,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const a=Yg(n,r.document.name),u=ql(r.document.updateTime),c=r.document.createTime?ql(r.document.createTime):kt.min(),m=new Mi({mapValue:{fields:r.document.fields}}),g=jn.newFoundDocument(a,u,c,m),y=r.targetIds||[],E=r.removedTargetIds||[];e=new hd(y,E,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const a=Yg(n,r.document),u=r.readTime?ql(r.readTime):kt.min(),c=jn.newNoDocument(a,u),m=r.removedTargetIds||[];e=new hd([],m,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const a=Yg(n,r.document),u=r.removedTargetIds||[];e=new hd([],u,a,null)}else{if(!("filter"in t))return Ut(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:a=0,unchangedNames:u}=r,c=new SL(a,u),m=r.targetId;e=new iC(m,c)}}return e}function xL(n,t){return{documents:[uC(n,t.path)]}}function ML(n,t){const e={structuredQuery:{}},r=t.path;let a;t.collectionGroup!==null?(a=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=uC(n,a);const u=(function(y){if(y.length!==0)return fC(pi.create(y,"and"))})(t.filters);u&&(e.structuredQuery.where=u);const c=(function(y){if(y.length!==0)return y.map((E=>(function(V){return{field:xl(V.field),direction:UL(V.dir)}})(E)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const m=o_(n,t.limit);return m!==null&&(e.structuredQuery.limit=m),t.startAt&&(e.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:e,parent:a}}function kL(n){let t=NL(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let a=null;if(r>0){Me(r===1,65062);const E=e.from[0];E.allDescendants?a=E.collectionId:t=t.child(E.collectionId)}let u=[];e.where&&(u=(function(I){const V=hC(I);return V instanceof pi&&jb(V)?V.getFilters():[V]})(e.where));let c=[];e.orderBy&&(c=(function(I){return I.map((V=>(function(B){return new Ld(Ml(B.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(V)))})(e.orderBy));let m=null;e.limit&&(m=(function(I){let V;return V=typeof I=="object"?I.value:I,pm(V)?null:V})(e.limit));let g=null;e.startAt&&(g=(function(I){const V=!!I.before,M=I.values||[];return new kd(M,V)})(e.startAt));let y=null;return e.endAt&&(y=(function(I){const V=!I.before,M=I.values||[];return new kd(M,V)})(e.endAt)),aL(t,a,c,u,m,"F",g,y)}function LL(n,t){const e=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ut(28987,{purpose:a})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function hC(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Ml(e.unaryFilter.field);return en.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Ml(e.unaryFilter.field);return en.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ml(e.unaryFilter.field);return en.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ml(e.unaryFilter.field);return en.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ut(61313);default:return Ut(60726)}})(n):n.fieldFilter!==void 0?(function(e){return en.create(Ml(e.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ut(58110);default:return Ut(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return pi.create(e.compositeFilter.filters.map((r=>hC(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ut(1026)}})(e.compositeFilter.op))})(n):Ut(30097,{filter:n})}function UL(n){return CL[n]}function $L(n){return DL[n]}function BL(n){return VL[n]}function xl(n){return{fieldPath:n.canonicalString()}}function Ml(n){return zn.fromServerFormat(n.fieldPath)}function fC(n){return n instanceof en?(function(e){if(e.op==="=="){if(_w(e.value))return{unaryFilter:{field:xl(e.field),op:"IS_NAN"}};if(yw(e.value))return{unaryFilter:{field:xl(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(_w(e.value))return{unaryFilter:{field:xl(e.field),op:"IS_NOT_NAN"}};if(yw(e.value))return{unaryFilter:{field:xl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xl(e.field),op:$L(e.op),value:e.value}}})(n):n instanceof pi?(function(e){const r=e.getFilters().map((a=>fC(a)));return r.length===1?r[0]:{compositeFilter:{op:BL(e.op),filters:r}}})(n):Ut(54877,{filter:n})}function dC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(t,e,r,a,u=kt.min(),c=kt.min(),m=Dn.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new Aa(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Aa(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(t){this.yt=t}}function jL(n){const t=kL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?i_(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(){this.Cn=new qL}addToCollectionParentIndex(t,e){return this.Cn.add(e),ot.resolve()}getCollectionParents(t,e){return ot.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return ot.resolve()}deleteFieldIndex(t,e){return ot.resolve()}deleteAllFieldIndexes(t){return ot.resolve()}createTargetIndexes(t,e){return ot.resolve()}getDocumentsMatchingTarget(t,e){return ot.resolve(null)}getIndexType(t,e){return ot.resolve(0)}getFieldIndexes(t,e){return ot.resolve([])}getNextCollectionGroupToUpdate(t){return ot.resolve(null)}getMinOffset(t,e){return ot.resolve(La.min())}getMinOffsetFromCollectionGroup(t,e){return ot.resolve(La.min())}updateCollectionGroup(t,e,r){return ot.resolve()}updateIndexEntries(t,e){return ot.resolve()}}class qL{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),a=this.index[e]||new ln(Ve.comparator),u=!a.has(r);return this.index[e]=a.add(r),u}has(t){const e=t.lastSegment(),r=t.popLast(),a=this.index[e];return a&&a.has(r)}getEntries(t){return(this.index[t]||new ln(Ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mC=41943040;class fr{static withCacheSize(t){return new fr(t,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr.DEFAULT_COLLECTION_PERCENTILE=10,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fr.DEFAULT=new fr(mC,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fr.DISABLED=new fr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new lu(0)}static cr(){return new lu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="LruGarbageCollector",HL=1048576;function xw([n,t],[e,r]){const a=Zt(n,e);return a===0?Zt(t,r):a}class GL{constructor(t){this.Ir=t,this.buffer=new ln(xw),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();xw(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class QL{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){yt(Ow,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Au(e)?yt(Ow,"Ignoring IndexedDB error during garbage collection: ",e):await dm(e)}await this.Vr(3e5)}))}}class KL{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((r=>Math.floor(e/100*r)))}nthSequenceNumber(t,e){if(e===0)return ot.resolve(mm.ce);const r=new GL(e);return this.mr.forEachTarget(t,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(t,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(yt("LruGarbageCollector","Garbage collection skipped; disabled"),ot.resolve(Nw)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(yt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nw):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,a,u,c,m,g,y;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(yt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),a=this.params.maximumSequenceNumbersToCollect):a=I,c=Date.now(),this.nthSequenceNumber(t,a)))).next((I=>(r=I,m=Date.now(),this.removeTargets(t,r,e)))).next((I=>(u=I,g=Date.now(),this.removeOrphanedDocuments(t,r)))).next((I=>(y=Date.now(),Nl()<=Wt.DEBUG&&yt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${a} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${I} documents in `+(y-g)+`ms
Total Duration: ${y-E}ms`),ot.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:u,documentsRemoved:I}))))}}function YL(n,t){return new KL(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(){this.changes=new Go((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,jn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?ot.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(t,e,r,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=a}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next((a=>(r=a,this.remoteDocumentCache.getEntry(t,e)))).next((a=>(r!==null&&Zc(r.mutation,a,Ta.empty(),Pe.now()),a)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.getLocalViewOfDocuments(t,r,ue()).next((()=>r))))}getLocalViewOfDocuments(t,e,r=ue()){const a=Oo();return this.populateOverlays(t,a,e).next((()=>this.computeViews(t,e,a,r).next((u=>{let c=kc();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const r=Oo();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,ue())))}populateOverlays(t,e,r){const a=[];return r.forEach((u=>{e.has(u)||a.push(u)})),this.documentOverlayCache.getOverlays(t,a).next((u=>{u.forEach(((c,m)=>{e.set(c,m)}))}))}computeViews(t,e,r,a){let u=Fa();const c=Jc(),m=(function(){return Jc()})();return e.forEach(((g,y)=>{const E=r.get(y.key);a.has(y.key)&&(E===void 0||E.mutation instanceof Em)?u=u.insert(y.key,y):E!==void 0?(c.set(y.key,E.mutation.getFieldMask()),Zc(E.mutation,y,E.mutation.getFieldMask(),Pe.now())):c.set(y.key,Ta.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((y,E)=>c.set(y,E))),e.forEach(((y,E)=>m.set(y,new WL(E,c.get(y)??null)))),m)))}recalculateAndSaveOverlays(t,e){const r=Jc();let a=new ze(((c,m)=>c-m)),u=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const m of c)m.keys().forEach((g=>{const y=e.get(g);if(y===null)return;let E=r.get(g)||Ta.empty();E=m.applyToLocalView(y,E),r.set(g,E);const I=(a.get(m.batchId)||ue()).add(g);a=a.insert(m.batchId,I)}))})).next((()=>{const c=[],m=a.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,E=g.value,I=Xb();E.forEach((V=>{if(!u.has(V)){const M=eC(e.get(V),r.get(V));M!==null&&I.set(V,M),u=u.add(V)}})),c.push(this.documentOverlayCache.saveOverlays(t,y,I))}return ot.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,e,r,a){return(function(c){return Ct.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Gb(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,a):this.getDocumentsMatchingCollectionQuery(t,e,r,a)}getNextDocuments(t,e,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,a).next((u=>{const c=a-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,a-u.size):ot.resolve(Oo());let m=lh,g=u;return c.next((y=>ot.forEach(y,((E,I)=>(m<I.largestBatchId&&(m=I.largestBatchId),u.get(E)?ot.resolve():this.remoteDocumentCache.getEntry(t,E).next((V=>{g=g.insert(E,V)}))))).next((()=>this.populateOverlays(t,y,u))).next((()=>this.computeViews(t,g,y,ue()))).next((E=>({batchId:m,changes:hL(E)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ct(e)).next((r=>{let a=kc();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(t,e,r,a){const u=e.collectionGroup;let c=kc();return this.indexManager.getCollectionParents(t,u).next((m=>ot.forEach(m,(g=>{const y=(function(I,V){return new wh(V,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(e,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,y,r,a).next((E=>{E.forEach(((I,V)=>{c=c.insert(I,V)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,r,a){let u;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,u,a)))).next((c=>{u.forEach(((g,y)=>{const E=y.getKey();c.get(E)===null&&(c=c.insert(E,jn.newInvalidDocument(E)))}));let m=kc();return c.forEach(((g,y)=>{const E=u.get(g);E!==void 0&&Zc(E.mutation,y,Ta.empty(),Pe.now()),_m(e,y)&&(m=m.insert(g,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return ot.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(a){return{id:a.id,version:a.version,createTime:ql(a.createTime)}})(e)),ot.resolve()}getNamedQuery(t,e){return ot.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(a){return{name:a.name,query:jL(a.bundledQuery),readTime:ql(a.readTime)}})(e)),ot.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(){this.overlays=new ze(Ct.comparator),this.qr=new Map}getOverlay(t,e){return ot.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Oo();return ot.forEach(e,(a=>this.getOverlay(t,a).next((u=>{u!==null&&r.set(a,u)})))).next((()=>r))}saveOverlays(t,e,r){return r.forEach(((a,u)=>{this.St(t,e,u)})),ot.resolve()}removeOverlaysForBatchId(t,e,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),ot.resolve()}getOverlaysForCollection(t,e,r){const a=Oo(),u=e.length+1,c=new Ct(e.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!e.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>r&&a.set(g.getKey(),g)}return ot.resolve(a)}getOverlaysForCollectionGroup(t,e,r,a){let u=new ze(((y,E)=>y-E));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===e&&y.largestBatchId>r){let E=u.get(y.largestBatchId);E===null&&(E=Oo(),u=u.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const m=Oo(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,E)=>m.set(y,E))),!(m.size()>=a)););return ot.resolve(m)}St(t,e,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new wL(e,r));let u=this.qr.get(e);u===void 0&&(u=ue(),this.qr.set(e,u)),this.qr.set(e,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(){this.sessionToken=Dn.EMPTY_BYTE_STRING}getSessionToken(t){return ot.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,ot.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.Qr=new ln(_n.$r),this.Ur=new ln(_n.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new _n(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach((r=>this.addReference(r,e)))}removeReference(t,e){this.Gr(new _n(t,e))}zr(t,e){t.forEach((r=>this.removeReference(r,e)))}jr(t){const e=new Ct(new Ve([])),r=new _n(e,t),a=new _n(e,t+1),u=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new Ct(new Ve([])),r=new _n(e,t),a=new _n(e,t+1);let u=ue();return this.Ur.forEachInRange([r,a],(c=>{u=u.add(c.key)})),u}containsKey(t){const e=new _n(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class _n{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return Ct.comparator(t.key,e.key)||Zt(t.Yr,e.Yr)}static Kr(t,e){return Zt(t.Yr,e.Yr)||Ct.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new ln(_n.$r)}checkEmpty(t){return ot.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,a){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new AL(u,e,r,a);this.mutationQueue.push(c);for(const m of a)this.Zr=this.Zr.add(new _n(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return ot.resolve(c)}lookupMutationBatch(t,e){return ot.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,a=this.ei(r),u=a<0?0:a;return ot.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ot.resolve(this.mutationQueue.length===0?F9:this.tr-1)}getAllMutationBatches(t){return ot.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new _n(e,0),a=new _n(e,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,a],(c=>{const m=this.Xr(c.Yr);u.push(m)})),ot.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new ln(Zt);return e.forEach((a=>{const u=new _n(a,0),c=new _n(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{r=r.add(m.Yr)}))})),ot.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,a=r.length+1;let u=r;Ct.isDocumentKey(u)||(u=u.child(""));const c=new _n(new Ct(u),0);let m=new ln(Zt);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===a&&(m=m.add(g.Yr)),!0)}),c),ot.resolve(this.ti(m))}ti(t){const e=[];return t.forEach((r=>{const a=this.Xr(r);a!==null&&e.push(a)})),e}removeMutationBatch(t,e){Me(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ot.forEach(e.mutations,(a=>{const u=new _n(a.key,e.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,e){const r=new _n(e,0),a=this.Zr.firstAfterOrEqual(r);return ot.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,ot.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(t){this.ri=t,this.docs=(function(){return new ze(Ct.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,a=this.docs.get(r),u=a?a.size:0,c=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return ot.resolve(r?r.document.mutableCopy():jn.newInvalidDocument(e))}getEntries(t,e){let r=Fa();return e.forEach((a=>{const u=this.docs.get(a);r=r.insert(a,u?u.document.mutableCopy():jn.newInvalidDocument(a))})),ot.resolve(r)}getDocumentsMatchingQuery(t,e,r,a){let u=Fa();const c=e.path,m=new Ct(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:E}}=g.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||L9(k9(E),r)<=0||(a.has(E.key)||_m(e,E))&&(u=u.insert(E.key,E.mutableCopy()))}return ot.resolve(u)}getAllFromCollectionGroup(t,e,r,a){Ut(9500)}ii(t,e){return ot.forEach(this.docs,(r=>e(r)))}newChangeBuffer(t){return new i3(this)}getSize(t){return ot.resolve(this.size)}}class i3 extends XL{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?e.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(r)})),ot.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(t){this.persistence=t,this.si=new Go((e=>fv(e)),dv),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.oi=0,this._i=new vv,this.targetCount=0,this.ai=lu.ur()}forEachTarget(t,e){return this.si.forEach(((r,a)=>e(a))),ot.resolve()}getLastRemoteSnapshotVersion(t){return ot.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ot.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),ot.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),ot.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new lu(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,ot.resolve()}updateTargetData(t,e){return this.Pr(e),ot.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,ot.resolve()}removeTargets(t,e,r){let a=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=e&&r.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),a++)})),ot.waitFor(u).next((()=>a))}getTargetCount(t){return ot.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return ot.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),ot.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const a=this.persistence.referenceDelegate,u=[];return a&&e.forEach((c=>{u.push(a.markPotentiallyOrphaned(t,c))})),ot.waitFor(u)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),ot.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return ot.resolve(r)}containsKey(t,e){return ot.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(t,e){this.ui={},this.overlays={},this.ci=new mm(0),this.li=!1,this.li=!0,this.hi=new e3,this.referenceDelegate=t(this),this.Pi=new s3(this),this.indexManager=new zL,this.remoteDocumentCache=(function(a){return new r3(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new FL(e),this.Ii=new ZL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new t3,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new n3(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){yt("MemoryPersistence","Starting transaction:",t);const a=new a3(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((u=>this.referenceDelegate.di(a).next((()=>u)))).toPromise().then((u=>(a.raiseOnCommittedEvent(),u)))}Ai(t,e){return ot.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,e))))}}class a3 extends $9{constructor(t){super(),this.currentSequenceNumber=t}}class Ev{constructor(t){this.persistence=t,this.Ri=new vv,this.Vi=null}static mi(t){return new Ev(t)}get fi(){if(this.Vi)return this.Vi;throw Ut(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),ot.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),ot.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),ot.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((a=>{a.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ot.forEach(this.fi,(r=>{const a=Ct.fromPath(r);return this.gi(t,a).next((u=>{u||e.removeEntry(a,kt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return ot.or([()=>ot.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Bd{constructor(t,e){this.persistence=t,this.pi=new Go((r=>z9(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=YL(this,e)}static mi(t,e){return new Bd(t,e)}Ei(){}di(t){return ot.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>e.next((a=>r+a))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}pr(t,e){return ot.forEach(this.pi,((r,a)=>this.br(t,r,a).next((u=>u?ot.resolve():e(a)))))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const a=this.persistence.getRemoteDocumentCache(),u=a.newChangeBuffer();return a.ii(t,(c=>this.br(t,c,e).next((m=>{m||(r++,u.removeEntry(c,kt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),ot.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),ot.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),ot.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),ot.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=ud(t.data.value)),e}br(t,e,r){return ot.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const a=this.pi.get(e);return ot.resolve(a!==void 0&&a>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(t,e,r,a){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=a}static As(t,e){let r=ue(),a=ue();for(const u of e.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}return new Tv(t,e.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ak()?8:B9(Gn())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,a){const u={result:null};return this.ys(t,e).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(t,e,a,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new o3;return this.Ss(t,e,c).next((m=>{if(u.result=m,this.Vs)return this.bs(t,e,c,m.size)}))})).next((()=>u.result))}bs(t,e,r,a){return r.documentReadCount<this.fs?(Nl()<=Wt.DEBUG&&yt("QueryEngine","SDK will not create cache indexes for query:",Ol(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ot.resolve()):(Nl()<=Wt.DEBUG&&yt("QueryEngine","Query:",Ol(e),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(Nl()<=Wt.DEBUG&&yt("QueryEngine","The SDK decides to create cache indexes for query:",Ol(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,$i(e))):ot.resolve())}ys(t,e){if(Aw(e))return ot.resolve(null);let r=$i(e);return this.indexManager.getIndexType(t,r).next((a=>a===0?null:(e.limit!==null&&a===1&&(e=i_(e,null,"F"),r=$i(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const c=ue(...u);return this.ps.getDocuments(t,c).next((m=>this.indexManager.getMinOffset(t,r).next((g=>{const y=this.Ds(e,m);return this.Cs(e,y,c,g.readTime)?this.ys(t,i_(e,null,"F")):this.vs(t,y,e,g)}))))})))))}ws(t,e,r,a){return Aw(e)||a.isEqual(kt.min())?ot.resolve(null):this.ps.getDocuments(t,r).next((u=>{const c=this.Ds(e,u);return this.Cs(e,c,r,a)?ot.resolve(null):(Nl()<=Wt.DEBUG&&yt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ol(e)),this.vs(t,c,e,M9(a,lh)).next((m=>m)))}))}Ds(t,e){let r=new ln(Kb(t));return e.forEach(((a,u)=>{_m(t,u)&&(r=r.add(u))})),r}Cs(t,e,r,a){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const u=t.limitType==="F"?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(a)>0)}Ss(t,e,r){return Nl()<=Wt.DEBUG&&yt("QueryEngine","Using full collection scan to execute query:",Ol(e)),this.ps.getDocumentsMatchingQuery(t,e,La.min(),r)}vs(t,e,r,a){return this.ps.getDocumentsMatchingQuery(t,r,a).next((u=>(e.forEach((c=>{u=u.insert(c.key,c)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="LocalStore",u3=3e8;class c3{constructor(t,e,r,a){this.persistence=t,this.Fs=e,this.serializer=a,this.Ms=new ze(Zt),this.xs=new Go((u=>fv(u)),dv),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new JL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function h3(n,t,e,r){return new c3(n,t,e,r)}async function gC(n,t){const e=oe(n);return await e.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return e.mutationQueue.getAllMutationBatches(r).next((u=>(a=u,e.Bs(t),e.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let g=ue();for(const y of a){c.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of u){m.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return e.localDocuments.getDocuments(r,g).next((y=>({Ls:y,removedBatchIds:c,addedBatchIds:m})))}))}))}function yC(n){const t=oe(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function f3(n,t){const e=oe(n),r=t.snapshotVersion;let a=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});a=e.Ms;const m=[];t.targetChanges.forEach(((E,I)=>{const V=a.get(I);if(!V)return;m.push(e.Pi.removeMatchingKeys(u,E.removedDocuments,I).next((()=>e.Pi.addMatchingKeys(u,E.addedDocuments,I))));let M=V.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(I)!==null?M=M.withResumeToken(Dn.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):E.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(E.resumeToken,r)),a=a.insert(I,M),(function(G,U,rt){return G.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=u3?!0:rt.addedDocuments.size+rt.modifiedDocuments.size+rt.removedDocuments.size>0})(V,M,E)&&m.push(e.Pi.updateTargetData(u,M))}));let g=Fa(),y=ue();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(d3(u,c,t.documentUpdates).next((E=>{g=E.ks,y=E.qs}))),!r.isEqual(kt.min())){const E=e.Pi.getLastRemoteSnapshotVersion(u).next((I=>e.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(E)}return ot.waitFor(m).next((()=>c.apply(u))).next((()=>e.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(e.Ms=a,u)))}function d3(n,t,e){let r=ue(),a=ue();return e.forEach((u=>r=r.add(u))),t.getEntries(n,r).next((u=>{let c=Fa();return e.forEach(((m,g)=>{const y=u.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(m)),g.isNoDocument()&&g.version.isEqual(kt.min())?(t.removeEntry(m,g.readTime),c=c.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(g),c=c.insert(m,g)):yt(Av,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{ks:c,qs:a}}))}function m3(n,t){const e=oe(n);return e.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return e.Pi.getTargetData(r,t).next((u=>u?(a=u,ot.resolve(a)):e.Pi.allocateTargetId(r).next((c=>(a=new Aa(t,c,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=e.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r}))}async function c_(n,t,e){const r=oe(n),a=r.Ms.get(t),u=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Au(c))throw c;yt(Av,`Failed to update sequence numbers for target ${t}: ${c}`)}r.Ms=r.Ms.remove(t),r.xs.delete(a.target)}function Mw(n,t,e){const r=oe(n);let a=kt.min(),u=ue();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,y,E){const I=oe(g),V=I.xs.get(E);return V!==void 0?ot.resolve(I.Ms.get(V)):I.Pi.getTargetData(y,E)})(r,c,$i(t)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,t,e?a:kt.min(),e?u:ue()))).next((m=>(p3(r,lL(t),m),{documents:m,Qs:u})))))}function p3(n,t,e){let r=n.Os.get(t)||kt.min();e.forEach(((a,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),n.Os.set(t,r)}class kw{constructor(){this.activeTargetIds=mL()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class g3{constructor(){this.Mo=new kw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new kw,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="ConnectivityMonitor";class Uw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){yt(Lw,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){yt(Lw,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff=null;function h_(){return Ff===null?Ff=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ff++,"0x"+Ff.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="RestConnection",_3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class v3{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===xd?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(t,e,r,a,u){const c=h_(),m=this.zo(t,e.toUriEncodedString());yt(Xg,`Sending RPC '${t}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,a,u);const{host:y}=new URL(m),E=vu(y);return this.Jo(t,m,g,r,E).then((I=>(yt(Xg,`Received RPC '${t}' ${c}: `,I),I)),(I=>{throw iu(Xg,`RPC '${t}' ${c} failed with error: `,I,"url: ",m,"request:",r),I}))}Ho(t,e,r,a,u,c){return this.Go(t,e,r,a,u)}jo(t,e,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Tu})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((a,u)=>t[u]=a)),r&&r.headers.forEach(((a,u)=>t[u]=a))}zo(t,e){const r=_3[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="WebChannelConnection";class T3 extends v3{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,a,u){const c=h_();return new Promise(((m,g)=>{const y=new Ab;y.setWithCredentials(!0),y.listenOnce(wb.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case od.NO_ERROR:const I=y.getResponseJson();yt($n,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(I)),m(I);break;case od.TIMEOUT:yt($n,`RPC '${t}' ${c} timed out`),g(new Et(ft.DEADLINE_EXCEEDED,"Request time out"));break;case od.HTTP_ERROR:const V=y.getStatus();if(yt($n,`RPC '${t}' ${c} failed with status:`,V,"response text:",y.getResponseText()),V>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const B=M?.error;if(B&&B.status&&B.message){const G=(function(rt){const F=rt.toLowerCase().replace(/_/g,"-");return Object.values(ft).indexOf(F)>=0?F:ft.UNKNOWN})(B.status);g(new Et(G,B.message))}else g(new Et(ft.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Et(ft.UNAVAILABLE,"Connection failed."));break;default:Ut(9055,{l_:t,streamId:c,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{yt($n,`RPC '${t}' ${c} completed.`)}}));const E=JSON.stringify(a);yt($n,`RPC '${t}' ${c} sending request:`,a),y.send(e,"POST",E,r,15)}))}T_(t,e,r){const a=h_(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=Rb(),m=Ib(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,e,r),g.encodeInitMessageHeaders=!0;const E=u.join("");yt($n,`Creating RPC '${t}' stream ${a}: ${E}`,g);const I=c.createWebChannel(E,g);this.I_(I);let V=!1,M=!1;const B=new E3({Yo:U=>{M?yt($n,`Not sending because RPC '${t}' stream ${a} is closed:`,U):(V||(yt($n,`Opening RPC '${t}' stream ${a} transport.`),I.open(),V=!0),yt($n,`RPC '${t}' stream ${a} sending:`,U),I.send(U))},Zo:()=>I.close()}),G=(U,rt,F)=>{U.listen(rt,(it=>{try{F(it)}catch(tt){setTimeout((()=>{throw tt}),0)}}))};return G(I,Mc.EventType.OPEN,(()=>{M||(yt($n,`RPC '${t}' stream ${a} transport opened.`),B.o_())})),G(I,Mc.EventType.CLOSE,(()=>{M||(M=!0,yt($n,`RPC '${t}' stream ${a} transport closed`),B.a_(),this.E_(I))})),G(I,Mc.EventType.ERROR,(U=>{M||(M=!0,iu($n,`RPC '${t}' stream ${a} transport errored. Name:`,U.name,"Message:",U.message),B.a_(new Et(ft.UNAVAILABLE,"The operation could not be completed")))})),G(I,Mc.EventType.MESSAGE,(U=>{if(!M){const rt=U.data[0];Me(!!rt,16349);const F=rt,it=F?.error||F[0]?.error;if(it){yt($n,`RPC '${t}' stream ${a} received error:`,it);const tt=it.status;let W=(function(T){const A=Ze[T];if(A!==void 0)return rC(A)})(tt),ct=it.message;W===void 0&&(W=ft.INTERNAL,ct="Unknown error status: "+tt+" with message "+it.message),M=!0,B.a_(new Et(W,ct)),I.close()}else yt($n,`RPC '${t}' stream ${a} received:`,rt),B.u_(rt)}})),G(m,Sb.STAT_EVENT,(U=>{U.stat===Wy.PROXY?yt($n,`RPC '${t}' stream ${a} detected buffering proxy`):U.stat===Wy.NOPROXY&&yt($n,`RPC '${t}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function Wg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(n){return new PL(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(t,e,r=1e3,a=1.5,u=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=a,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,e-r);a>0&&yt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="PersistentStream";class A3{constructor(t,e,r,a,u,c,m,g){this.Mi=t,this.S_=r,this.b_=a,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _C(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===ft.RESOURCE_EXHAUSTED?(Os(e.toString()),Os("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===ft.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===e&&this.G_(r,a)}),(r=>{t((()=>{const a=new Et(ft.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return yt($w,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(yt($w,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class w3 extends A3{constructor(t,e,r,a,u,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,a,c),this.serializer=u}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=OL(this.serializer,t),r=(function(u){if(!("targetChange"in u))return kt.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?kt.min():c.readTime?ql(c.readTime):kt.min()})(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=Pw(this.serializer),e.addTarget=(function(u,c){let m;const g=c.target;if(m=n_(g)?{documents:xL(u,g)}:{query:ML(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=aC(u,c.resumeToken);const y=o_(u,c.expectedCount);y!==null&&(m.expectedCount=y)}else if(c.snapshotVersion.compareTo(kt.min())>0){m.readTime=l_(u,c.snapshotVersion.toTimestamp());const y=o_(u,c.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,t);const r=LL(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=Pw(this.serializer),e.removeTarget=t,this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{}class I3 extends S3{constructor(t,e,r,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Et(ft.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(t,u_(e,r),a,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Et(ft.UNKNOWN,u.toString())}))}Ho(t,e,r,a,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(t,u_(e,r),a,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Et(ft.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class R3{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Os(e),this.aa=!1):yt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu="RemoteStore";class b3{constructor(t,e,r,a,u){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Rh(this)&&(yt(uu,"Restarting streams for network reachability change."),await(async function(g){const y=oe(g);y.Ea.add(4),await Ih(y),y.Ra.set("Unknown"),y.Ea.delete(4),await wm(y)})(this))}))})),this.Ra=new R3(r,a)}}async function wm(n){if(Rh(n))for(const t of n.da)await t(!0)}async function Ih(n){for(const t of n.da)await t(!1)}function vC(n,t){const e=oe(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Rv(e)?Iv(e):Su(e).O_()&&Sv(e,t))}function wv(n,t){const e=oe(n),r=Su(e);e.Ia.delete(t),r.O_()&&EC(e,t),e.Ia.size===0&&(r.O_()?r.L_():Rh(e)&&e.Ra.set("Unknown"))}function Sv(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(kt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Su(n).Y_(t)}function EC(n,t){n.Va.Ue(t),Su(n).Z_(t)}function Iv(n){n.Va=new bL({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Su(n).start(),n.Ra.ua()}function Rv(n){return Rh(n)&&!Su(n).x_()&&n.Ia.size>0}function Rh(n){return oe(n).Ea.size===0}function TC(n){n.Va=void 0}async function C3(n){n.Ra.set("Online")}async function D3(n){n.Ia.forEach(((t,e)=>{Sv(n,t)}))}async function V3(n,t){TC(n),Rv(n)?(n.Ra.ha(t),Iv(n)):n.Ra.set("Unknown")}async function P3(n,t,e){if(n.Ra.set("Online"),t instanceof sC&&t.state===2&&t.cause)try{await(async function(a,u){const c=u.cause;for(const m of u.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,c),a.Ia.delete(m),a.Va.removeTarget(m))})(n,t)}catch(r){yt(uu,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Bw(n,r)}else if(t instanceof hd?n.Va.Ze(t):t instanceof iC?n.Va.st(t):n.Va.tt(t),!e.isEqual(kt.min()))try{const r=await yC(n.localStore);e.compareTo(r)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(y);E&&u.Ia.set(y,E.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,y)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(Dn.EMPTY_BYTE_STRING,E.snapshotVersion)),EC(u,g);const I=new Aa(E.target,g,y,E.sequenceNumber);Sv(u,I)})),u.remoteSyncer.applyRemoteEvent(m)})(n,e)}catch(r){yt(uu,"Failed to raise snapshot:",r),await Bw(n,r)}}async function Bw(n,t,e){if(!Au(t))throw t;n.Ea.add(1),await Ih(n),n.Ra.set("Offline"),e||(e=()=>yC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{yt(uu,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await wm(n)}))}async function Fw(n,t){const e=oe(n);e.asyncQueue.verifyOperationInProgress(),yt(uu,"RemoteStore received new credentials");const r=Rh(e);e.Ea.add(3),await Ih(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await wm(e)}async function N3(n,t){const e=oe(n);t?(e.Ea.delete(2),await wm(e)):t||(e.Ea.add(2),await Ih(e),e.Ra.set("Unknown"))}function Su(n){return n.ma||(n.ma=(function(e,r,a){const u=oe(e);return u.sa(),new w3(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)})(n.datastore,n.asyncQueue,{Xo:C3.bind(null,n),t_:D3.bind(null,n),r_:V3.bind(null,n),H_:P3.bind(null,n)}),n.da.push((async t=>{t?(n.ma.B_(),Rv(n)?Iv(n):n.Ra.set("Unknown")):(await n.ma.stop(),TC(n))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(t,e,r,a,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=a,this.removalCallback=u,this.deferred=new zl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,a,u){const c=Date.now()+r,m=new bv(t,e,c,a,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Et(ft.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function AC(n,t){if(Os("AsyncQueue",`${t}: ${n}`),Au(n))return new Et(ft.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{static emptySet(t){return new Hl(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||Ct.comparator(e.key,r.key):(e,r)=>Ct.comparator(e.key,r.key),this.keyedMap=kc(),this.sortedSet=new ze(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,r)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Hl)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,u=r.getNext().key;if(!a.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new Hl;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(){this.ga=new ze(Ct.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):Ut(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,r)=>{t.push(r)})),t}}class cu{constructor(t,e,r,a,u,c,m,g,y){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,e,r,a,u){const c=[];return e.forEach((m=>{c.push({type:0,doc:m})})),new cu(t,e,Hl.emptySet(e),c,r,a,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ym(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==r[a].type||!e[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class x3{constructor(){this.queries=zw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const a=oe(e),u=a.queries;a.queries=zw(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new Et(ft.ABORTED,"Firestore shutting down"))}}function zw(){return new Go((n=>Qb(n)),ym)}async function M3(n,t){const e=oe(n);let r=3;const a=t.query;let u=e.queries.get(a);u?!u.ba()&&t.Da()&&(r=2):(u=new O3,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await e.onListen(a,!0);break;case 1:u.wa=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(c){const m=AC(c,`Initialization of query '${Ol(t.query)}' failed`);return void t.onError(m)}e.queries.set(a,u),u.Sa.push(t),t.va(e.onlineState),u.wa&&t.Fa(u.wa)&&Cv(e)}async function k3(n,t){const e=oe(n),r=t.query;let a=3;const u=e.queries.get(r);if(u){const c=u.Sa.indexOf(t);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?a=t.Da()?0:1:!u.ba()&&t.Da()&&(a=2))}switch(a){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function L3(n,t){const e=oe(n);let r=!1;for(const a of t){const u=a.query,c=e.queries.get(u);if(c){for(const m of c.Sa)m.Fa(a)&&(r=!0);c.wa=a}}r&&Cv(e)}function U3(n,t,e){const r=oe(n),a=r.queries.get(t);if(a)for(const u of a.Sa)u.onError(e);r.queries.delete(t)}function Cv(n){n.Ca.forEach((t=>{t.next()}))}var f_,qw;(qw=f_||(f_={})).Ma="default",qw.Cache="cache";class $3{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const a of t.docChanges)a.type!==3&&r.push(a);t=new cu(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=cu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==f_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(t){this.key=t}}class SC{constructor(t){this.key=t}}class B3{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ue(),this.mutatedKeys=ue(),this.eu=Kb(t),this.tu=new Hl(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new jw,a=e?e.tu:this.tu;let u=e?e.mutatedKeys:this.mutatedKeys,c=a,m=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal(((E,I)=>{const V=a.get(E),M=_m(this.query,I)?I:null,B=!!V&&this.mutatedKeys.has(V.key),G=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let U=!1;V&&M?V.data.isEqual(M.data)?B!==G&&(r.track({type:3,doc:M}),U=!0):this.su(V,M)||(r.track({type:2,doc:M}),U=!0,(g&&this.eu(M,g)>0||y&&this.eu(M,y)<0)&&(m=!0)):!V&&M?(r.track({type:0,doc:M}),U=!0):V&&!M&&(r.track({type:1,doc:V}),U=!0,(g||y)&&(m=!0)),U&&(M?(c=c.add(M),u=G?u.add(E):u.delete(E)):(c=c.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:c,iu:r,Cs:m,mutatedKeys:u}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,a){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((E,I)=>(function(M,B){const G=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ut(20277,{Rt:U})}};return G(M)-G(B)})(E.type,I.type)||this.eu(E.doc,I.doc))),this.ou(r),a=a??!1;const m=e&&!a?this._u():[],g=this.Xa.size===0&&this.current&&!a?1:0,y=g!==this.Za;return this.Za=g,c.length!==0||y?{snapshot:new cu(this.query,t.tu,u,c,t.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ue(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const e=[];return t.forEach((r=>{this.Xa.has(r)||e.push(new SC(r))})),this.Xa.forEach((r=>{t.has(r)||e.push(new wC(r))})),e}cu(t){this.Ya=t.Qs,this.Xa=ue();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return cu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Dv="SyncEngine";class F3{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class j3{constructor(t){this.key=t,this.hu=!1}}class z3{constructor(t,e,r,a,u,c){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=a,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Go((m=>Qb(m)),ym),this.Iu=new Map,this.Eu=new Set,this.du=new ze(Ct.comparator),this.Au=new Map,this.Ru=new vv,this.Vu={},this.mu=new Map,this.fu=lu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function q3(n,t,e=!0){const r=DC(n);let a;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),a=u.view.lu()):a=await IC(r,t,e,!0),a}async function H3(n,t){const e=DC(n);await IC(e,t,!0,!1)}async function IC(n,t,e,r){const a=await m3(n.localStore,$i(t)),u=a.targetId,c=n.sharedClientState.addLocalQueryTarget(u,e);let m;return r&&(m=await G3(n,t,u,c==="current",a.resumeToken)),n.isPrimaryClient&&e&&vC(n.remoteStore,a),m}async function G3(n,t,e,r,a){n.pu=(I,V,M)=>(async function(G,U,rt,F){let it=U.view.ru(rt);it.Cs&&(it=await Mw(G.localStore,U.query,!1).then((({documents:R})=>U.view.ru(R,it))));const tt=F&&F.targetChanges.get(U.targetId),W=F&&F.targetMismatches.get(U.targetId)!=null,ct=U.view.applyChanges(it,G.isPrimaryClient,tt,W);return Gw(G,U.targetId,ct.au),ct.snapshot})(n,I,V,M);const u=await Mw(n.localStore,t,!0),c=new B3(t,u.Qs),m=c.ru(u.documents),g=Sh.createSynthesizedTargetChangeForCurrentChange(e,r&&n.onlineState!=="Offline",a),y=c.applyChanges(m,n.isPrimaryClient,g);Gw(n,e,y.au);const E=new F3(t,e,c);return n.Tu.set(t,E),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),y.snapshot}async function Q3(n,t,e){const r=oe(n),a=r.Tu.get(t),u=r.Iu.get(a.targetId);if(u.length>1)return r.Iu.set(a.targetId,u.filter((c=>!ym(c,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await c_(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),e&&wv(r.remoteStore,a.targetId),d_(r,a.targetId)})).catch(dm)):(d_(r,a.targetId),await c_(r.localStore,a.targetId,!0))}async function K3(n,t){const e=oe(n),r=e.Tu.get(t),a=e.Iu.get(r.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),wv(e.remoteStore,r.targetId))}async function RC(n,t){const e=oe(n);try{const r=await f3(e.localStore,t);t.targetChanges.forEach(((a,u)=>{const c=e.Au.get(u);c&&(Me(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Me(c.hu,14607):a.removedDocuments.size>0&&(Me(c.hu,42227),c.hu=!1))})),await CC(e,r,t)}catch(r){await dm(r)}}function Hw(n,t,e){const r=oe(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const a=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(t);m.snapshot&&a.push(m.snapshot)})),(function(c,m){const g=oe(c);g.onlineState=m;let y=!1;g.queries.forEach(((E,I)=>{for(const V of I.Sa)V.va(m)&&(y=!0)})),y&&Cv(g)})(r.eventManager,t),a.length&&r.Pu.H_(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Y3(n,t,e){const r=oe(n);r.sharedClientState.updateQueryState(t,"rejected",e);const a=r.Au.get(t),u=a&&a.key;if(u){let c=new ze(Ct.comparator);c=c.insert(u,jn.newNoDocument(u,kt.min()));const m=ue().add(u),g=new Tm(kt.min(),new Map,new ze(Zt),c,m);await RC(r,g),r.du=r.du.remove(u),r.Au.delete(t),Vv(r)}else await c_(r.localStore,t,!1).then((()=>d_(r,t,e))).catch(dm)}function d_(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Iu.get(t))n.Tu.delete(r),e&&n.Pu.yu(r,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach((r=>{n.Ru.containsKey(r)||bC(n,r)}))}function bC(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(wv(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),Vv(n))}function Gw(n,t,e){for(const r of e)r instanceof wC?(n.Ru.addReference(r.key,t),X3(n,r)):r instanceof SC?(yt(Dv,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,t),n.Ru.containsKey(r.key)||bC(n,r.key)):Ut(19791,{wu:r})}function X3(n,t){const e=t.key,r=e.path.canonicalString();n.du.get(e)||n.Eu.has(r)||(yt(Dv,"New document in limbo: "+e),n.Eu.add(r),Vv(n))}function Vv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new Ct(Ve.fromString(t)),r=n.fu.next();n.Au.set(r,new j3(e)),n.du=n.du.insert(e,r),vC(n.remoteStore,new Aa($i(mv(e.path)),r,"TargetPurposeLimboResolution",mm.ce))}}async function CC(n,t,e){const r=oe(n),a=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,t,e).then((y=>{if((y||e)&&r.isPrimaryClient){const E=y?!y.fromCache:e?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(y){a.push(y);const E=Tv.As(g.targetId,y);u.push(E)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(g,y){const E=oe(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>ot.forEach(y,(V=>ot.forEach(V.Es,(M=>E.persistence.referenceDelegate.addReference(I,V.targetId,M))).next((()=>ot.forEach(V.ds,(M=>E.persistence.referenceDelegate.removeReference(I,V.targetId,M)))))))))}catch(I){if(!Au(I))throw I;yt(Av,"Failed to update sequence numbers: "+I)}for(const I of y){const V=I.targetId;if(!I.fromCache){const M=E.Ms.get(V),B=M.snapshotVersion,G=M.withLastLimboFreeSnapshotVersion(B);E.Ms=E.Ms.insert(V,G)}}})(r.localStore,u))}async function W3(n,t){const e=oe(n);if(!e.currentUser.isEqual(t)){yt(Dv,"User change. New user:",t.toKey());const r=await gC(e.localStore,t);e.currentUser=t,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new Et(ft.CANCELLED,c))}))})),u.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await CC(e,r.Ls)}}function J3(n,t){const e=oe(n),r=e.Au.get(t);if(r&&r.hu)return ue().add(r.key);{let a=ue();const u=e.Iu.get(t);if(!u)return a;for(const c of u){const m=e.Tu.get(c);a=a.unionWith(m.view.nu)}return a}}function DC(n){const t=oe(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=RC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=J3.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Y3.bind(null,t),t.Pu.H_=L3.bind(null,t.eventManager),t.Pu.yu=U3.bind(null,t.eventManager),t}class Fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Am(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return h3(this.persistence,new l3,t.initialUser,this.serializer)}Cu(t){return new pC(Ev.mi,this.serializer)}Du(t){return new g3}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fd.provider={build:()=>new Fd};class Z3 extends Fd{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Me(this.persistence.referenceDelegate instanceof Bd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new QL(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?fr.withCacheSize(this.cacheSizeBytes):fr.DEFAULT;return new pC((r=>Bd.mi(r,e)),this.serializer)}}class m_{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=W3.bind(null,this.syncEngine),await N3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new x3})()}createDatastore(t){const e=Am(t.databaseInfo.databaseId),r=(function(u){return new T3(u)})(t.databaseInfo);return(function(u,c,m,g){return new I3(u,c,m,g)})(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return(function(r,a,u,c,m){return new b3(r,a,u,c,m)})(this.localStore,this.datastore,t.asyncQueue,(e=>Hw(this.syncEngine,e,0)),(function(){return Uw.v()?new Uw:new y3})())}createSyncEngine(t,e){return(function(a,u,c,m,g,y,E){const I=new z3(a,u,c,m,g,y);return E&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const r=oe(e);yt(uu,"RemoteStore shutting down."),r.Ea.add(5),await Ih(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}m_.provider={build:()=>new m_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Os("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="FirestoreClient";class eU{constructor(t,e,r,a,u){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=a,this.user=Fn.UNAUTHENTICATED,this.clientId=Db.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{yt(ja,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(yt(ja,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new zl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=AC(e,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function Jg(n,t){n.asyncQueue.verifyOperationInProgress(),yt(ja,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await gC(t.localStore,a),r=a)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function Qw(n,t){n.asyncQueue.verifyOperationInProgress();const e=await nU(n);yt(ja,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((r=>Fw(t.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>Fw(t.remoteStore,a))),n._onlineComponents=t}async function nU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){yt(ja,"Using user provided OfflineComponentProvider");try{await Jg(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(a){return a.name==="FirebaseError"?a.code===ft.FAILED_PRECONDITION||a.code===ft.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(e))throw e;iu("Error using user provided cache. Falling back to memory cache: "+e),await Jg(n,new Fd)}}else yt(ja,"Using default OfflineComponentProvider"),await Jg(n,new Z3(void 0));return n._offlineComponents}async function rU(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(yt(ja,"Using user provided OnlineComponentProvider"),await Qw(n,n._uninitializedComponentsProvider._online)):(yt(ja,"Using default OnlineComponentProvider"),await Qw(n,new m_))),n._onlineComponents}async function Kw(n){const t=await rU(n),e=t.eventManager;return e.onListen=q3.bind(null,t.syncEngine),e.onUnlisten=Q3.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=H3.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=K3.bind(null,t.syncEngine),e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="firestore.googleapis.com",Xw=!0;class Ww{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Et(ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PC,this.ssl=Xw}else this.host=t.host,this.ssl=t.ssl??Xw;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=mC;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<HL)throw new Et(ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}x9("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VC(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Et(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Et(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Et(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Pv{constructor(t,e,r,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ww({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Et(ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Et(ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ww(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new S9;switch(r.type){case"firstParty":return new C9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Et(ft.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const r=Yw.get(e);r&&(yt("ComponentProvider","Removing Datastore"),Yw.delete(e),r.terminate())})(this),Promise.resolve()}}function iU(n,t,e,r={}){n=ld(n,Pv);const a=vu(t),u=n._getSettings(),c={...u,emulatorOptions:n._getEmulatorOptions()},m=`${t}:${e}`;a&&(db(`https://${m}`),mb("Firestore",!0)),u.host!==PC&&u.host!==m&&iu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:a,emulatorOptions:r};if(!Bo(g,c)&&(n._setSettings(g),r.mockUserToken)){let y,E;if(typeof r.mockUserToken=="string")y=r.mockUserToken,E=Fn.MOCK_USER;else{y=W6(r.mockUserToken,n._app?.options.projectId);const I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new Et(ft.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Fn(I)}n._authCredentials=new I9(new Cb(y,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Iu(this.firestore,t,this._query)}}class qn{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gl(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new qn(this.firestore,t,this._key)}toJSON(){return{type:qn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(Ah(e,qn._jsonSchema))return new qn(t,r||null,new Ct(Ve.fromString(e.referencePath)))}}qn._jsonSchemaVersion="firestore/documentReference/1.0",qn._jsonSchema={type:rn("string",qn._jsonSchemaVersion),referencePath:rn("string")};class Gl extends Iu{constructor(t,e,r){super(t,e,mv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new qn(this.firestore,null,new Ct(t))}withConverter(t){return new Gl(this.firestore,t,this._path)}}function Zg(n,t,...e){if(n=mi(n),n instanceof Pv){const r=Ve.fromString(t,...e);return lw(r),new Gl(n,null,r)}{if(!(n instanceof qn||n instanceof Gl))throw new Et(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ve.fromString(t,...e));return lw(r),new Gl(n.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="AsyncQueue";class Zw{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _C(this,"async_queue_retry"),this._c=()=>{const r=Wg();r&&yt(Jw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=Wg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Wg();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new zl;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Au(t))throw t;yt(Jw,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Os("INTERNAL UNHANDLED ERROR: ",tS(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const a=bv.createAndSchedule(this,t,e,r,(u=>this.hc(u)));return this.tc.push(a),a}uc(){this.nc&&Ut(47125,{Pc:tS(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,r)=>e.targetTimeMs-r.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function tS(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(n){return(function(e,r){if(typeof e!="object"||e===null)return!1;const a=e;for(const u of r)if(u in a&&typeof a[u]=="function")return!0;return!1})(n,["next","error","complete"])}class p_ extends Pv{constructor(t,e,r,a){super(t,e,r,a),this.type="firestore",this._queue=new Zw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Zw(t),this._firestoreClient=void 0,await t}}}function sU(n,t){const e=typeof n=="object"?n:_b(),r=typeof n=="string"?n:xd,a=lv(e,"firestore").getImmediate({identifier:r});if(!a._initialized){const u=Y6("firestore");u&&iU(a,...u)}return a}function aU(n){if(n._terminated)throw new Et(ft.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||oU(n),n._firestoreClient}function oU(n){const t=n._freezeSettings(),e=(function(a,u,c,m){return new G9(a,u,c,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,VC(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new eU(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Gr(Dn.fromBase64String(t))}catch(e){throw new Et(ft.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Gr(Dn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Gr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ah(t,Gr._jsonSchema))return Gr.fromBase64String(t.bytes)}}Gr._jsonSchemaVersion="firestore/bytes/1.0",Gr._jsonSchema={type:rn("string",Gr._jsonSchemaVersion),bytes:rn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Et(ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Et(ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Et(ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Zt(this._lat,t._lat)||Zt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bi._jsonSchemaVersion}}static fromJSON(t){if(Ah(t,Bi._jsonSchema))return new Bi(t.latitude,t.longitude)}}Bi._jsonSchemaVersion="firestore/geoPoint/1.0",Bi._jsonSchema={type:rn("string",Bi._jsonSchemaVersion),latitude:rn("number"),longitude:rn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,a){if(r.length!==a.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==a[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Fi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ah(t,Fi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Fi(t.vectorValues);throw new Et(ft.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fi._jsonSchemaVersion="firestore/vectorValue/1.0",Fi._jsonSchema={type:rn("string",Fi._jsonSchemaVersion),vectorValues:rn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU=/^__.*__$/;function xC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ut(40011,{Ac:n})}}class Nv{constructor(t,e,r,a,u,c){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=a,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Nv({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return g_(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(xC(this.Ac)&&lU.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class uU{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||Am(t)}Cc(t,e,r,a=!1){return new Nv({Ac:t,methodName:e,Dc:r,path:zn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cU(n){const t=n._freezeSettings(),e=Am(n._databaseId);return new uU(n._databaseId,!!t.ignoreUndefinedProperties,e)}function hU(n,t,e,r=!1){return Ov(e,n.Cc(r?4:3,t))}function Ov(n,t){if(MC(n=mi(n)))return dU("Unsupported field value:",t,n),fU(n,t);if(n instanceof OC)return(function(r,a){if(!xC(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(a);u&&a.fieldTransforms.push(u)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,a){const u=[];let c=0;for(const m of r){let g=Ov(m,a.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(n,t)}return(function(r,a){if((r=mi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pL(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Pe.fromDate(r);return{timestampValue:l_(a.serializer,u)}}if(r instanceof Pe){const u=new Pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:l_(a.serializer,u)}}if(r instanceof Bi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gr)return{bytesValue:aC(a.serializer,r._byteString)};if(r instanceof qn){const u=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:oC(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Fi)return(function(c,m){return{mapValue:{fields:{[Ub]:{stringValue:$b},[Md]:{arrayValue:{values:c.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return pv(m.serializer,y)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${fm(r)}`)})(n,t)}function fU(n,t){const e={};return Nb(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):wu(n,((r,a)=>{const u=Ov(a,t.mc(r));u!=null&&(e[r]=u)})),{mapValue:{fields:e}}}function MC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Pe||n instanceof Bi||n instanceof Gr||n instanceof qn||n instanceof OC||n instanceof Fi)}function dU(n,t,e){if(!MC(e)||!Vb(e)){const r=fm(e);throw r==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+r)}}const mU=new RegExp("[~\\*/\\[\\]]");function pU(n,t,e){if(t.search(mU)>=0)throw g_(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new NC(...t.split("."))._internalPath}catch{throw g_(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function g_(n,t,e,r,a){const u=r&&!r.isEmpty(),c=a!==void 0;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${r}`),c&&(g+=` in document ${a}`),g+=")"),new Et(ft.INVALID_ARGUMENT,m+n+g)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t,e,r,a,u){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=a,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new gU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(xv("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class gU extends kC{data(){return super.data()}}function xv(n,t){return typeof t=="string"?pU(n,t):t instanceof NC?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Et(ft.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mv{}class _U extends Mv{}function nS(n,t,...e){let r=[];t instanceof Mv&&r.push(t),r=r.concat(e),(function(u){const c=u.filter((g=>g instanceof kv)).length,m=u.filter((g=>g instanceof Sm)).length;if(c>1||c>0&&m>0)throw new Et(ft.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class Sm extends _U{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new Sm(t,e,r)}_apply(t){const e=this._parse(t);return LC(t._query,e),new Iu(t.firestore,t.converter,r_(t._query,e))}_parse(t){const e=cU(t.firestore);return(function(u,c,m,g,y,E,I){let V;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new Et(ft.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){iS(I,E);const B=[];for(const G of I)B.push(rS(g,u,G));V={arrayValue:{values:B}}}else V=rS(g,u,I)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||iS(I,E),V=hU(m,c,I,E==="in"||E==="not-in");return en.create(y,E,V)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function ty(n,t,e){const r=t,a=xv("where",n);return Sm._create(a,r,e)}class kv extends Mv{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new kv(t,e)}_parse(t){const e=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return e.length===1?e[0]:pi.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(a,u){let c=a;const m=u.getFlattenedFilters();for(const g of m)LC(c,g),c=r_(c,g)})(t._query,e),new Iu(t.firestore,t.converter,r_(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function rS(n,t,e){if(typeof(e=mi(e))=="string"){if(e==="")throw new Et(ft.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gb(t)&&e.indexOf("/")!==-1)throw new Et(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(Ve.fromString(e));if(!Ct.isDocumentKey(r))throw new Et(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gw(n,new Ct(r))}if(e instanceof qn)return gw(n,e._key);throw new Et(ft.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fm(e)}.`)}function iS(n,t){if(!Array.isArray(n)||n.length===0)throw new Et(ft.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function LC(n,t){const e=(function(a,u){for(const c of a)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new Et(ft.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Et(ft.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class vU{convertValue(t,e="none"){switch(Ba(t)){case 0:return null;case 1:return t.booleanValue;case 2:return je(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes($a(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Ut(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return wu(t,((a,u)=>{r[a]=this.convertValue(u,e)})),r}convertVectorValue(t){const e=t.fields?.[Md].arrayValue?.values?.map((r=>je(r.doubleValue)));return new Fi(e)}convertGeoPoint(t){return new Bi(je(t.latitude),je(t.longitude))}convertArray(t,e){return(t.values||[]).map((r=>this.convertValue(r,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const r=gm(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(uh(t));default:return null}}convertTimestamp(t){const e=Ua(t);return new Pe(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Ve.fromString(t);Me(dC(r),9688,{name:t});const a=new ch(r.get(1),r.get(3)),u=new Ct(r.popFirst(5));return a.isEqual(e)||Os(`Document ${u} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),u}}class Uc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Mo extends kC{constructor(t,e,r,a,u,c){super(t,e,r,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new fd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(xv("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Et(ft.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Mo._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Mo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mo._jsonSchema={type:rn("string",Mo._jsonSchemaVersion),bundleSource:rn("string","DocumentSnapshot"),bundleName:rn("string"),bundle:rn("string")};class fd extends Mo{data(t={}){return super.data(t)}}class Ql{constructor(t,e,r,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new Uc(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((r=>{t.call(e,new fd(this._firestore,this._userDataWriter,r.key,r,new Uc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Et(ft.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(a,u){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((m=>{const g=new fd(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Uc(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new fd(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Uc(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,E=-1;return m.type!==0&&(y=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),E=c.indexOf(m.doc.key)),{type:EU(m.type),doc:g,oldIndex:y,newIndex:E}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Et(ft.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ql._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Db.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],a=[];return this.docs.forEach((u=>{u._document!==null&&(e.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),a.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function EU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ut(61501,{type:n})}}Ql._jsonSchemaVersion="firestore/querySnapshot/1.0",Ql._jsonSchema={type:rn("string",Ql._jsonSchemaVersion),bundleSource:rn("string","QuerySnapshot"),bundleName:rn("string"),bundle:rn("string")};class UC extends vU{constructor(t){super(),this.firestore=t}convertBytes(t){return new Gr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new qn(this.firestore,null,e)}}function ey(n,...t){n=mi(n);let e={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||eS(t[r])||(e=t[r++]);const a={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(eS(t[r])){const g=t[r];t[r]=g.next?.bind(g),t[r+1]=g.error?.bind(g),t[r+2]=g.complete?.bind(g)}let u,c,m;if(n instanceof qn)c=ld(n.firestore,p_),m=mv(n._key.path),u={next:g=>{t[r]&&t[r](TU(c,n,g))},error:t[r+1],complete:t[r+2]};else{const g=ld(n,Iu);c=ld(g.firestore,p_),m=g._query;const y=new UC(c);u={next:E=>{t[r]&&t[r](new Ql(c,y,g,E))},error:t[r+1],complete:t[r+2]},yU(n._query)}return(function(y,E,I,V){const M=new tU(V),B=new $3(E,M,I);return y.asyncQueue.enqueueAndForget((async()=>M3(await Kw(y),B))),()=>{M.Nu(),y.asyncQueue.enqueueAndForget((async()=>k3(await Kw(y),B)))}})(aU(c),m,a,u)}function TU(n,t,e){const r=e.docs.get(t._key),a=new UC(n);return new Mo(n,a,t._key,r,new Uc(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(a){Tu=a})(Eu),ru(new Fo("firestore",((r,{instanceIdentifier:a,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new p_(new R9(r.getProvider("auth-internal")),new D9(c,r.getProvider("app-check-internal")),(function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Et(ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ch(y.options.projectId,E)})(c,a),c);return u={useFetchStreams:e,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Da(iw,sw,t),Da(iw,sw,"esm2020")})();var AU="firebase",wU="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Da(AU,wU,"app");function $C(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SU=$C,BC=new Eh("auth","Firebase",$C());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=new av("@firebase/auth");function IU(n,...t){jd.logLevel<=Wt.WARN&&jd.warn(`Auth (${Eu}): ${n}`,...t)}function dd(n,...t){jd.logLevel<=Wt.ERROR&&jd.error(`Auth (${Eu}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(n,...t){throw Lv(n,...t)}function ji(n,...t){return Lv(n,...t)}function FC(n,t,e){const r={...SU(),[t]:e};return new Eh("auth","Firebase",r).create(t,{appName:n.name})}function ko(n){return FC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lv(n,...t){if(typeof n!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(e,...r)}return BC.create(n,...t)}function Nt(n,t,...e){if(!n)throw Lv(t,...e)}function ws(n){const t="INTERNAL ASSERTION FAILED: "+n;throw dd(t),new Error(t)}function Ms(n,t){n||ws(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(){return typeof self<"u"&&self.location?.href||""}function RU(){return sS()==="http:"||sS()==="https:"}function sS(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RU()||rk()||"connection"in navigator)?navigator.onLine:!0}function CU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(t,e){this.shortDelay=t,this.longDelay=e,Ms(e>t,"Short delay should be less than long delay!"),this.isMobile=tk()||ik()}get(){return bU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(n,t){Ms(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PU=new bh(3e4,6e4);function $v(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function Ru(n,t,e,r,a={}){return zC(n,a,async()=>{let u={},c={};r&&(t==="GET"?c=r:u={body:JSON.stringify(r)});const m=Th({key:n.config.apiKey,...c}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const y={method:t,headers:g,...u};return nk()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&vu(n.emulatorConfig.host)&&(y.credentials="include"),jC.fetch()(await qC(n,n.config.apiHost,e,m),y)})}async function zC(n,t,e){n._canInitEmulator=!1;const r={...DU,...t};try{const a=new OU(n),u=await Promise.race([e(),a.promise]);a.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw jf(n,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw jf(n,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw jf(n,"email-already-in-use",c);if(g==="USER_DISABLED")throw jf(n,"user-disabled",c);const E=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw FC(n,E,y);xs(n,E)}}catch(a){if(a instanceof Ls)throw a;xs(n,"network-request-failed",{message:String(a)})}}async function NU(n,t,e,r,a={}){const u=await Ru(n,t,e,r,a);return"mfaPendingCredential"in u&&xs(n,"multi-factor-auth-required",{_serverResponse:u}),u}async function qC(n,t,e,r){const a=`${t}${e}?${r}`,u=n,c=u.config.emulator?Uv(n.config,a):`${n.config.apiScheme}://${a}`;return VU.includes(e)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}class OU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(ji(this.auth,"network-request-failed")),PU.get())})}}function jf(n,t,e){const r={appName:n.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const a=ji(n,t,r);return a.customData._tokenResponse=e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xU(n,t){return Ru(n,"POST","/v1/accounts:delete",t)}async function zd(n,t){return Ru(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function MU(n,t=!1){const e=mi(n),r=await e.getIdToken(t),a=Bv(r);Nt(a&&a.exp&&a.auth_time&&a.iat,e.auth,"internal-error");const u=typeof a.firebase=="object"?a.firebase:void 0,c=u?.sign_in_provider;return{claims:a,token:r,authTime:th(ny(a.auth_time)),issuedAtTime:th(ny(a.iat)),expirationTime:th(ny(a.exp)),signInProvider:c||null,signInSecondFactor:u?.sign_in_second_factor||null}}function ny(n){return Number(n)*1e3}function Bv(n){const[t,e,r]=n.split(".");if(t===void 0||e===void 0||r===void 0)return dd("JWT malformed, contained fewer than 3 sections"),null;try{const a=ub(e);return a?JSON.parse(a):(dd("Failed to decode base64 JWT payload"),null)}catch(a){return dd("Caught error parsing JWT payload as JSON",a?.toString()),null}}function aS(n){const t=Bv(n);return Nt(t,"internal-error"),Nt(typeof t.exp<"u","internal-error"),Nt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fh(n,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof Ls&&kU(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function kU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=th(this.lastLoginAt),this.creationTime=th(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qd(n){const t=n.auth,e=await n.getIdToken(),r=await fh(n,zd(t,{idToken:e}));Nt(r?.users.length,t,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const u=a.providerUserInfo?.length?HC(a.providerUserInfo):[],c=$U(n.providerData,u),m=n.isAnonymous,g=!(n.email&&a.passwordHash)&&!c?.length,y=m?g:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new __(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(n,E)}async function UU(n){const t=mi(n);await qd(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function $U(n,t){return[...n.filter(r=>!t.some(a=>a.providerId===r.providerId)),...t]}function HC(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BU(n,t){const e=await zC(n,{},async()=>{const r=Th({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:u}=n.config,c=await qC(n,a,"/v1/token",`key=${u}`),m=await n._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return n.emulatorConfig&&vu(n.emulatorConfig.host)&&(g.credentials="include"),jC.fetch()(c,g)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function FU(n,t){return Ru(n,"POST","/v2/accounts:revokeToken",$v(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Nt(t.idToken,"internal-error"),Nt(typeof t.idToken<"u","internal-error"),Nt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):aS(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Nt(t.length!==0,"internal-error");const e=aS(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Nt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:a,expiresIn:u}=await BU(t,e);this.updateTokensAndExpiration(r,a,Number(u))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:a,expirationTime:u}=e,c=new Kl;return r&&(Nt(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),a&&(Nt(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),u&&(Nt(typeof u=="number","internal-error",{appName:t}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Kl,this.toJSON())}_performRefresh(){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(n,t){Nt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class fi{constructor({uid:t,auth:e,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new LU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new __(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const e=await fh(this,this.stsTokenManager.getToken(this.auth,t));return Nt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return MU(this,t)}reload(){return UU(this)}_assign(t){this!==t&&(Nt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new fi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await qd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xi(this.auth.app))return Promise.reject(ko(this.auth));const t=await this.getIdToken();return await fh(this,xU(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const r=e.displayName??void 0,a=e.email??void 0,u=e.phoneNumber??void 0,c=e.photoURL??void 0,m=e.tenantId??void 0,g=e._redirectEventId??void 0,y=e.createdAt??void 0,E=e.lastLoginAt??void 0,{uid:I,emailVerified:V,isAnonymous:M,providerData:B,stsTokenManager:G}=e;Nt(I&&G,t,"internal-error");const U=Kl.fromJSON(this.name,G);Nt(typeof I=="string",t,"internal-error"),pa(r,t.name),pa(a,t.name),Nt(typeof V=="boolean",t,"internal-error"),Nt(typeof M=="boolean",t,"internal-error"),pa(u,t.name),pa(c,t.name),pa(m,t.name),pa(g,t.name),pa(y,t.name),pa(E,t.name);const rt=new fi({uid:I,auth:t,email:a,emailVerified:V,displayName:r,isAnonymous:M,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:U,createdAt:y,lastLoginAt:E});return B&&Array.isArray(B)&&(rt.providerData=B.map(F=>({...F}))),g&&(rt._redirectEventId=g),rt}static async _fromIdTokenResponse(t,e,r=!1){const a=new Kl;a.updateFromServerResponse(e);const u=new fi({uid:e.localId,auth:t,stsTokenManager:a,isAnonymous:r});return await qd(u),u}static async _fromGetAccountInfoResponse(t,e,r){const a=e.users[0];Nt(a.localId!==void 0,"internal-error");const u=a.providerUserInfo!==void 0?HC(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!u?.length,m=new Kl;m.updateFromIdToken(r);const g=new fi({uid:a.localId,auth:t,stsTokenManager:m,isAnonymous:c}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new __(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!u?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=new Map;function Ss(n){Ms(n instanceof Function,"Expected a class definition");let t=oS.get(n);return t?(Ms(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,oS.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}GC.type="NONE";const lS=GC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(n,t,e){return`firebase:${n}:${t}:${e}`}class Yl{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:a,name:u}=this.auth;this.fullUserKey=md(this.userKey,a.apiKey,u),this.fullPersistenceKey=md("persistence",a.apiKey,u),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await zd(this.auth,{idToken:t}).catch(()=>{});return e?fi._fromGetAccountInfoResponse(this.auth,e,t):null}return fi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new Yl(Ss(lS),t,r);const a=(await Promise.all(e.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=a[0]||Ss(lS);const c=md(r,t.config.apiKey,t.name);let m=null;for(const y of e)try{const E=await y._get(c);if(E){let I;if(typeof E=="string"){const V=await zd(t,{idToken:E}).catch(()=>{});if(!V)break;I=await fi._fromGetAccountInfoResponse(t,V,E)}else I=fi._fromJSON(t,E);y!==u&&(m=I),u=y;break}}catch{}const g=a.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Yl(u,t,r):(u=g[0],m&&await u._set(c,m.toJSON()),await Promise.all(e.map(async y=>{if(y!==u)try{await y._remove(c)}catch{}})),new Yl(u,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(XC(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(QC(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(JC(t))return"Blackberry";if(ZC(t))return"Webos";if(KC(t))return"Safari";if((t.includes("chrome/")||YC(t))&&!t.includes("edge/"))return"Chrome";if(WC(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(e);if(r?.length===2)return r[1]}return"Other"}function QC(n=Gn()){return/firefox\//i.test(n)}function KC(n=Gn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function YC(n=Gn()){return/crios\//i.test(n)}function XC(n=Gn()){return/iemobile/i.test(n)}function WC(n=Gn()){return/android/i.test(n)}function JC(n=Gn()){return/blackberry/i.test(n)}function ZC(n=Gn()){return/webos/i.test(n)}function Fv(n=Gn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function jU(n=Gn()){return Fv(n)&&!!window.navigator?.standalone}function zU(){return sk()&&document.documentMode===10}function t2(n=Gn()){return Fv(n)||WC(n)||ZC(n)||JC(n)||/windows phone/i.test(n)||XC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(n,t=[]){let e;switch(n){case"Browser":e=uS(Gn());break;case"Worker":e=`${uS(Gn())}-${n}`;break;default:e=n}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Eu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=u=>new Promise((c,m)=>{try{const g=t(u);c(g)}catch(g){m(g)}});r.onAbort=e,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const a of e)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HU(n,t={}){return Ru(n,"GET","/v2/passwordPolicy",$v(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU=6;class QU{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??GU,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),a&&(e.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let a=0;a<t.length;a++)r=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,a,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(t,e,r,a){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cS(this),this.idTokenSubscription=new cS(this),this.beforeStateQueue=new qU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ss(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Yl.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await zd(this,{idToken:t}),r=await fi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(xi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let r=e,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,c=r?._redirectEventId,m=await this.tryRedirectSignIn(t);(!u||u===c)&&m?.user&&(r=m.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await qd(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=CU()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(xi(this.app))return Promise.reject(ko(this));const e=t?mi(t):null;return e&&Nt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Nt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return xi(this.app)?Promise.reject(ko(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return xi(this.app)?Promise.reject(ko(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ss(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await HU(this),e=new QU(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Eh("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await FU(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Ss(t)||this._popupRedirectResolver;Nt(e,this,"argument-error"),this.redirectPersistenceManager=await Yl.create(this,[Ss(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,a){if(this._deleted)return()=>{};const u=typeof e=="function"?e:e.next.bind(e);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Nt(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof e=="function"){const g=t.addObserver(e,r,a);return()=>{c=!0,g()}}else{const g=t.addObserver(e);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=e2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){if(xi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&IU(`Error while retrieving App Check token: ${t.error}`),t?.token}}function jv(n){return mi(n)}class cS{constructor(t){this.auth=t,this.observer=null,this.addObserver=dk(e=>this.observer=e)}get next(){return Nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YU(n){zv=n}function XU(n){return zv.loadJS(n)}function WU(){return zv.gapiScript}function JU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(n,t){const e=lv(n,"auth");if(e.isInitialized()){const a=e.getImmediate(),u=e.getOptions();if(Bo(u,t??{}))return a;xs(a,"already-initialized")}return e.initialize({options:t})}function t5(n,t){const e=t?.persistence||[],r=(Array.isArray(e)?e:[e]).map(Ss);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(r,t?.popupRedirectResolver)}function e5(n,t,e){const r=jv(n);Nt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const a=!1,u=n2(t),{host:c,port:m}=n5(t),g=m===null?"":`:${m}`,y={url:`${u}//${c}${g}/`},E=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Nt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Nt(Bo(y,r.config.emulator)&&Bo(E,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=E,r.settings.appVerificationDisabledForTesting=!0,vu(c)?(db(`${u}//${c}${g}`),mb("Auth",!0)):r5()}function n2(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function n5(n){const t=n2(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const u=a[1];return{host:u,port:hS(r.substr(u.length+1))}}else{const[u,c]=r.split(":");return{host:u,port:hS(c)}}}function hS(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function r5(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return ws("not implemented")}_getIdTokenResponse(t){return ws("not implemented")}_linkToIdToken(t,e){return ws("not implemented")}_getReauthenticationResolver(t){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(n,t){return NU(n,"POST","/v1/accounts:signInWithIdp",$v(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5="http://localhost";class zo extends r2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new zo(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):xs("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:a,...u}=e;if(!r||!a)return null;const c=new zo(r,a);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Xl(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,Xl(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Xl(t,e)}buildRequest(){const t={requestUri:i5,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Th(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends i2{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends Ch{constructor(){super("facebook.com")}static credential(t){return zo._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ya.credentialFromTaggedObject(t)}static credentialFromError(t){return ya.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ya.credential(t.oauthAccessToken)}catch{return null}}}ya.FACEBOOK_SIGN_IN_METHOD="facebook.com";ya.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Ch{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return zo._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return _a.credentialFromTaggedObject(t)}static credentialFromError(t){return _a.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return _a.credential(e,r)}catch{return null}}}_a.GOOGLE_SIGN_IN_METHOD="google.com";_a.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends Ch{constructor(){super("github.com")}static credential(t){return zo._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return va.credentialFromTaggedObject(t)}static credentialFromError(t){return va.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return va.credential(t.oauthAccessToken)}catch{return null}}}va.GITHUB_SIGN_IN_METHOD="github.com";va.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends Ch{constructor(){super("twitter.com")}static credential(t,e){return zo._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Ea.credentialFromTaggedObject(t)}static credentialFromError(t){return Ea.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return Ea.credential(e,r)}catch{return null}}}Ea.TWITTER_SIGN_IN_METHOD="twitter.com";Ea.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,a=!1){const u=await fi._fromIdTokenResponse(t,r,a),c=fS(r);return new hu({user:u,providerId:c,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const a=fS(r);return new hu({user:t,providerId:a,_tokenResponse:r,operationType:e})}}function fS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd extends Ls{constructor(t,e,r,a){super(e.code,e.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Hd.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,a){return new Hd(t,e,r,a)}}function s2(n,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Hd._fromErrorAndOperation(n,u,t,r):u})}async function s5(n,t,e=!1){const r=await fh(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return hu._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a5(n,t,e=!1){const{auth:r}=n;if(xi(r.app))return Promise.reject(ko(r));const a="reauthenticate";try{const u=await fh(n,s2(r,a,t,n),e);Nt(u.idToken,r,"internal-error");const c=Bv(u.idToken);Nt(c,r,"internal-error");const{sub:m}=c;return Nt(n.uid===m,r,"user-mismatch"),hu._forOperation(n,a,u)}catch(u){throw u?.code==="auth/user-not-found"&&xs(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o5(n,t,e=!1){if(xi(n.app))return Promise.reject(ko(n));const r="signIn",a=await s2(n,r,t),u=await hu._fromIdTokenResponse(n,r,a);return e||await n._updateCurrentUser(u.user),u}function l5(n,t,e,r){return mi(n).onIdTokenChanged(t,e,r)}function u5(n,t,e){return mi(n).beforeAuthStateChanged(t,e)}const Gd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Gd,"1"),this.storage.removeItem(Gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5=1e3,h5=10;class o2 extends a2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=t2(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),a=this.localCache[e];r!==a&&t(e,a,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const r=t.key;e?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!e&&this.localCache[r]===c||this.notifyListeners(r,c)},u=this.storage.getItem(r);zU()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,h5):a()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},c5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}o2.type="LOCAL";const f5=o2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2 extends a2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}l2.type="SESSION";const u2=l2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(a=>a.isListeningto(t));if(e)return e;const r=new Im(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:a,data:u}=e.data,c=this.handlersMap[a];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const m=Array.from(c).map(async y=>y(e.origin,u)),g=await d5(m);e.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:g})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Im.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(n="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let u,c;return new Promise((m,g)=>{const y=qv("",20);a.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(I){const V=I;if(V.data.eventId===y)switch(V.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(V.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:y,data:e},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return window}function p5(n){zi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function g5(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function y5(){return navigator?.serviceWorker?.controller||null}function _5(){return c2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="firebaseLocalStorageDb",v5=1,Qd="firebaseLocalStorage",f2="fbase_key";class Dh{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Rm(n,t){return n.transaction([Qd],t?"readwrite":"readonly").objectStore(Qd)}function E5(){const n=indexedDB.deleteDatabase(h2);return new Dh(n).toPromise()}function v_(){const n=indexedDB.open(h2,v5);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Qd,{keyPath:f2})}catch(a){e(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Qd)?t(r):(r.close(),await E5(),t(await v_()))})})}async function dS(n,t,e){const r=Rm(n,!0).put({[f2]:t,value:e});return new Dh(r).toPromise()}async function T5(n,t){const e=Rm(n,!1).get(t),r=await new Dh(e).toPromise();return r===void 0?null:r.value}function mS(n,t){const e=Rm(n,!0).delete(t);return new Dh(e).toPromise()}const A5=800,w5=3;class d2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await v_(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>w5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return c2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Im._getInstance(_5()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await g5(),!this.activeServiceWorker)return;this.sender=new m5(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||y5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await v_();return await dS(t,Gd,"1"),await mS(t,Gd),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>dS(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>T5(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>mS(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const u=Rm(a,!1).getAll();return new Dh(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:a,value:u}of t)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(u)&&(this.notifyListeners(a,u),e.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),e.push(a));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}d2.type="LOCAL";const S5=d2;new bh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(n,t){return t?Ss(t):(Nt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv extends r2{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Xl(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Xl(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Xl(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function R5(n){return o5(n.auth,new Hv(n),n.bypassAuthState)}function b5(n){const{auth:t,user:e}=n;return Nt(e,t,"internal-error"),a5(e,new Hv(n),n.bypassAuthState)}async function C5(n){const{auth:t,user:e}=n;return Nt(e,t,"internal-error"),s5(e,new Hv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(t,e,r,a,u=!1){this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:a,tenantId:u,error:c,type:m}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:e,sessionId:r,tenantId:u||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return R5;case"linkViaPopup":case"linkViaRedirect":return C5;case"reauthViaPopup":case"reauthViaRedirect":return b5;default:xs(this.auth,"internal-error")}}resolve(t){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=new bh(2e3,1e4);class Ll extends m2{constructor(t,e,r,a,u){super(t,e,a,u),this.provider=r,this.authWindow=null,this.pollId=null,Ll.currentPopupAction&&Ll.currentPopupAction.cancel(),Ll.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Nt(t,this.auth,"internal-error"),t}async onExecution(){Ms(this.filter.length===1,"Popup operations only handle one event");const t=qv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ll.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,D5.get())};t()}}Ll.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5="pendingRedirect",pd=new Map;class P5 extends m2{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=pd.get(this.auth._key());if(!t){try{const r=await N5(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}pd.set(this.auth._key(),t)}return this.bypassAuthState||pd.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function N5(n,t){const e=M5(t),r=x5(n);if(!await r._isAvailable())return!1;const a=await r._get(e)==="true";return await r._remove(e),a}function O5(n,t){pd.set(n._key(),t)}function x5(n){return Ss(n._redirectPersistence)}function M5(n){return md(V5,n.config.apiKey,n.name)}async function k5(n,t,e=!1){if(xi(n.app))return Promise.reject(ko(n));const r=jv(n),a=I5(r,t),c=await new P5(r,a,e).execute();return c&&!e&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5=600*1e3;class U5{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!$5(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!p2(t)){const r=t.error.code?.split("auth/")[1]||"internal-error";e.onError(ji(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=L5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pS(t))}saveEventToCache(t){this.cachedEventUids.add(pS(t)),this.lastProcessedEventTime=Date.now()}}function pS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function p2({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function $5(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return p2(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B5(n,t={}){return Ru(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,j5=/^https?/;async function z5(n){if(n.config.emulator)return;const{authorizedDomains:t}=await B5(n);for(const e of t)try{if(q5(e))return}catch{}xs(n,"unauthorized-domain")}function q5(n){const t=y_(),{protocol:e,hostname:r}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===r}if(!j5.test(e))return!1;if(F5.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=new bh(3e4,6e4);function gS(){const n=zi().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function G5(n){return new Promise((t,e)=>{function r(){gS(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{gS(),e(ji(n,"network-request-failed"))},timeout:H5.get()})}if(zi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(zi().gapi?.load)r();else{const a=JU("iframefcb");return zi()[a]=()=>{gapi.load?r():e(ji(n,"network-request-failed"))},XU(`${WU()}?onload=${a}`).catch(u=>e(u))}}).catch(t=>{throw gd=null,t})}let gd=null;function Q5(n){return gd=gd||G5(n),gd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=new bh(5e3,15e3),Y5="__/auth/iframe",X5="emulator/auth/iframe",W5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},J5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Z5(n){const t=n.config;Nt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Uv(t,X5):`https://${n.config.authDomain}/${Y5}`,r={apiKey:t.apiKey,appName:n.name,v:Eu},a=J5.get(n.config.apiHost);a&&(r.eid=a);const u=n._getFrameworks();return u.length&&(r.fw=u.join(",")),`${e}?${Th(r).slice(1)}`}async function t$(n){const t=await Q5(n),e=zi().gapi;return Nt(e,n,"internal-error"),t.open({where:document.body,url:Z5(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:W5,dontclear:!0},r=>new Promise(async(a,u)=>{await r.restyle({setHideOnLeave:!1});const c=ji(n,"network-request-failed"),m=zi().setTimeout(()=>{u(c)},K5.get());function g(){zi().clearTimeout(m),a(r)}r.ping(g).then(g,()=>{u(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},n$=500,r$=600,i$="_blank",s$="http://localhost";class yS{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function a$(n,t,e,r=n$,a=r$){const u=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...e$,width:r.toString(),height:a.toString(),top:u,left:c},y=Gn().toLowerCase();e&&(m=YC(y)?i$:e),QC(y)&&(t=t||s$,g.scrollbars="yes");const E=Object.entries(g).reduce((V,[M,B])=>`${V}${M}=${B},`,"");if(jU(y)&&m!=="_self")return o$(t||"",m),new yS(null);const I=window.open(t||"",m,E);Nt(I,n,"popup-blocked");try{I.focus()}catch{}return new yS(I)}function o$(n,t){const e=document.createElement("a");e.href=n,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l$="__/auth/handler",u$="emulator/auth/handler",c$=encodeURIComponent("fac");async function _S(n,t,e,r,a,u){Nt(n.config.authDomain,n,"auth-domain-config-required"),Nt(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:r,v:Eu,eventId:a};if(t instanceof i2){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",fk(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,I]of Object.entries({}))c[E]=I}if(t instanceof Ch){const E=t.getScopes().filter(I=>I!=="");E.length>0&&(c.scopes=E.join(","))}n.tenantId&&(c.tid=n.tenantId);const m=c;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await n._getAppCheckToken(),y=g?`#${c$}=${encodeURIComponent(g)}`:"";return`${h$(n)}?${Th(m).slice(1)}${y}`}function h$({config:n}){return n.emulator?Uv(n,u$):`https://${n.authDomain}/${l$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="webStorageSupport";class f${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=u2,this._completeRedirectFn=k5,this._overrideRedirectResult=O5}async _openPopup(t,e,r,a){Ms(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await _S(t,e,r,y_(),a);return a$(t,u,qv())}async _openRedirect(t,e,r,a){await this._originValidation(t);const u=await _S(t,e,r,y_(),a);return p5(u),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:a,promise:u}=this.eventManagers[e];return a?Promise.resolve(a):(Ms(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await t$(t),r=new U5(t);return e.register("authEvent",a=>(Nt(a?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(ry,{type:ry},a=>{const u=a?.[0]?.[ry];u!==void 0&&e(!!u),xs(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=z5(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return t2()||KC()||Fv()}}const d$=f$;var vS="@firebase/auth",ES="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p$(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function g$(n){ru(new Fo("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=r.options;Nt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:m,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:e2(n)},y=new KU(r,a,u,g);return t5(y,e),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),ru(new Fo("auth-internal",t=>{const e=jv(t.getProvider("auth").getImmediate());return(r=>new m$(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Da(vS,ES,p$(n)),Da(vS,ES,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=300,_$=fb("authIdTokenMaxAge")||y$;let TS=null;const v$=n=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>_$)return;const a=e?.token;TS!==a&&(TS=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function E$(n=_b()){const t=lv(n,"auth");if(t.isInitialized())return t.getImmediate();const e=ZU(n,{popupRedirectResolver:d$,persistence:[S5,f5,u2]}),r=fb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const c=v$(u.toString());u5(e,c,()=>c(e.currentUser)),l5(e,m=>c(m))}}const a=cb("auth");return a&&e5(e,`http://${a}`),e}function T$(){return document.getElementsByTagName("head")?.[0]??document}YU({loadJS(n){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=t,r.onerror=a=>{const u=ji("internal-error");u.customData=a,e(u)},r.type="text/javascript",r.charset="UTF-8",T$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});g$("Browser");const A$={apiKey:"AIzaSyBICnJmNNRDHRe12kab44SGVyGRGmPMJS8",authDomain:"smas-website-ec8a9.firebaseapp.com",projectId:"smas-website-ec8a9",storageBucket:"smas-website-ec8a9.firebasestorage.app",messagingSenderId:"15458764016",appId:"1:15458764016:web:4c4f6312905cc6de4a6e35",measurementId:"G-THN2RTVTW2"},g2=yb(A$),iy=sU(g2);E$(g2);const sy="sams_authenticated",w$="354790526345352";function S$(){const[n,t]=Hr.useState([]),[e,r]=Hr.useState(""),[a,u]=Hr.useState([]),[c,m]=Hr.useState(""),[g,y]=Hr.useState([]),[E,I]=Hr.useState(null),[V,M]=Hr.useState(""),[B,G]=Hr.useState(!1);Hr.useEffect(()=>{localStorage.getItem(sy)==="true"&&G(!0)},[]);const U=F=>{F&&F.preventDefault(),V.trim()===w$?(G(!0),localStorage.setItem(sy,"true")):alert("Incorrect password. Try again!")},rt=()=>{G(!1),M(""),localStorage.removeItem(sy),u([]),y([]),r(""),m(""),t([]),I(null)};return Hr.useEffect(()=>{if(!B)return;const F=ey(Zg(iy,"resources"),it=>{const tt=new Set;it.forEach(W=>{const ct=W.data()||{};ct.year&&tt.add(ct.year)}),u(Array.from(tt).sort())});return()=>F()},[B]),Hr.useEffect(()=>{if(!B||!e)return;const F=nS(Zg(iy,"resources"),ty("year","==",e)),it=ey(F,tt=>{const W=new Set;tt.forEach(ct=>{const R=ct.data()||{};R.topic&&W.add(R.topic)}),y(Array.from(W).sort()),m("")});return()=>it()},[e,B]),Hr.useEffect(()=>{if(!B||!e||!c)return;const F=nS(Zg(iy,"resources"),ty("year","==",e),ty("topic","==",c)),it=ey(F,tt=>{const W=[];tt.forEach(ct=>{W.push({id:ct.id,...ct.data()})}),t(W),I(null)});return()=>it()},[e,c,B]),B?ge.jsx("div",{className:"bg-gradient-to-b from-orange-100 to-orange-50 min-h-screen py-12 px-6 md:px-12",children:ge.jsxs("div",{className:"max-w-4xl mx-auto",children:[ge.jsxs("div",{className:"flex items-center justify-between mb-6",children:[ge.jsx("h1",{className:"text-3xl font-bold text-orange-800",children:"Resources"}),ge.jsx("button",{onClick:rt,className:"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Logout"})]}),ge.jsxs("div",{className:"mb-8",children:[ge.jsx("label",{htmlFor:"year-select",className:"block text-lg font-medium text-orange-700 mb-2",children:"Select Year:"}),ge.jsxs("select",{id:"year-select",value:e,onChange:F=>r(F.target.value),className:"w-full p-3 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[ge.jsx("option",{value:"",children:"-- Select a year --"}),a.map(F=>ge.jsx("option",{value:F,children:F},F))]})]}),e&&ge.jsxs("div",{className:"mb-8",children:[ge.jsx("label",{htmlFor:"topic-select",className:"block text-lg font-medium text-orange-700 mb-2",children:"Select Topic:"}),ge.jsxs("select",{id:"topic-select",value:c,onChange:F=>m(F.target.value),className:"w-full p-3 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[ge.jsx("option",{value:"",children:"-- Select a topic --"}),g.map(F=>ge.jsx("option",{value:F,children:F},F))]})]}),n.length>0?ge.jsx("div",{className:"space-y-6",children:n.map(F=>ge.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[ge.jsx("h2",{className:"text-xl font-semibold text-orange-800 mb-2",children:F.title||F.topic}),ge.jsx("button",{onClick:()=>window.open(F.resourceUrl,"_blank"),className:"mt-2 px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-colors",children:"Open Resource"}),E===F.id&&ge.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-md",children:ge.jsx("p",{className:"text-gray-700",children:F.description||"No additional details."})})]},F.id))}):c?ge.jsx("p",{className:"text-center text-gray-600",children:"No resources found for this topic."}):ge.jsx("p",{className:"text-center text-gray-600",children:e?"Please select a topic to view resources.":"Please select a year first."})]})}):ge.jsx("div",{className:"flex items-center justify-center min-h-screen bg-orange-50",children:ge.jsxs("div",{className:"p-6 bg-white rounded-2xl shadow-lg w-80",children:[ge.jsx("h1",{className:"text-xl font-bold mb-4 text-center text-orange-700",children:"Enter Password"}),ge.jsxs("form",{onSubmit:U,className:"flex flex-col gap-4",children:[ge.jsx("input",{type:"password",value:V,onChange:F=>M(F.target.value),placeholder:"Password",className:"border rounded-lg px-3 py-2 focus:outline-none focus:ring focus:border-orange-400"}),ge.jsx("button",{type:"submit",className:"bg-orange-600 hover:bg-orange-700 text-white font-semibold rounded-lg py-2",children:"Unlock"})]})]})})}function y2(){return st.jsx("div",{className:"bg-gradient-to-b from-orange-100 to-orange-50 min-h-screen py-24 px-6 md:px-12",children:st.jsxs("section",{className:"max-w-7xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden border-2 border-orange-200",children:[st.jsx("div",{className:"bg-gradient-to-b from-orange-300 to-orange-200 p-6",children:st.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-orange-800 text-center mb-4",children:"Contact Us!"})}),st.jsx("div",{className:"flex flex-col md:flex-row items-center gap-8 md:gap-16 p-8 bg-orange-100",children:st.jsxs("ul",{className:"text-lg md:text-xl text-gray-700",children:[st.jsxs("li",{children:[st.jsx("img",{src:"/instagram-logo.png",alt:"Instagram Logo",className:"inline-block w-13 h-8 mr-2"}),"Instagram @uom_sams"]}),st.jsx("li",{children:"Follow us on social media for updates!"})]})})]})})}function I$(){return st.jsxs(LS,{children:[st.jsx(SP,{})," ",st.jsxs(OS,{children:[st.jsx(hi,{path:"/",element:st.jsx(uy,{})}),st.jsx(hi,{path:"/questions",element:st.jsx(ab,{})}),st.jsx(hi,{path:"/resources",element:st.jsx(S$,{})}),st.jsx(hi,{path:"/contact",element:st.jsx(y2,{})})]})]})}const ay="sams_authenticated",R$="354790526345352";function b$(){const[n,t]=Y.useState([]),[e,r]=Y.useState(""),[a,u]=Y.useState([]),[c,m]=Y.useState(""),[g,y]=Y.useState([]),[E,I]=Y.useState(null),[V,M]=Y.useState(""),[B,G]=Y.useState(!1);Y.useEffect(()=>{localStorage.getItem(ay)==="true"&&G(!0)},[]);const U=F=>{F&&F.preventDefault(),V.trim()===R$?(G(!0),localStorage.setItem(ay,"true")):alert("Incorrect password. Try again!")},rt=()=>{G(!1),M(""),localStorage.removeItem(ay),u([]),y([]),r(""),m(""),t([]),I(null)};return Y.useEffect(()=>{if(!B)return;const F=Gc(qc(Kc,"resources"),it=>{const tt=new Set;it.forEach(W=>{const ct=W.data()||{};ct.year&&tt.add(ct.year)}),u(Array.from(tt).sort())});return()=>F()},[B]),Y.useEffect(()=>{if(!B||!e)return;const F=qy(qc(Kc,"resources"),id("year","==",e)),it=Gc(F,tt=>{const W=new Set;tt.forEach(ct=>{const R=ct.data()||{};R.topic&&W.add(R.topic)}),y(Array.from(W).sort()),m("")});return()=>it()},[e,B]),Y.useEffect(()=>{if(!B||!e||!c)return;const F=qy(qc(Kc,"resources"),id("year","==",e),id("topic","==",c)),it=Gc(F,tt=>{const W=[];tt.forEach(ct=>{W.push({id:ct.id,...ct.data()})}),t(W),I(null)});return()=>it()},[e,c,B]),B?st.jsx("div",{className:"bg-gradient-to-b from-orange-100 to-orange-50 min-h-screen py-12 px-6 md:px-12",children:st.jsxs("div",{className:"max-w-4xl mx-auto",children:[st.jsxs("div",{className:"flex items-center justify-between mb-6",children:[st.jsx("h1",{className:"text-3xl font-bold text-orange-800",children:"Resources"}),st.jsx("button",{onClick:rt,className:"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Logout"})]}),st.jsxs("div",{className:"mb-8",children:[st.jsx("label",{htmlFor:"year-select",className:"block text-lg font-medium text-orange-700 mb-2",children:"Select Year:"}),st.jsxs("select",{id:"year-select",value:e,onChange:F=>r(F.target.value),className:"w-full p-3 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[st.jsx("option",{value:"",children:"-- Select a year --"}),a.map(F=>st.jsx("option",{value:F,children:F},F))]})]}),e&&st.jsxs("div",{className:"mb-8",children:[st.jsx("label",{htmlFor:"topic-select",className:"block text-lg font-medium text-orange-700 mb-2",children:"Select Topic:"}),st.jsxs("select",{id:"topic-select",value:c,onChange:F=>m(F.target.value),className:"w-full p-3 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[st.jsx("option",{value:"",children:"-- Select a topic --"}),g.map(F=>st.jsx("option",{value:F,children:F},F))]})]}),n.length>0?st.jsx("div",{className:"space-y-6",children:n.map(F=>st.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[st.jsx("h2",{className:"text-xl font-semibold text-orange-800 mb-2",children:F.title||F.topic}),st.jsx("button",{onClick:()=>window.open(F.resourceUrl,"_blank"),className:"mt-2 px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-colors",children:"Open Resource"}),E===F.id&&st.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-md",children:st.jsx("p",{className:"text-gray-700",children:F.description||"No additional details."})})]},F.id))}):c?st.jsx("p",{className:"text-center text-gray-600",children:"No resources found for this topic."}):st.jsx("p",{className:"text-center text-gray-600",children:e?"Please select a topic to view resources.":"Please select a year first."})]})}):st.jsx("div",{className:"flex items-center justify-center min-h-screen bg-orange-50",children:st.jsxs("div",{className:"p-6 bg-white rounded-2xl shadow-lg w-80",children:[st.jsx("h1",{className:"text-xl font-bold mb-4 text-center text-orange-700",children:"Enter Password"}),st.jsxs("form",{onSubmit:U,className:"flex flex-col gap-4",children:[st.jsx("input",{type:"password",value:V,onChange:F=>M(F.target.value),placeholder:"Password",className:"border rounded-lg px-3 py-2 focus:outline-none focus:ring focus:border-orange-400"}),st.jsx("button",{type:"submit",className:"bg-orange-600 hover:bg-orange-700 text-white font-semibold rounded-lg py-2",children:"Unlock"})]})]})})}wP.createRoot(document.getElementById("root")).render(st.jsx(LS,{children:st.jsx(OS,{children:st.jsxs(hi,{path:"/",element:st.jsx(I$,{}),children:[st.jsx(hi,{index:!0,element:st.jsx(uy,{})}),st.jsx(hi,{path:"questions",element:st.jsx(ab,{})}),st.jsx(hi,{path:"about",element:st.jsx(uy,{})}),st.jsx(hi,{path:"contact",element:st.jsx(y2,{})}),st.jsx(hi,{path:"resources",element:st.jsx(b$,{})}),"  "]})})}));
